(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function c1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sb={exports:{}},Fc={},Ib={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),u1=Symbol.for("react.portal"),d1=Symbol.for("react.fragment"),h1=Symbol.for("react.strict_mode"),f1=Symbol.for("react.profiler"),p1=Symbol.for("react.provider"),m1=Symbol.for("react.context"),x1=Symbol.for("react.forward_ref"),g1=Symbol.for("react.suspense"),b1=Symbol.for("react.memo"),y1=Symbol.for("react.lazy"),jm=Symbol.iterator;function v1(t){return t===null||typeof t!="object"?null:(t=jm&&t[jm]||t["@@iterator"],typeof t=="function"?t:null)}var Cb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ab=Object.assign,Rb={};function qi(t,e,n){this.props=t,this.context=e,this.refs=Rb,this.updater=n||Cb}qi.prototype.isReactComponent={};qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pb(){}Pb.prototype=qi.prototype;function Kh(t,e,n){this.props=t,this.context=e,this.refs=Rb,this.updater=n||Cb}var Qh=Kh.prototype=new Pb;Qh.constructor=Kh;Ab(Qh,qi.prototype);Qh.isPureReactComponent=!0;var Em=Array.isArray,Ob=Object.prototype.hasOwnProperty,Yh={current:null},Db={key:!0,ref:!0,__self:!0,__source:!0};function Lb(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Ob.call(e,r)&&!Db.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:_o,type:t,key:a,ref:o,props:s,_owner:Yh.current}}function w1(t,e){return{$$typeof:_o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jh(t){return typeof t=="object"&&t!==null&&t.$$typeof===_o}function k1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tm=/\/+/g;function Mu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?k1(""+t.key):e.toString(36)}function vl(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _o:case u1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Mu(o,0):r,Em(s)?(n="",t!=null&&(n=t.replace(Tm,"$&/")+"/"),vl(s,e,n,"",function(d){return d})):s!=null&&(Jh(s)&&(s=w1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Tm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Em(t))for(var c=0;c<t.length;c++){a=t[c];var u=r+Mu(a,c);o+=vl(a,e,n,u,s)}else if(u=v1(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=r+Mu(a,c++),o+=vl(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qo(t,e,n){if(t==null)return t;var r=[],s=0;return vl(t,r,"","",function(a){return e.call(n,a,s++)}),r}function N1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},wl={transition:null},_1={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:wl,ReactCurrentOwner:Yh};function Vb(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Qo,forEach:function(t,e,n){Qo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qo(t,function(){e++}),e},toArray:function(t){return Qo(t,function(e){return e})||[]},only:function(t){if(!Jh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=qi;ye.Fragment=d1;ye.Profiler=f1;ye.PureComponent=Kh;ye.StrictMode=h1;ye.Suspense=g1;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_1;ye.act=Vb;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ab({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Yh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Ob.call(e,u)&&!Db.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:_o,type:t.type,key:s,ref:a,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:m1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:p1,_context:t},t.Consumer=t};ye.createElement=Lb;ye.createFactory=function(t){var e=Lb.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:x1,render:t}};ye.isValidElement=Jh;ye.lazy=function(t){return{$$typeof:y1,_payload:{_status:-1,_result:t},_init:N1}};ye.memo=function(t,e){return{$$typeof:b1,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=wl.transition;wl.transition={};try{t()}finally{wl.transition=e}};ye.unstable_act=Vb;ye.useCallback=function(t,e){return Mt.current.useCallback(t,e)};ye.useContext=function(t){return Mt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Mt.current.useEffect(t,e)};ye.useId=function(){return Mt.current.useId()};ye.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Mt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};ye.useRef=function(t){return Mt.current.useRef(t)};ye.useState=function(t){return Mt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return Mt.current.useTransition()};ye.version="18.3.1";Ib.exports=ye;var G=Ib.exports;const Cn=c1(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j1=G,E1=Symbol.for("react.element"),T1=Symbol.for("react.fragment"),S1=Object.prototype.hasOwnProperty,I1=j1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C1={key:!0,ref:!0,__self:!0,__source:!0};function Mb(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)S1.call(e,r)&&!C1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:E1,type:t,key:a,ref:o,props:s,_owner:I1.current}}Fc.Fragment=T1;Fc.jsx=Mb;Fc.jsxs=Mb;Sb.exports=Fc;var i=Sb.exports,Td={},zb={exports:{}},an={},Fb={exports:{}},Ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,$){var Q=z.length;z.push($);e:for(;0<Q;){var se=Q-1>>>1,ce=z[se];if(0<s(ce,$))z[se]=$,z[Q]=ce,Q=se;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var $=z[0],Q=z.pop();if(Q!==$){z[0]=Q;e:for(var se=0,ce=z.length,He=ce>>>1;se<He;){var Ce=2*(se+1)-1,Ct=z[Ce],Ze=Ce+1,Kt=z[Ze];if(0>s(Ct,Q))Ze<ce&&0>s(Kt,Ct)?(z[se]=Kt,z[Ze]=Q,se=Ze):(z[se]=Ct,z[Ce]=Q,se=Ce);else if(Ze<ce&&0>s(Kt,Q))z[se]=Kt,z[Ze]=Q,se=Ze;else break e}}return $}function s(z,$){var Q=z.sortIndex-$.sortIndex;return Q!==0?Q:z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,x=null,b=3,E=!1,I=!1,A=!1,O=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(z){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=z)r(d),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(d)}}function L(z){if(A=!1,j(z),!I)if(n(u)!==null)I=!0,wt(S);else{var $=n(d);$!==null&&F(L,$.startTime-z)}}function S(z,$){I=!1,A&&(A=!1,N(p),p=-1),E=!0;var Q=b;try{for(j($),x=n(u);x!==null&&(!(x.expirationTime>$)||z&&!C());){var se=x.callback;if(typeof se=="function"){x.callback=null,b=x.priorityLevel;var ce=se(x.expirationTime<=$);$=t.unstable_now(),typeof ce=="function"?x.callback=ce:x===n(u)&&r(u),j($)}else r(u);x=n(u)}if(x!==null)var He=!0;else{var Ce=n(d);Ce!==null&&F(L,Ce.startTime-$),He=!1}return He}finally{x=null,b=Q,E=!1}}var T=!1,g=null,p=-1,y=5,k=-1;function C(){return!(t.unstable_now()-k<y)}function R(){if(g!==null){var z=t.unstable_now();k=z;var $=!0;try{$=g(!0,z)}finally{$?_():(T=!1,g=null)}}else T=!1}var _;if(typeof v=="function")_=function(){v(R)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Ge=ae.port2;ae.port1.onmessage=R,_=function(){Ge.postMessage(null)}}else _=function(){O(R,0)};function wt(z){g=z,T||(T=!0,_())}function F(z,$){p=O(function(){z(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){I||E||(I=!0,wt(S))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var Q=b;b=$;try{return z()}finally{b=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=b;b=z;try{return $()}finally{b=Q}},t.unstable_scheduleCallback=function(z,$,Q){var se=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?se+Q:se):Q=se,z){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Q+ce,z={id:f++,callback:$,priorityLevel:z,startTime:Q,expirationTime:ce,sortIndex:-1},Q>se?(z.sortIndex=Q,e(d,z),n(u)===null&&z===n(d)&&(A?(N(p),p=-1):A=!0,F(L,Q-se))):(z.sortIndex=ce,e(u,z),I||E||(I=!0,wt(S))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var $=b;return function(){var Q=b;b=$;try{return z.apply(this,arguments)}finally{b=Q}}}})(Ub);Fb.exports=Ub;var A1=Fb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1=G,sn=A1;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bb=new Set,Qa={};function zs(t,e){Ci(t,e),Ci(t+"Capture",e)}function Ci(t,e){for(Qa[t]=e,t=0;t<e.length;t++)Bb.add(e[t])}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sd=Object.prototype.hasOwnProperty,P1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sm={},Im={};function O1(t){return Sd.call(Im,t)?!0:Sd.call(Sm,t)?!1:P1.test(t)?Im[t]=!0:(Sm[t]=!0,!1)}function D1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L1(t,e,n,r){if(e===null||typeof e>"u"||D1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xh=/[\-:]([a-z])/g;function Zh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xh,Zh);bt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xh,Zh);bt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xh,Zh);bt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});bt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ef(t,e,n,r){var s=bt.hasOwnProperty(e)?bt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(L1(e,n,s,r)&&(n=null),r||s===null?O1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gr=R1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yo=Symbol.for("react.element"),ri=Symbol.for("react.portal"),si=Symbol.for("react.fragment"),tf=Symbol.for("react.strict_mode"),Id=Symbol.for("react.profiler"),$b=Symbol.for("react.provider"),Hb=Symbol.for("react.context"),nf=Symbol.for("react.forward_ref"),Cd=Symbol.for("react.suspense"),Ad=Symbol.for("react.suspense_list"),rf=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),Wb=Symbol.for("react.offscreen"),Cm=Symbol.iterator;function ma(t){return t===null||typeof t!="object"?null:(t=Cm&&t[Cm]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,zu;function _a(t){if(zu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zu=e&&e[1]||""}return`
`+zu+t}var Fu=!1;function Uu(t,e){if(!t||Fu)return"";Fu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,c=a.length-1;1<=o&&0<=c&&s[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==a[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Fu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_a(t):""}function V1(t){switch(t.tag){case 5:return _a(t.type);case 16:return _a("Lazy");case 13:return _a("Suspense");case 19:return _a("SuspenseList");case 0:case 2:case 15:return t=Uu(t.type,!1),t;case 11:return t=Uu(t.type.render,!1),t;case 1:return t=Uu(t.type,!0),t;default:return""}}function Rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case si:return"Fragment";case ri:return"Portal";case Id:return"Profiler";case tf:return"StrictMode";case Cd:return"Suspense";case Ad:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hb:return(t.displayName||"Context")+".Consumer";case $b:return(t._context.displayName||"Context")+".Provider";case nf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rf:return e=t.displayName||null,e!==null?e:Rd(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return Rd(t(e))}catch{}}return null}function M1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(e);case 8:return e===tf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z1(t){var e=qb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jo(t){t._valueTracker||(t._valueTracker=z1(t))}function Gb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pd(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Am(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kb(t,e){e=e.checked,e!=null&&ef(t,"checked",e,!1)}function Od(t,e){Kb(t,e);var n=Kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dd(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dd(t,e,n){(e!=="number"||$l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ja=Array.isArray;function xi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ld(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(ja(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kr(n)}}function Qb(t,e){var n=Kr(e.value),r=Kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Om(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xo,Jb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xo=Xo||document.createElement("div"),Xo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F1=["Webkit","ms","Moz","O"];Object.keys(Ra).forEach(function(t){F1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ra[e]=Ra[t]})});function Xb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ra.hasOwnProperty(t)&&Ra[t]?(""+e).trim():e+"px"}function Zb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Xb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var U1=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Md(t,e){if(e){if(U1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function zd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=null;function sf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ud=null,gi=null,bi=null;function Dm(t){if(t=To(t)){if(typeof Ud!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Wc(e),Ud(t.stateNode,t.type,e))}}function e0(t){gi?bi?bi.push(t):bi=[t]:gi=t}function t0(){if(gi){var t=gi,e=bi;if(bi=gi=null,Dm(t),e)for(t=0;t<e.length;t++)Dm(e[t])}}function n0(t,e){return t(e)}function r0(){}var Bu=!1;function s0(t,e,n){if(Bu)return t(e,n);Bu=!0;try{return n0(t,e,n)}finally{Bu=!1,(gi!==null||bi!==null)&&(r0(),t0())}}function Ja(t,e){var n=t.stateNode;if(n===null)return null;var r=Wc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Bd=!1;if(lr)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){Bd=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{Bd=!1}function B1(t,e,n,r,s,a,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Pa=!1,Hl=null,Wl=!1,$d=null,$1={onError:function(t){Pa=!0,Hl=t}};function H1(t,e,n,r,s,a,o,c,u){Pa=!1,Hl=null,B1.apply($1,arguments)}function W1(t,e,n,r,s,a,o,c,u){if(H1.apply(this,arguments),Pa){if(Pa){var d=Hl;Pa=!1,Hl=null}else throw Error(W(198));Wl||(Wl=!0,$d=d)}}function Fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lm(t){if(Fs(t)!==t)throw Error(W(188))}function q1(t){var e=t.alternate;if(!e){if(e=Fs(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Lm(s),t;if(a===r)return Lm(s),e;a=a.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=a;break}if(c===r){o=!0,r=s,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=s;break}if(c===r){o=!0,r=a,n=s;break}c=c.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function a0(t){return t=q1(t),t!==null?o0(t):null}function o0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=o0(t);if(e!==null)return e;t=t.sibling}return null}var l0=sn.unstable_scheduleCallback,Vm=sn.unstable_cancelCallback,G1=sn.unstable_shouldYield,K1=sn.unstable_requestPaint,Qe=sn.unstable_now,Q1=sn.unstable_getCurrentPriorityLevel,af=sn.unstable_ImmediatePriority,c0=sn.unstable_UserBlockingPriority,ql=sn.unstable_NormalPriority,Y1=sn.unstable_LowPriority,u0=sn.unstable_IdlePriority,Uc=null,Fn=null;function J1(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Uc,t,void 0,(t.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:eN,X1=Math.log,Z1=Math.LN2;function eN(t){return t>>>=0,t===0?32:31-(X1(t)/Z1|0)|0}var Zo=64,el=4194304;function Ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Ea(c):(a&=o,a!==0&&(r=Ea(a)))}else o=n&~s,o!==0?r=Ea(o):a!==0&&(r=Ea(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tn(e),s=1<<n,r|=t[n],e&=~s;return r}function tN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Tn(a),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=tN(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function Hd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d0(){var t=Zo;return Zo<<=1,!(Zo&4194240)&&(Zo=64),t}function $u(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function jo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tn(e),t[e]=n}function rN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Tn(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function of(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Se=0;function h0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f0,lf,p0,m0,x0,Wd=!1,tl=[],Vr=null,Mr=null,zr=null,Xa=new Map,Za=new Map,Sr=[],sN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mm(t,e){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":Xa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(e.pointerId)}}function ga(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=To(e),e!==null&&lf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function iN(t,e,n,r,s){switch(e){case"focusin":return Vr=ga(Vr,t,e,n,r,s),!0;case"dragenter":return Mr=ga(Mr,t,e,n,r,s),!0;case"mouseover":return zr=ga(zr,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Xa.set(a,ga(Xa.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Za.set(a,ga(Za.get(a)||null,t,e,n,r,s)),!0}return!1}function g0(t){var e=bs(t.target);if(e!==null){var n=Fs(e);if(n!==null){if(e=n.tag,e===13){if(e=i0(n),e!==null){t.blockedOn=e,x0(t.priority,function(){p0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fd=r,n.target.dispatchEvent(r),Fd=null}else return e=To(n),e!==null&&lf(e),t.blockedOn=n,!1;e.shift()}return!0}function zm(t,e,n){kl(t)&&n.delete(e)}function aN(){Wd=!1,Vr!==null&&kl(Vr)&&(Vr=null),Mr!==null&&kl(Mr)&&(Mr=null),zr!==null&&kl(zr)&&(zr=null),Xa.forEach(zm),Za.forEach(zm)}function ba(t,e){t.blockedOn===e&&(t.blockedOn=null,Wd||(Wd=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,aN)))}function eo(t){function e(s){return ba(s,t)}if(0<tl.length){ba(tl[0],t);for(var n=1;n<tl.length;n++){var r=tl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vr!==null&&ba(Vr,t),Mr!==null&&ba(Mr,t),zr!==null&&ba(zr,t),Xa.forEach(e),Za.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)g0(n),n.blockedOn===null&&Sr.shift()}var yi=gr.ReactCurrentBatchConfig,Kl=!0;function oN(t,e,n,r){var s=Se,a=yi.transition;yi.transition=null;try{Se=1,cf(t,e,n,r)}finally{Se=s,yi.transition=a}}function lN(t,e,n,r){var s=Se,a=yi.transition;yi.transition=null;try{Se=4,cf(t,e,n,r)}finally{Se=s,yi.transition=a}}function cf(t,e,n,r){if(Kl){var s=qd(t,e,n,r);if(s===null)Zu(t,e,r,Ql,n),Mm(t,r);else if(iN(s,t,e,n,r))r.stopPropagation();else if(Mm(t,r),e&4&&-1<sN.indexOf(t)){for(;s!==null;){var a=To(s);if(a!==null&&f0(a),a=qd(t,e,n,r),a===null&&Zu(t,e,r,Ql,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Zu(t,e,r,null,n)}}var Ql=null;function qd(t,e,n,r){if(Ql=null,t=sf(r),t=bs(t),t!==null)if(e=Fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ql=t,null}function b0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q1()){case af:return 1;case c0:return 4;case ql:case Y1:return 16;case u0:return 536870912;default:return 16}default:return 16}}var Or=null,uf=null,Nl=null;function y0(){if(Nl)return Nl;var t,e=uf,n=e.length,r,s="value"in Or?Or.value:Or.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return Nl=s.slice(t,1<r?1-r:void 0)}function _l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nl(){return!0}function Fm(){return!1}function on(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?nl:Fm,this.isPropagationStopped=Fm,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nl)},persist:function(){},isPersistent:nl}),e}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},df=on(Gi),Eo=Be({},Gi,{view:0,detail:0}),cN=on(Eo),Hu,Wu,ya,Bc=Be({},Eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ya&&(ya&&t.type==="mousemove"?(Hu=t.screenX-ya.screenX,Wu=t.screenY-ya.screenY):Wu=Hu=0,ya=t),Hu)},movementY:function(t){return"movementY"in t?t.movementY:Wu}}),Um=on(Bc),uN=Be({},Bc,{dataTransfer:0}),dN=on(uN),hN=Be({},Eo,{relatedTarget:0}),qu=on(hN),fN=Be({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),pN=on(fN),mN=Be({},Gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xN=on(mN),gN=Be({},Gi,{data:0}),Bm=on(gN),bN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vN[t])?!!e[t]:!1}function hf(){return wN}var kN=Be({},Eo,{key:function(t){if(t.key){var e=bN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hf,charCode:function(t){return t.type==="keypress"?_l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NN=on(kN),_N=Be({},Bc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$m=on(_N),jN=Be({},Eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hf}),EN=on(jN),TN=Be({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),SN=on(TN),IN=Be({},Bc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CN=on(IN),AN=[9,13,27,32],ff=lr&&"CompositionEvent"in window,Oa=null;lr&&"documentMode"in document&&(Oa=document.documentMode);var RN=lr&&"TextEvent"in window&&!Oa,v0=lr&&(!ff||Oa&&8<Oa&&11>=Oa),Hm=" ",Wm=!1;function w0(t,e){switch(t){case"keyup":return AN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ii=!1;function PN(t,e){switch(t){case"compositionend":return k0(e);case"keypress":return e.which!==32?null:(Wm=!0,Hm);case"textInput":return t=e.data,t===Hm&&Wm?null:t;default:return null}}function ON(t,e){if(ii)return t==="compositionend"||!ff&&w0(t,e)?(t=y0(),Nl=uf=Or=null,ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return v0&&e.locale!=="ko"?null:e.data;default:return null}}var DN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DN[t.type]:e==="textarea"}function N0(t,e,n,r){e0(r),e=Yl(e,"onChange"),0<e.length&&(n=new df("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Da=null,to=null;function LN(t){O0(t,0)}function $c(t){var e=li(t);if(Gb(e))return t}function VN(t,e){if(t==="change")return e}var _0=!1;if(lr){var Gu;if(lr){var Ku="oninput"in document;if(!Ku){var Gm=document.createElement("div");Gm.setAttribute("oninput","return;"),Ku=typeof Gm.oninput=="function"}Gu=Ku}else Gu=!1;_0=Gu&&(!document.documentMode||9<document.documentMode)}function Km(){Da&&(Da.detachEvent("onpropertychange",j0),to=Da=null)}function j0(t){if(t.propertyName==="value"&&$c(to)){var e=[];N0(e,to,t,sf(t)),s0(LN,e)}}function MN(t,e,n){t==="focusin"?(Km(),Da=e,to=n,Da.attachEvent("onpropertychange",j0)):t==="focusout"&&Km()}function zN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $c(to)}function FN(t,e){if(t==="click")return $c(e)}function UN(t,e){if(t==="input"||t==="change")return $c(e)}function BN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:BN;function no(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sd.call(e,s)||!An(t[s],e[s]))return!1}return!0}function Qm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ym(t,e){var n=Qm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qm(n)}}function E0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?E0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function T0(){for(var t=window,e=$l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$l(t.document)}return e}function pf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $N(t){var e=T0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&E0(n.ownerDocument.documentElement,n)){if(r!==null&&pf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=Ym(n,a);var o=Ym(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HN=lr&&"documentMode"in document&&11>=document.documentMode,ai=null,Gd=null,La=null,Kd=!1;function Jm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kd||ai==null||ai!==$l(r)||(r=ai,"selectionStart"in r&&pf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),La&&no(La,r)||(La=r,r=Yl(Gd,"onSelect"),0<r.length&&(e=new df("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ai)))}function rl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oi={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionend:rl("Transition","TransitionEnd")},Qu={},S0={};lr&&(S0=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function Hc(t){if(Qu[t])return Qu[t];if(!oi[t])return t;var e=oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in S0)return Qu[t]=e[n];return t}var I0=Hc("animationend"),C0=Hc("animationiteration"),A0=Hc("animationstart"),R0=Hc("transitionend"),P0=new Map,Xm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(t,e){P0.set(t,e),zs(e,[t])}for(var Yu=0;Yu<Xm.length;Yu++){var Ju=Xm[Yu],WN=Ju.toLowerCase(),qN=Ju[0].toUpperCase()+Ju.slice(1);ss(WN,"on"+qN)}ss(I0,"onAnimationEnd");ss(C0,"onAnimationIteration");ss(A0,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(R0,"onTransitionEnd");Ci("onMouseEnter",["mouseout","mouseover"]);Ci("onMouseLeave",["mouseout","mouseover"]);Ci("onPointerEnter",["pointerout","pointerover"]);Ci("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Zm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,W1(r,e,void 0,t),t.currentTarget=null}function O0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==a&&s.isPropagationStopped())break e;Zm(s,c,d),a=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==a&&s.isPropagationStopped())break e;Zm(s,c,d),a=u}}}if(Wl)throw t=$d,Wl=!1,$d=null,t}function Oe(t,e){var n=e[Zd];n===void 0&&(n=e[Zd]=new Set);var r=t+"__bubble";n.has(r)||(D0(e,t,2,!1),n.add(r))}function Xu(t,e,n){var r=0;e&&(r|=4),D0(n,t,r,e)}var sl="_reactListening"+Math.random().toString(36).slice(2);function ro(t){if(!t[sl]){t[sl]=!0,Bb.forEach(function(n){n!=="selectionchange"&&(GN.has(n)||Xu(n,!1,t),Xu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sl]||(e[sl]=!0,Xu("selectionchange",!1,e))}}function D0(t,e,n,r){switch(b0(e)){case 1:var s=oN;break;case 4:s=lN;break;default:s=cf}n=s.bind(null,e,n,t),s=void 0,!Bd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Zu(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=bs(c),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}c=c.parentNode}}r=r.return}s0(function(){var d=a,f=sf(n),x=[];e:{var b=P0.get(t);if(b!==void 0){var E=df,I=t;switch(t){case"keypress":if(_l(n)===0)break e;case"keydown":case"keyup":E=NN;break;case"focusin":I="focus",E=qu;break;case"focusout":I="blur",E=qu;break;case"beforeblur":case"afterblur":E=qu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=dN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=EN;break;case I0:case C0:case A0:E=pN;break;case R0:E=SN;break;case"scroll":E=cN;break;case"wheel":E=CN;break;case"copy":case"cut":case"paste":E=xN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=$m}var A=(e&4)!==0,O=!A&&t==="scroll",N=A?b!==null?b+"Capture":null:b;A=[];for(var v=d,j;v!==null;){j=v;var L=j.stateNode;if(j.tag===5&&L!==null&&(j=L,N!==null&&(L=Ja(v,N),L!=null&&A.push(so(v,L,j)))),O)break;v=v.return}0<A.length&&(b=new E(b,I,null,n,f),x.push({event:b,listeners:A}))}}if(!(e&7)){e:{if(b=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",b&&n!==Fd&&(I=n.relatedTarget||n.fromElement)&&(bs(I)||I[cr]))break e;if((E||b)&&(b=f.window===f?f:(b=f.ownerDocument)?b.defaultView||b.parentWindow:window,E?(I=n.relatedTarget||n.toElement,E=d,I=I?bs(I):null,I!==null&&(O=Fs(I),I!==O||I.tag!==5&&I.tag!==6)&&(I=null)):(E=null,I=d),E!==I)){if(A=Um,L="onMouseLeave",N="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=$m,L="onPointerLeave",N="onPointerEnter",v="pointer"),O=E==null?b:li(E),j=I==null?b:li(I),b=new A(L,v+"leave",E,n,f),b.target=O,b.relatedTarget=j,L=null,bs(f)===d&&(A=new A(N,v+"enter",I,n,f),A.target=j,A.relatedTarget=O,L=A),O=L,E&&I)t:{for(A=E,N=I,v=0,j=A;j;j=Xs(j))v++;for(j=0,L=N;L;L=Xs(L))j++;for(;0<v-j;)A=Xs(A),v--;for(;0<j-v;)N=Xs(N),j--;for(;v--;){if(A===N||N!==null&&A===N.alternate)break t;A=Xs(A),N=Xs(N)}A=null}else A=null;E!==null&&ex(x,b,E,A,!1),I!==null&&O!==null&&ex(x,O,I,A,!0)}}e:{if(b=d?li(d):window,E=b.nodeName&&b.nodeName.toLowerCase(),E==="select"||E==="input"&&b.type==="file")var S=VN;else if(qm(b))if(_0)S=UN;else{S=zN;var T=MN}else(E=b.nodeName)&&E.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(S=FN);if(S&&(S=S(t,d))){N0(x,S,n,f);break e}T&&T(t,b,d),t==="focusout"&&(T=b._wrapperState)&&T.controlled&&b.type==="number"&&Dd(b,"number",b.value)}switch(T=d?li(d):window,t){case"focusin":(qm(T)||T.contentEditable==="true")&&(ai=T,Gd=d,La=null);break;case"focusout":La=Gd=ai=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,Jm(x,n,f);break;case"selectionchange":if(HN)break;case"keydown":case"keyup":Jm(x,n,f)}var g;if(ff)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else ii?w0(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(v0&&n.locale!=="ko"&&(ii||p!=="onCompositionStart"?p==="onCompositionEnd"&&ii&&(g=y0()):(Or=f,uf="value"in Or?Or.value:Or.textContent,ii=!0)),T=Yl(d,p),0<T.length&&(p=new Bm(p,t,null,n,f),x.push({event:p,listeners:T}),g?p.data=g:(g=k0(n),g!==null&&(p.data=g)))),(g=RN?PN(t,n):ON(t,n))&&(d=Yl(d,"onBeforeInput"),0<d.length&&(f=new Bm("onBeforeInput","beforeinput",null,n,f),x.push({event:f,listeners:d}),f.data=g))}O0(x,e)})}function so(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Ja(t,n),a!=null&&r.unshift(so(t,a,s)),a=Ja(t,e),a!=null&&r.push(so(t,a,s))),t=t.return}return r}function Xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ex(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Ja(n,a),u!=null&&o.unshift(so(n,u,c))):s||(u=Ja(n,a),u!=null&&o.push(so(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var KN=/\r\n?/g,QN=/\u0000|\uFFFD/g;function tx(t){return(typeof t=="string"?t:""+t).replace(KN,`
`).replace(QN,"")}function il(t,e,n){if(e=tx(e),tx(t)!==e&&n)throw Error(W(425))}function Jl(){}var Qd=null,Yd=null;function Jd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xd=typeof setTimeout=="function"?setTimeout:void 0,YN=typeof clearTimeout=="function"?clearTimeout:void 0,nx=typeof Promise=="function"?Promise:void 0,JN=typeof queueMicrotask=="function"?queueMicrotask:typeof nx<"u"?function(t){return nx.resolve(null).then(t).catch(XN)}:Xd;function XN(t){setTimeout(function(){throw t})}function ed(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),eo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);eo(e)}function Fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Ki,io="__reactProps$"+Ki,cr="__reactContainer$"+Ki,Zd="__reactEvents$"+Ki,ZN="__reactListeners$"+Ki,e_="__reactHandles$"+Ki;function bs(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cr]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rx(t);t!==null;){if(n=t[Mn])return n;t=rx(t)}return e}t=n,n=t.parentNode}return null}function To(t){return t=t[Mn]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function li(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Wc(t){return t[io]||null}var eh=[],ci=-1;function is(t){return{current:t}}function Le(t){0>ci||(t.current=eh[ci],eh[ci]=null,ci--)}function Re(t,e){ci++,eh[ci]=t.current,t.current=e}var Qr={},St=is(Qr),Ht=is(!1),Ss=Qr;function Ai(t,e){var n=t.type.contextTypes;if(!n)return Qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Wt(t){return t=t.childContextTypes,t!=null}function Xl(){Le(Ht),Le(St)}function sx(t,e,n){if(St.current!==Qr)throw Error(W(168));Re(St,e),Re(Ht,n)}function L0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,M1(t)||"Unknown",s));return Be({},n,r)}function Zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,Ss=St.current,Re(St,t),Re(Ht,Ht.current),!0}function ix(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=L0(t,e,Ss),r.__reactInternalMemoizedMergedChildContext=t,Le(Ht),Le(St),Re(St,t)):Le(Ht),Re(Ht,n)}var er=null,qc=!1,td=!1;function V0(t){er===null?er=[t]:er.push(t)}function t_(t){qc=!0,V0(t)}function as(){if(!td&&er!==null){td=!0;var t=0,e=Se;try{var n=er;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}er=null,qc=!1}catch(s){throw er!==null&&(er=er.slice(t+1)),l0(af,as),s}finally{Se=e,td=!1}}return null}var ui=[],di=0,ec=null,tc=0,cn=[],un=0,Is=null,tr=1,nr="";function ps(t,e){ui[di++]=tc,ui[di++]=ec,ec=t,tc=e}function M0(t,e,n){cn[un++]=tr,cn[un++]=nr,cn[un++]=Is,Is=t;var r=tr;t=nr;var s=32-Tn(r)-1;r&=~(1<<s),n+=1;var a=32-Tn(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,tr=1<<32-Tn(e)+s|n<<s|r,nr=a+t}else tr=1<<a|n<<s|r,nr=t}function mf(t){t.return!==null&&(ps(t,1),M0(t,1,0))}function xf(t){for(;t===ec;)ec=ui[--di],ui[di]=null,tc=ui[--di],ui[di]=null;for(;t===Is;)Is=cn[--un],cn[un]=null,nr=cn[--un],cn[un]=null,tr=cn[--un],cn[un]=null}var nn=null,tn=null,Me=!1,kn=null;function z0(t,e){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ax(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,tn=Fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Is!==null?{id:tr,overflow:nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nn=t,tn=null,!0):!1;default:return!1}}function th(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nh(t){if(Me){var e=tn;if(e){var n=e;if(!ax(t,e)){if(th(t))throw Error(W(418));e=Fr(n.nextSibling);var r=nn;e&&ax(t,e)?z0(r,n):(t.flags=t.flags&-4097|2,Me=!1,nn=t)}}else{if(th(t))throw Error(W(418));t.flags=t.flags&-4097|2,Me=!1,nn=t}}}function ox(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function al(t){if(t!==nn)return!1;if(!Me)return ox(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jd(t.type,t.memoizedProps)),e&&(e=tn)){if(th(t))throw F0(),Error(W(418));for(;e;)z0(t,e),e=Fr(e.nextSibling)}if(ox(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tn=Fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tn=null}}else tn=nn?Fr(t.stateNode.nextSibling):null;return!0}function F0(){for(var t=tn;t;)t=Fr(t.nextSibling)}function Ri(){tn=nn=null,Me=!1}function gf(t){kn===null?kn=[t]:kn.push(t)}var n_=gr.ReactCurrentBatchConfig;function va(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=s.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function ol(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lx(t){var e=t._init;return e(t._payload)}function U0(t){function e(N,v){if(t){var j=N.deletions;j===null?(N.deletions=[v],N.flags|=16):j.push(v)}}function n(N,v){if(!t)return null;for(;v!==null;)e(N,v),v=v.sibling;return null}function r(N,v){for(N=new Map;v!==null;)v.key!==null?N.set(v.key,v):N.set(v.index,v),v=v.sibling;return N}function s(N,v){return N=Hr(N,v),N.index=0,N.sibling=null,N}function a(N,v,j){return N.index=j,t?(j=N.alternate,j!==null?(j=j.index,j<v?(N.flags|=2,v):j):(N.flags|=2,v)):(N.flags|=1048576,v)}function o(N){return t&&N.alternate===null&&(N.flags|=2),N}function c(N,v,j,L){return v===null||v.tag!==6?(v=ld(j,N.mode,L),v.return=N,v):(v=s(v,j),v.return=N,v)}function u(N,v,j,L){var S=j.type;return S===si?f(N,v,j.props.children,L,j.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Er&&lx(S)===v.type)?(L=s(v,j.props),L.ref=va(N,v,j),L.return=N,L):(L=Al(j.type,j.key,j.props,null,N.mode,L),L.ref=va(N,v,j),L.return=N,L)}function d(N,v,j,L){return v===null||v.tag!==4||v.stateNode.containerInfo!==j.containerInfo||v.stateNode.implementation!==j.implementation?(v=cd(j,N.mode,L),v.return=N,v):(v=s(v,j.children||[]),v.return=N,v)}function f(N,v,j,L,S){return v===null||v.tag!==7?(v=_s(j,N.mode,L,S),v.return=N,v):(v=s(v,j),v.return=N,v)}function x(N,v,j){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ld(""+v,N.mode,j),v.return=N,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Yo:return j=Al(v.type,v.key,v.props,null,N.mode,j),j.ref=va(N,null,v),j.return=N,j;case ri:return v=cd(v,N.mode,j),v.return=N,v;case Er:var L=v._init;return x(N,L(v._payload),j)}if(ja(v)||ma(v))return v=_s(v,N.mode,j,null),v.return=N,v;ol(N,v)}return null}function b(N,v,j,L){var S=v!==null?v.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return S!==null?null:c(N,v,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Yo:return j.key===S?u(N,v,j,L):null;case ri:return j.key===S?d(N,v,j,L):null;case Er:return S=j._init,b(N,v,S(j._payload),L)}if(ja(j)||ma(j))return S!==null?null:f(N,v,j,L,null);ol(N,j)}return null}function E(N,v,j,L,S){if(typeof L=="string"&&L!==""||typeof L=="number")return N=N.get(j)||null,c(v,N,""+L,S);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Yo:return N=N.get(L.key===null?j:L.key)||null,u(v,N,L,S);case ri:return N=N.get(L.key===null?j:L.key)||null,d(v,N,L,S);case Er:var T=L._init;return E(N,v,j,T(L._payload),S)}if(ja(L)||ma(L))return N=N.get(j)||null,f(v,N,L,S,null);ol(v,L)}return null}function I(N,v,j,L){for(var S=null,T=null,g=v,p=v=0,y=null;g!==null&&p<j.length;p++){g.index>p?(y=g,g=null):y=g.sibling;var k=b(N,g,j[p],L);if(k===null){g===null&&(g=y);break}t&&g&&k.alternate===null&&e(N,g),v=a(k,v,p),T===null?S=k:T.sibling=k,T=k,g=y}if(p===j.length)return n(N,g),Me&&ps(N,p),S;if(g===null){for(;p<j.length;p++)g=x(N,j[p],L),g!==null&&(v=a(g,v,p),T===null?S=g:T.sibling=g,T=g);return Me&&ps(N,p),S}for(g=r(N,g);p<j.length;p++)y=E(g,N,p,j[p],L),y!==null&&(t&&y.alternate!==null&&g.delete(y.key===null?p:y.key),v=a(y,v,p),T===null?S=y:T.sibling=y,T=y);return t&&g.forEach(function(C){return e(N,C)}),Me&&ps(N,p),S}function A(N,v,j,L){var S=ma(j);if(typeof S!="function")throw Error(W(150));if(j=S.call(j),j==null)throw Error(W(151));for(var T=S=null,g=v,p=v=0,y=null,k=j.next();g!==null&&!k.done;p++,k=j.next()){g.index>p?(y=g,g=null):y=g.sibling;var C=b(N,g,k.value,L);if(C===null){g===null&&(g=y);break}t&&g&&C.alternate===null&&e(N,g),v=a(C,v,p),T===null?S=C:T.sibling=C,T=C,g=y}if(k.done)return n(N,g),Me&&ps(N,p),S;if(g===null){for(;!k.done;p++,k=j.next())k=x(N,k.value,L),k!==null&&(v=a(k,v,p),T===null?S=k:T.sibling=k,T=k);return Me&&ps(N,p),S}for(g=r(N,g);!k.done;p++,k=j.next())k=E(g,N,p,k.value,L),k!==null&&(t&&k.alternate!==null&&g.delete(k.key===null?p:k.key),v=a(k,v,p),T===null?S=k:T.sibling=k,T=k);return t&&g.forEach(function(R){return e(N,R)}),Me&&ps(N,p),S}function O(N,v,j,L){if(typeof j=="object"&&j!==null&&j.type===si&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Yo:e:{for(var S=j.key,T=v;T!==null;){if(T.key===S){if(S=j.type,S===si){if(T.tag===7){n(N,T.sibling),v=s(T,j.props.children),v.return=N,N=v;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Er&&lx(S)===T.type){n(N,T.sibling),v=s(T,j.props),v.ref=va(N,T,j),v.return=N,N=v;break e}n(N,T);break}else e(N,T);T=T.sibling}j.type===si?(v=_s(j.props.children,N.mode,L,j.key),v.return=N,N=v):(L=Al(j.type,j.key,j.props,null,N.mode,L),L.ref=va(N,v,j),L.return=N,N=L)}return o(N);case ri:e:{for(T=j.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===j.containerInfo&&v.stateNode.implementation===j.implementation){n(N,v.sibling),v=s(v,j.children||[]),v.return=N,N=v;break e}else{n(N,v);break}else e(N,v);v=v.sibling}v=cd(j,N.mode,L),v.return=N,N=v}return o(N);case Er:return T=j._init,O(N,v,T(j._payload),L)}if(ja(j))return I(N,v,j,L);if(ma(j))return A(N,v,j,L);ol(N,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,v!==null&&v.tag===6?(n(N,v.sibling),v=s(v,j),v.return=N,N=v):(n(N,v),v=ld(j,N.mode,L),v.return=N,N=v),o(N)):n(N,v)}return O}var Pi=U0(!0),B0=U0(!1),nc=is(null),rc=null,hi=null,bf=null;function yf(){bf=hi=rc=null}function vf(t){var e=nc.current;Le(nc),t._currentValue=e}function rh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vi(t,e){rc=t,bf=hi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function mn(t){var e=t._currentValue;if(bf!==t)if(t={context:t,memoizedValue:e,next:null},hi===null){if(rc===null)throw Error(W(308));hi=t,rc.dependencies={lanes:0,firstContext:t}}else hi=hi.next=t;return e}var ys=null;function wf(t){ys===null?ys=[t]:ys.push(t)}function $0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,wf(e)):(n.next=s.next,s.next=n),e.interleaved=n,ur(t,r)}function ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function kf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ur(t,n)}return s=r.interleaved,s===null?(e.next=e,wf(r)):(e.next=s.next,s.next=e),r.interleaved=e,ur(t,n)}function jl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,of(t,n)}}function cx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sc(t,e,n,r){var s=t.updateQueue;Tr=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(a!==null){var x=s.baseState;o=0,f=d=u=null,c=a;do{var b=c.lane,E=c.eventTime;if((r&b)===b){f!==null&&(f=f.next={eventTime:E,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var I=t,A=c;switch(b=e,E=n,A.tag){case 1:if(I=A.payload,typeof I=="function"){x=I.call(E,x,b);break e}x=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=A.payload,b=typeof I=="function"?I.call(E,x,b):I,b==null)break e;x=Be({},x,b);break e;case 2:Tr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,b=s.effects,b===null?s.effects=[c]:b.push(c))}else E={eventTime:E,lane:b,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=E,u=x):f=f.next=E,o|=b;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;b=c,c=b.next,b.next=null,s.lastBaseUpdate=b,s.shared.pending=null}}while(!0);if(f===null&&(u=x),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);As|=o,t.lanes=o,t.memoizedState=x}}function ux(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var So={},Un=is(So),ao=is(So),oo=is(So);function vs(t){if(t===So)throw Error(W(174));return t}function Nf(t,e){switch(Re(oo,e),Re(ao,t),Re(Un,So),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vd(e,t)}Le(Un),Re(Un,e)}function Oi(){Le(Un),Le(ao),Le(oo)}function W0(t){vs(oo.current);var e=vs(Un.current),n=Vd(e,t.type);e!==n&&(Re(ao,t),Re(Un,n))}function _f(t){ao.current===t&&(Le(Un),Le(ao))}var ze=is(0);function ic(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nd=[];function jf(){for(var t=0;t<nd.length;t++)nd[t]._workInProgressVersionPrimary=null;nd.length=0}var El=gr.ReactCurrentDispatcher,rd=gr.ReactCurrentBatchConfig,Cs=0,Ue=null,rt=null,dt=null,ac=!1,Va=!1,lo=0,r_=0;function kt(){throw Error(W(321))}function Ef(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!An(t[n],e[n]))return!1;return!0}function Tf(t,e,n,r,s,a){if(Cs=a,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,El.current=t===null||t.memoizedState===null?o_:l_,t=n(r,s),Va){a=0;do{if(Va=!1,lo=0,25<=a)throw Error(W(301));a+=1,dt=rt=null,e.updateQueue=null,El.current=c_,t=n(r,s)}while(Va)}if(El.current=oc,e=rt!==null&&rt.next!==null,Cs=0,dt=rt=Ue=null,ac=!1,e)throw Error(W(300));return t}function Sf(){var t=lo!==0;return lo=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ue.memoizedState=dt=t:dt=dt.next=t,dt}function xn(){if(rt===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var e=dt===null?Ue.memoizedState:dt.next;if(e!==null)dt=e,rt=t;else{if(t===null)throw Error(W(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},dt===null?Ue.memoizedState=dt=t:dt=dt.next=t}return dt}function co(t,e){return typeof e=="function"?e(t):e}function sd(t){var e=xn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=rt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var c=o=null,u=null,d=a;do{var f=d.lane;if((Cs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var x={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=x,o=r):u=u.next=x,Ue.lanes|=f,As|=f}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=c,An(r,e.memoizedState)||($t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Ue.lanes|=a,As|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function id(t){var e=xn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);An(a,e.memoizedState)||($t=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function q0(){}function G0(t,e){var n=Ue,r=xn(),s=e(),a=!An(r.memoizedState,s);if(a&&(r.memoizedState=s,$t=!0),r=r.queue,If(Y0.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,uo(9,Q0.bind(null,n,r,s,e),void 0,null),ft===null)throw Error(W(349));Cs&30||K0(n,e,s)}return s}function K0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q0(t,e,n,r){e.value=n,e.getSnapshot=r,J0(e)&&X0(t)}function Y0(t,e,n){return n(function(){J0(e)&&X0(t)})}function J0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!An(t,n)}catch{return!0}}function X0(t){var e=ur(t,1);e!==null&&Sn(e,t,1,-1)}function dx(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:t},e.queue=t,t=t.dispatch=a_.bind(null,Ue,t),[e.memoizedState,t]}function uo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Z0(){return xn().memoizedState}function Tl(t,e,n,r){var s=Ln();Ue.flags|=t,s.memoizedState=uo(1|e,n,void 0,r===void 0?null:r)}function Gc(t,e,n,r){var s=xn();r=r===void 0?null:r;var a=void 0;if(rt!==null){var o=rt.memoizedState;if(a=o.destroy,r!==null&&Ef(r,o.deps)){s.memoizedState=uo(e,n,a,r);return}}Ue.flags|=t,s.memoizedState=uo(1|e,n,a,r)}function hx(t,e){return Tl(8390656,8,t,e)}function If(t,e){return Gc(2048,8,t,e)}function ey(t,e){return Gc(4,2,t,e)}function ty(t,e){return Gc(4,4,t,e)}function ny(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ry(t,e,n){return n=n!=null?n.concat([t]):null,Gc(4,4,ny.bind(null,e,t),n)}function Cf(){}function sy(t,e){var n=xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ef(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iy(t,e){var n=xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ef(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ay(t,e,n){return Cs&21?(An(n,e)||(n=d0(),Ue.lanes|=n,As|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=n)}function s_(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=rd.transition;rd.transition={};try{t(!1),e()}finally{Se=n,rd.transition=r}}function oy(){return xn().memoizedState}function i_(t,e,n){var r=$r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ly(t))cy(e,n);else if(n=$0(t,e,n,r),n!==null){var s=Dt();Sn(n,t,r,s),uy(n,e,r)}}function a_(t,e,n){var r=$r(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ly(t))cy(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(s.hasEagerState=!0,s.eagerState=c,An(c,o)){var u=e.interleaved;u===null?(s.next=s,wf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=$0(t,e,s,r),n!==null&&(s=Dt(),Sn(n,t,r,s),uy(n,e,r))}}function ly(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function cy(t,e){Va=ac=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,of(t,n)}}var oc={readContext:mn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},o_={readContext:mn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:mn,useEffect:hx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tl(4194308,4,ny.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tl(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=i_.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:dx,useDebugValue:Cf,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=dx(!1),e=t[0];return t=s_.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,s=Ln();if(Me){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),ft===null)throw Error(W(349));Cs&30||K0(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,hx(Y0.bind(null,r,a,t),[t]),r.flags|=2048,uo(9,Q0.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Ln(),e=ft.identifierPrefix;if(Me){var n=nr,r=tr;n=(r&~(1<<32-Tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=lo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=r_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},l_={readContext:mn,useCallback:sy,useContext:mn,useEffect:If,useImperativeHandle:ry,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:iy,useReducer:sd,useRef:Z0,useState:function(){return sd(co)},useDebugValue:Cf,useDeferredValue:function(t){var e=xn();return ay(e,rt.memoizedState,t)},useTransition:function(){var t=sd(co)[0],e=xn().memoizedState;return[t,e]},useMutableSource:q0,useSyncExternalStore:G0,useId:oy,unstable_isNewReconciler:!1},c_={readContext:mn,useCallback:sy,useContext:mn,useEffect:If,useImperativeHandle:ry,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:iy,useReducer:id,useRef:Z0,useState:function(){return id(co)},useDebugValue:Cf,useDeferredValue:function(t){var e=xn();return rt===null?e.memoizedState=t:ay(e,rt.memoizedState,t)},useTransition:function(){var t=id(co)[0],e=xn().memoizedState;return[t,e]},useMutableSource:q0,useSyncExternalStore:G0,useId:oy,unstable_isNewReconciler:!1};function vn(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kc={isMounted:function(t){return(t=t._reactInternals)?Fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=$r(t),a=ir(r,s);a.payload=e,n!=null&&(a.callback=n),e=Ur(t,a,s),e!==null&&(Sn(e,t,s,r),jl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=$r(t),a=ir(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ur(t,a,s),e!==null&&(Sn(e,t,s,r),jl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=$r(t),s=ir(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ur(t,s,r),e!==null&&(Sn(e,t,r,n),jl(e,t,r))}};function fx(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!no(n,r)||!no(s,a):!0}function dy(t,e,n){var r=!1,s=Qr,a=e.contextType;return typeof a=="object"&&a!==null?a=mn(a):(s=Wt(e)?Ss:St.current,r=e.contextTypes,a=(r=r!=null)?Ai(t,s):Qr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function px(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kc.enqueueReplaceState(e,e.state,null)}function ih(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},kf(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=mn(a):(a=Wt(e)?Ss:St.current,s.context=Ai(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(sh(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Kc.enqueueReplaceState(s,s.state,null),sc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Di(t,e){try{var n="",r=e;do n+=V1(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function ad(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ah(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var u_=typeof WeakMap=="function"?WeakMap:Map;function hy(t,e,n){n=ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cc||(cc=!0,xh=r),ah(t,e)},n}function fy(t,e,n){n=ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ah(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){ah(t,e),typeof r!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new u_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=__.bind(null,t,e,n),e.then(t,t))}function xx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ir(-1,1),e.tag=2,Ur(n,e,1))),n.lanes|=1),t)}var d_=gr.ReactCurrentOwner,$t=!1;function Rt(t,e,n,r){e.child=t===null?B0(e,null,n,r):Pi(e,t.child,n,r)}function bx(t,e,n,r,s){n=n.render;var a=e.ref;return vi(e,s),r=Tf(t,e,n,r,a,s),n=Sf(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,dr(t,e,s)):(Me&&n&&mf(e),e.flags|=1,Rt(t,e,r,s),e.child)}function yx(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Mf(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,py(t,e,a,r,s)):(t=Al(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:no,n(o,r)&&t.ref===e.ref)return dr(t,e,s)}return e.flags|=1,t=Hr(a,r),t.ref=e.ref,t.return=e,e.child=t}function py(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(no(a,r)&&t.ref===e.ref)if($t=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,dr(t,e,s)}return oh(t,e,n,r,s)}function my(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(pi,en),en|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(pi,en),en|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Re(pi,en),en|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Re(pi,en),en|=r;return Rt(t,e,s,n),e.child}function xy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oh(t,e,n,r,s){var a=Wt(n)?Ss:St.current;return a=Ai(e,a),vi(e,s),n=Tf(t,e,n,r,a,s),r=Sf(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,dr(t,e,s)):(Me&&r&&mf(e),e.flags|=1,Rt(t,e,n,s),e.child)}function vx(t,e,n,r,s){if(Wt(n)){var a=!0;Zl(e)}else a=!1;if(vi(e,s),e.stateNode===null)Sl(t,e),dy(e,n,r),ih(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=mn(d):(d=Wt(n)?Ss:St.current,d=Ai(e,d));var f=n.getDerivedStateFromProps,x=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";x||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&px(e,o,r,d),Tr=!1;var b=e.memoizedState;o.state=b,sc(e,r,o,s),u=e.memoizedState,c!==r||b!==u||Ht.current||Tr?(typeof f=="function"&&(sh(e,n,f,r),u=e.memoizedState),(c=Tr||fx(e,n,c,r,b,u,d))?(x||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,H0(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:vn(e.type,c),o.props=d,x=e.pendingProps,b=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=mn(u):(u=Wt(n)?Ss:St.current,u=Ai(e,u));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==x||b!==u)&&px(e,o,r,u),Tr=!1,b=e.memoizedState,o.state=b,sc(e,r,o,s);var I=e.memoizedState;c!==x||b!==I||Ht.current||Tr?(typeof E=="function"&&(sh(e,n,E,r),I=e.memoizedState),(d=Tr||fx(e,n,d,r,b,I,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),r=!1)}return lh(t,e,n,r,a,s)}function lh(t,e,n,r,s,a){xy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ix(e,n,!1),dr(t,e,a);r=e.stateNode,d_.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Pi(e,t.child,null,a),e.child=Pi(e,null,c,a)):Rt(t,e,c,a),e.memoizedState=r.state,s&&ix(e,n,!0),e.child}function gy(t){var e=t.stateNode;e.pendingContext?sx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sx(t,e.context,!1),Nf(t,e.containerInfo)}function wx(t,e,n,r,s){return Ri(),gf(s),e.flags|=256,Rt(t,e,n,r),e.child}var ch={dehydrated:null,treeContext:null,retryLane:0};function uh(t){return{baseLanes:t,cachePool:null,transitions:null}}function by(t,e,n){var r=e.pendingProps,s=ze.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Re(ze,s&1),t===null)return nh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Jc(o,r,0,null),t=_s(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=uh(n),e.memoizedState=ch,t):Af(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return h_(t,e,o,r,c,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Hr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?a=Hr(c,a):(a=_s(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?uh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=ch,r}return a=t.child,t=a.sibling,r=Hr(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Af(t,e){return e=Jc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ll(t,e,n,r){return r!==null&&gf(r),Pi(e,t.child,null,n),t=Af(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function h_(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=ad(Error(W(422))),ll(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Jc({mode:"visible",children:r.children},s,0,null),a=_s(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Pi(e,t.child,null,o),e.child.memoizedState=uh(o),e.memoizedState=ch,a);if(!(e.mode&1))return ll(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(W(419)),r=ad(a,r,void 0),ll(t,e,o,r)}if(c=(o&t.childLanes)!==0,$t||c){if(r=ft,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ur(t,s),Sn(r,t,s,-1))}return Vf(),r=ad(Error(W(421))),ll(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=j_.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,tn=Fr(s.nextSibling),nn=e,Me=!0,kn=null,t!==null&&(cn[un++]=tr,cn[un++]=nr,cn[un++]=Is,tr=t.id,nr=t.overflow,Is=e),e=Af(e,r.children),e.flags|=4096,e)}function kx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rh(t.return,e,n)}function od(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function yy(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Rt(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kx(t,n,e);else if(t.tag===19)kx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ic(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),od(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ic(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}od(e,!0,n,null,a);break;case"together":od(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),As|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function f_(t,e,n){switch(e.tag){case 3:gy(e),Ri();break;case 5:W0(e);break;case 1:Wt(e.type)&&Zl(e);break;case 4:Nf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Re(nc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?by(t,e,n):(Re(ze,ze.current&1),t=dr(t,e,n),t!==null?t.sibling:null);Re(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return yy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,my(t,e,n)}return dr(t,e,n)}var vy,dh,wy,ky;vy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dh=function(){};wy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,vs(Un.current);var a=null;switch(n){case"input":s=Pd(t,s),r=Pd(t,r),a=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),a=[];break;case"textarea":s=Ld(t,s),r=Ld(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jl)}Md(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Qa.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Qa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Oe("scroll",t),a||c===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};ky=function(t,e,n,r){n!==r&&(e.flags|=4)};function wa(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function p_(t,e,n){var r=e.pendingProps;switch(xf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return Wt(e.type)&&Xl(),Nt(e),null;case 3:return r=e.stateNode,Oi(),Le(Ht),Le(St),jf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(al(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(yh(kn),kn=null))),dh(t,e),Nt(e),null;case 5:_f(e);var s=vs(oo.current);if(n=e.type,t!==null&&e.stateNode!=null)wy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Nt(e),null}if(t=vs(Un.current),al(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Mn]=e,r[io]=a,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(s=0;s<Ta.length;s++)Oe(Ta[s],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Am(r,a),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Oe("invalid",r);break;case"textarea":Pm(r,a),Oe("invalid",r)}Md(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&il(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&il(r.textContent,c,t),s=["children",""+c]):Qa.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Oe("scroll",r)}switch(n){case"input":Jo(r),Rm(r,a,!0);break;case"textarea":Jo(r),Om(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Jl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[io]=r,vy(t,e,!1,!1),e.stateNode=t;e:{switch(o=zd(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),s=r;break;case"iframe":case"object":case"embed":Oe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ta.length;s++)Oe(Ta[s],t);s=r;break;case"source":Oe("error",t),s=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),s=r;break;case"details":Oe("toggle",t),s=r;break;case"input":Am(t,r),s=Pd(t,r),Oe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":Pm(t,r),s=Ld(t,r),Oe("invalid",t);break;default:s=r}Md(n,s),c=s;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?Zb(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Jb(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ya(t,u):typeof u=="number"&&Ya(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Qa.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Oe("scroll",t):u!=null&&ef(t,a,u,o))}switch(n){case"input":Jo(t),Rm(t,r,!1);break;case"textarea":Jo(t),Om(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kr(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?xi(t,!!r.multiple,a,!1):r.defaultValue!=null&&xi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)ky(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=vs(oo.current),vs(Un.current),al(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(a=r.nodeValue!==n)&&(t=nn,t!==null))switch(t.tag){case 3:il(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&il(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return Nt(e),null;case 13:if(Le(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&tn!==null&&e.mode&1&&!(e.flags&128))F0(),Ri(),e.flags|=98560,a=!1;else if(a=al(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(W(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(W(317));a[Mn]=e}else Ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),a=!1}else kn!==null&&(yh(kn),kn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?it===0&&(it=3):Vf())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return Oi(),dh(t,e),t===null&&ro(e.stateNode.containerInfo),Nt(e),null;case 10:return vf(e.type._context),Nt(e),null;case 17:return Wt(e.type)&&Xl(),Nt(e),null;case 19:if(Le(ze),a=e.memoizedState,a===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)wa(a,!1);else{if(it!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ic(t),o!==null){for(e.flags|=128,wa(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(ze,ze.current&1|2),e.child}t=t.sibling}a.tail!==null&&Qe()>Li&&(e.flags|=128,r=!0,wa(a,!1),e.lanes=4194304)}else{if(!r)if(t=ic(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Me)return Nt(e),null}else 2*Qe()-a.renderingStartTime>Li&&n!==1073741824&&(e.flags|=128,r=!0,wa(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Qe(),e.sibling=null,n=ze.current,Re(ze,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return Lf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?en&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function m_(t,e){switch(xf(e),e.tag){case 1:return Wt(e.type)&&Xl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oi(),Le(Ht),Le(St),jf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _f(e),null;case 13:if(Le(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(ze),null;case 4:return Oi(),null;case 10:return vf(e.type._context),null;case 22:case 23:return Lf(),null;case 24:return null;default:return null}}var cl=!1,Et=!1,x_=typeof WeakSet=="function"?WeakSet:Set,te=null;function fi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(t,e,r)}else n.current=null}function hh(t,e,n){try{n()}catch(r){qe(t,e,r)}}var Nx=!1;function g_(t,e){if(Qd=Kl,t=T0(),pf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,x=t,b=null;t:for(;;){for(var E;x!==n||s!==0&&x.nodeType!==3||(c=o+s),x!==a||r!==0&&x.nodeType!==3||(u=o+r),x.nodeType===3&&(o+=x.nodeValue.length),(E=x.firstChild)!==null;)b=x,x=E;for(;;){if(x===t)break t;if(b===n&&++d===s&&(c=o),b===a&&++f===r&&(u=o),(E=x.nextSibling)!==null)break;x=b,b=x.parentNode}x=E}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yd={focusedElem:t,selectionRange:n},Kl=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var A=I.memoizedProps,O=I.memoizedState,N=e.stateNode,v=N.getSnapshotBeforeUpdate(e.elementType===e.type?A:vn(e.type,A),O);N.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(L){qe(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return I=Nx,Nx=!1,I}function Ma(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&hh(e,n,a)}s=s.next}while(s!==r)}}function Qc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ny(t){var e=t.alternate;e!==null&&(t.alternate=null,Ny(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[io],delete e[Zd],delete e[ZN],delete e[e_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _y(t){return t.tag===5||t.tag===3||t.tag===4}function _x(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_y(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ph(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jl));else if(r!==4&&(t=t.child,t!==null))for(ph(t,e,n),t=t.sibling;t!==null;)ph(t,e,n),t=t.sibling}function mh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mh(t,e,n),t=t.sibling;t!==null;)mh(t,e,n),t=t.sibling}var pt=null,wn=!1;function _r(t,e,n){for(n=n.child;n!==null;)jy(t,e,n),n=n.sibling}function jy(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Uc,n)}catch{}switch(n.tag){case 5:Et||fi(n,e);case 6:var r=pt,s=wn;pt=null,_r(t,e,n),pt=r,wn=s,pt!==null&&(wn?(t=pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(wn?(t=pt,n=n.stateNode,t.nodeType===8?ed(t.parentNode,n):t.nodeType===1&&ed(t,n),eo(t)):ed(pt,n.stateNode));break;case 4:r=pt,s=wn,pt=n.stateNode.containerInfo,wn=!0,_r(t,e,n),pt=r,wn=s;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&hh(n,e,o),s=s.next}while(s!==r)}_r(t,e,n);break;case 1:if(!Et&&(fi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){qe(n,e,c)}_r(t,e,n);break;case 21:_r(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,_r(t,e,n),Et=r):_r(t,e,n);break;default:_r(t,e,n)}}function jx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new x_),e.forEach(function(r){var s=E_.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:pt=c.stateNode,wn=!1;break e;case 3:pt=c.stateNode.containerInfo,wn=!0;break e;case 4:pt=c.stateNode.containerInfo,wn=!0;break e}c=c.return}if(pt===null)throw Error(W(160));jy(a,o,s),pt=null,wn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){qe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ey(e,t),e=e.sibling}function Ey(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(e,t),Dn(t),r&4){try{Ma(3,t,t.return),Qc(3,t)}catch(A){qe(t,t.return,A)}try{Ma(5,t,t.return)}catch(A){qe(t,t.return,A)}}break;case 1:yn(e,t),Dn(t),r&512&&n!==null&&fi(n,n.return);break;case 5:if(yn(e,t),Dn(t),r&512&&n!==null&&fi(n,n.return),t.flags&32){var s=t.stateNode;try{Ya(s,"")}catch(A){qe(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Kb(s,a),zd(c,o);var d=zd(c,a);for(o=0;o<u.length;o+=2){var f=u[o],x=u[o+1];f==="style"?Zb(s,x):f==="dangerouslySetInnerHTML"?Jb(s,x):f==="children"?Ya(s,x):ef(s,f,x,d)}switch(c){case"input":Od(s,a);break;case"textarea":Qb(s,a);break;case"select":var b=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var E=a.value;E!=null?xi(s,!!a.multiple,E,!1):b!==!!a.multiple&&(a.defaultValue!=null?xi(s,!!a.multiple,a.defaultValue,!0):xi(s,!!a.multiple,a.multiple?[]:"",!1))}s[io]=a}catch(A){qe(t,t.return,A)}}break;case 6:if(yn(e,t),Dn(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(A){qe(t,t.return,A)}}break;case 3:if(yn(e,t),Dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{eo(e.containerInfo)}catch(A){qe(t,t.return,A)}break;case 4:yn(e,t),Dn(t);break;case 13:yn(e,t),Dn(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Of=Qe())),r&4&&jx(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(d=Et)||f,yn(e,t),Et=d):yn(e,t),Dn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(te=t,f=t.child;f!==null;){for(x=te=f;te!==null;){switch(b=te,E=b.child,b.tag){case 0:case 11:case 14:case 15:Ma(4,b,b.return);break;case 1:fi(b,b.return);var I=b.stateNode;if(typeof I.componentWillUnmount=="function"){r=b,n=b.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(A){qe(r,n,A)}}break;case 5:fi(b,b.return);break;case 22:if(b.memoizedState!==null){Tx(x);continue}}E!==null?(E.return=b,te=E):Tx(x)}f=f.sibling}e:for(f=null,x=t;;){if(x.tag===5){if(f===null){f=x;try{s=x.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=x.stateNode,u=x.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Xb("display",o))}catch(A){qe(t,t.return,A)}}}else if(x.tag===6){if(f===null)try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(A){qe(t,t.return,A)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;f===x&&(f=null),x=x.return}f===x&&(f=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:yn(e,t),Dn(t),r&4&&jx(t);break;case 21:break;default:yn(e,t),Dn(t)}}function Dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_y(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ya(s,""),r.flags&=-33);var a=_x(t);mh(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=_x(t);ph(t,c,o);break;default:throw Error(W(161))}}catch(u){qe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b_(t,e,n){te=t,Ty(t)}function Ty(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var s=te,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||cl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Et;c=cl;var d=Et;if(cl=o,(Et=u)&&!d)for(te=s;te!==null;)o=te,u=o.child,o.tag===22&&o.memoizedState!==null?Sx(s):u!==null?(u.return=o,te=u):Sx(s);for(;a!==null;)te=a,Ty(a),a=a.sibling;te=s,cl=c,Et=d}Ex(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,te=a):Ex(t)}}function Ex(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||Qc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:vn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&ux(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ux(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var x=f.dehydrated;x!==null&&eo(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Et||e.flags&512&&fh(e)}catch(b){qe(e,e.return,b)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function Tx(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function Sx(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qc(4,e)}catch(u){qe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){qe(e,s,u)}}var a=e.return;try{fh(e)}catch(u){qe(e,a,u)}break;case 5:var o=e.return;try{fh(e)}catch(u){qe(e,o,u)}}}catch(u){qe(e,e.return,u)}if(e===t){te=null;break}var c=e.sibling;if(c!==null){c.return=e.return,te=c;break}te=e.return}}var y_=Math.ceil,lc=gr.ReactCurrentDispatcher,Rf=gr.ReactCurrentOwner,pn=gr.ReactCurrentBatchConfig,Ee=0,ft=null,Je=null,gt=0,en=0,pi=is(0),it=0,ho=null,As=0,Yc=0,Pf=0,za=null,Ut=null,Of=0,Li=1/0,Zn=null,cc=!1,xh=null,Br=null,ul=!1,Dr=null,uc=0,Fa=0,gh=null,Il=-1,Cl=0;function Dt(){return Ee&6?Qe():Il!==-1?Il:Il=Qe()}function $r(t){return t.mode&1?Ee&2&&gt!==0?gt&-gt:n_.transition!==null?(Cl===0&&(Cl=d0()),Cl):(t=Se,t!==0||(t=window.event,t=t===void 0?16:b0(t.type)),t):1}function Sn(t,e,n,r){if(50<Fa)throw Fa=0,gh=null,Error(W(185));jo(t,n,r),(!(Ee&2)||t!==ft)&&(t===ft&&(!(Ee&2)&&(Yc|=n),it===4&&Ir(t,gt)),qt(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Li=Qe()+500,qc&&as()))}function qt(t,e){var n=t.callbackNode;nN(t,e);var r=Gl(t,t===ft?gt:0);if(r===0)n!==null&&Vm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vm(n),e===1)t.tag===0?t_(Ix.bind(null,t)):V0(Ix.bind(null,t)),JN(function(){!(Ee&6)&&as()}),n=null;else{switch(h0(r)){case 1:n=af;break;case 4:n=c0;break;case 16:n=ql;break;case 536870912:n=u0;break;default:n=ql}n=Dy(n,Sy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Sy(t,e){if(Il=-1,Cl=0,Ee&6)throw Error(W(327));var n=t.callbackNode;if(wi()&&t.callbackNode!==n)return null;var r=Gl(t,t===ft?gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dc(t,r);else{e=r;var s=Ee;Ee|=2;var a=Cy();(ft!==t||gt!==e)&&(Zn=null,Li=Qe()+500,Ns(t,e));do try{k_();break}catch(c){Iy(t,c)}while(!0);yf(),lc.current=a,Ee=s,Je!==null?e=0:(ft=null,gt=0,e=it)}if(e!==0){if(e===2&&(s=Hd(t),s!==0&&(r=s,e=bh(t,s))),e===1)throw n=ho,Ns(t,0),Ir(t,r),qt(t,Qe()),n;if(e===6)Ir(t,r);else{if(s=t.current.alternate,!(r&30)&&!v_(s)&&(e=dc(t,r),e===2&&(a=Hd(t),a!==0&&(r=a,e=bh(t,a))),e===1))throw n=ho,Ns(t,0),Ir(t,r),qt(t,Qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:ms(t,Ut,Zn);break;case 3:if(Ir(t,r),(r&130023424)===r&&(e=Of+500-Qe(),10<e)){if(Gl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xd(ms.bind(null,t,Ut,Zn),e);break}ms(t,Ut,Zn);break;case 4:if(Ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Tn(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*y_(r/1960))-r,10<r){t.timeoutHandle=Xd(ms.bind(null,t,Ut,Zn),r);break}ms(t,Ut,Zn);break;case 5:ms(t,Ut,Zn);break;default:throw Error(W(329))}}}return qt(t,Qe()),t.callbackNode===n?Sy.bind(null,t):null}function bh(t,e){var n=za;return t.current.memoizedState.isDehydrated&&(Ns(t,e).flags|=256),t=dc(t,e),t!==2&&(e=Ut,Ut=n,e!==null&&yh(e)),t}function yh(t){Ut===null?Ut=t:Ut.push.apply(Ut,t)}function v_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!An(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ir(t,e){for(e&=~Pf,e&=~Yc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tn(e),r=1<<n;t[n]=-1,e&=~r}}function Ix(t){if(Ee&6)throw Error(W(327));wi();var e=Gl(t,0);if(!(e&1))return qt(t,Qe()),null;var n=dc(t,e);if(t.tag!==0&&n===2){var r=Hd(t);r!==0&&(e=r,n=bh(t,r))}if(n===1)throw n=ho,Ns(t,0),Ir(t,e),qt(t,Qe()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ms(t,Ut,Zn),qt(t,Qe()),null}function Df(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Li=Qe()+500,qc&&as())}}function Rs(t){Dr!==null&&Dr.tag===0&&!(Ee&6)&&wi();var e=Ee;Ee|=1;var n=pn.transition,r=Se;try{if(pn.transition=null,Se=1,t)return t()}finally{Se=r,pn.transition=n,Ee=e,!(Ee&6)&&as()}}function Lf(){en=pi.current,Le(pi)}function Ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YN(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(xf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xl();break;case 3:Oi(),Le(Ht),Le(St),jf();break;case 5:_f(r);break;case 4:Oi();break;case 13:Le(ze);break;case 19:Le(ze);break;case 10:vf(r.type._context);break;case 22:case 23:Lf()}n=n.return}if(ft=t,Je=t=Hr(t.current,null),gt=en=e,it=0,ho=null,Pf=Yc=As=0,Ut=za=null,ys!==null){for(e=0;e<ys.length;e++)if(n=ys[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}ys=null}return t}function Iy(t,e){do{var n=Je;try{if(yf(),El.current=oc,ac){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ac=!1}if(Cs=0,dt=rt=Ue=null,Va=!1,lo=0,Rf.current=null,n===null||n.return===null){it=1,ho=e,Je=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=gt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,x=f.tag;if(!(f.mode&1)&&(x===0||x===11||x===15)){var b=f.alternate;b?(f.updateQueue=b.updateQueue,f.memoizedState=b.memoizedState,f.lanes=b.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=xx(o);if(E!==null){E.flags&=-257,gx(E,o,c,a,e),E.mode&1&&mx(a,d,e),e=E,u=d;var I=e.updateQueue;if(I===null){var A=new Set;A.add(u),e.updateQueue=A}else I.add(u);break e}else{if(!(e&1)){mx(a,d,e),Vf();break e}u=Error(W(426))}}else if(Me&&c.mode&1){var O=xx(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),gx(O,o,c,a,e),gf(Di(u,c));break e}}a=u=Di(u,c),it!==4&&(it=2),za===null?za=[a]:za.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var N=hy(a,u,e);cx(a,N);break e;case 1:c=u;var v=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Br===null||!Br.has(j)))){a.flags|=65536,e&=-e,a.lanes|=e;var L=fy(a,c,e);cx(a,L);break e}}a=a.return}while(a!==null)}Ry(n)}catch(S){e=S,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function Cy(){var t=lc.current;return lc.current=oc,t===null?oc:t}function Vf(){(it===0||it===3||it===2)&&(it=4),ft===null||!(As&268435455)&&!(Yc&268435455)||Ir(ft,gt)}function dc(t,e){var n=Ee;Ee|=2;var r=Cy();(ft!==t||gt!==e)&&(Zn=null,Ns(t,e));do try{w_();break}catch(s){Iy(t,s)}while(!0);if(yf(),Ee=n,lc.current=r,Je!==null)throw Error(W(261));return ft=null,gt=0,it}function w_(){for(;Je!==null;)Ay(Je)}function k_(){for(;Je!==null&&!G1();)Ay(Je)}function Ay(t){var e=Oy(t.alternate,t,en);t.memoizedProps=t.pendingProps,e===null?Ry(t):Je=e,Rf.current=null}function Ry(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=m_(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,Je=null;return}}else if(n=p_(n,e,en),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);it===0&&(it=5)}function ms(t,e,n){var r=Se,s=pn.transition;try{pn.transition=null,Se=1,N_(t,e,n,r)}finally{pn.transition=s,Se=r}return null}function N_(t,e,n,r){do wi();while(Dr!==null);if(Ee&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(rN(t,a),t===ft&&(Je=ft=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ul||(ul=!0,Dy(ql,function(){return wi(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=pn.transition,pn.transition=null;var o=Se;Se=1;var c=Ee;Ee|=4,Rf.current=null,g_(t,n),Ey(n,t),$N(Yd),Kl=!!Qd,Yd=Qd=null,t.current=n,b_(n),K1(),Ee=c,Se=o,pn.transition=a}else t.current=n;if(ul&&(ul=!1,Dr=t,uc=s),a=t.pendingLanes,a===0&&(Br=null),J1(n.stateNode),qt(t,Qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(cc)throw cc=!1,t=xh,xh=null,t;return uc&1&&t.tag!==0&&wi(),a=t.pendingLanes,a&1?t===gh?Fa++:(Fa=0,gh=t):Fa=0,as(),null}function wi(){if(Dr!==null){var t=h0(uc),e=pn.transition,n=Se;try{if(pn.transition=null,Se=16>t?16:t,Dr===null)var r=!1;else{if(t=Dr,Dr=null,uc=0,Ee&6)throw Error(W(331));var s=Ee;for(Ee|=4,te=t.current;te!==null;){var a=te,o=a.child;if(te.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(te=d;te!==null;){var f=te;switch(f.tag){case 0:case 11:case 15:Ma(8,f,a)}var x=f.child;if(x!==null)x.return=f,te=x;else for(;te!==null;){f=te;var b=f.sibling,E=f.return;if(Ny(f),f===d){te=null;break}if(b!==null){b.return=E,te=b;break}te=E}}}var I=a.alternate;if(I!==null){var A=I.child;if(A!==null){I.child=null;do{var O=A.sibling;A.sibling=null,A=O}while(A!==null)}}te=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,te=o;else e:for(;te!==null;){if(a=te,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ma(9,a,a.return)}var N=a.sibling;if(N!==null){N.return=a.return,te=N;break e}te=a.return}}var v=t.current;for(te=v;te!==null;){o=te;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,te=j;else e:for(o=v;te!==null;){if(c=te,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Qc(9,c)}}catch(S){qe(c,c.return,S)}if(c===o){te=null;break e}var L=c.sibling;if(L!==null){L.return=c.return,te=L;break e}te=c.return}}if(Ee=s,as(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Uc,t)}catch{}r=!0}return r}finally{Se=n,pn.transition=e}}return!1}function Cx(t,e,n){e=Di(n,e),e=hy(t,e,1),t=Ur(t,e,1),e=Dt(),t!==null&&(jo(t,1,e),qt(t,e))}function qe(t,e,n){if(t.tag===3)Cx(t,t,n);else for(;e!==null;){if(e.tag===3){Cx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Br===null||!Br.has(r))){t=Di(n,t),t=fy(e,t,1),e=Ur(e,t,1),t=Dt(),e!==null&&(jo(e,1,t),qt(e,t));break}}e=e.return}}function __(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(gt&n)===n&&(it===4||it===3&&(gt&130023424)===gt&&500>Qe()-Of?Ns(t,0):Pf|=n),qt(t,e)}function Py(t,e){e===0&&(t.mode&1?(e=el,el<<=1,!(el&130023424)&&(el=4194304)):e=1);var n=Dt();t=ur(t,e),t!==null&&(jo(t,e,n),qt(t,n))}function j_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Py(t,n)}function E_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),Py(t,n)}var Oy;Oy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)$t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $t=!1,f_(t,e,n);$t=!!(t.flags&131072)}else $t=!1,Me&&e.flags&1048576&&M0(e,tc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sl(t,e),t=e.pendingProps;var s=Ai(e,St.current);vi(e,n),s=Tf(null,e,r,t,s,n);var a=Sf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wt(r)?(a=!0,Zl(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kf(e),s.updater=Kc,e.stateNode=s,s._reactInternals=e,ih(e,r,t,n),e=lh(null,e,r,!0,a,n)):(e.tag=0,Me&&a&&mf(e),Rt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=S_(r),t=vn(r,t),s){case 0:e=oh(null,e,r,t,n);break e;case 1:e=vx(null,e,r,t,n);break e;case 11:e=bx(null,e,r,t,n);break e;case 14:e=yx(null,e,r,vn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),oh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),vx(t,e,r,s,n);case 3:e:{if(gy(e),t===null)throw Error(W(387));r=e.pendingProps,a=e.memoizedState,s=a.element,H0(t,e),sc(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Di(Error(W(423)),e),e=wx(t,e,r,n,s);break e}else if(r!==s){s=Di(Error(W(424)),e),e=wx(t,e,r,n,s);break e}else for(tn=Fr(e.stateNode.containerInfo.firstChild),nn=e,Me=!0,kn=null,n=B0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ri(),r===s){e=dr(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return W0(e),t===null&&nh(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Jd(r,s)?o=null:a!==null&&Jd(r,a)&&(e.flags|=32),xy(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&nh(e),null;case 13:return by(t,e,n);case 4:return Nf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pi(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),bx(t,e,r,s,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Re(nc,r._currentValue),r._currentValue=o,a!==null)if(An(a.value,o)){if(a.children===s.children&&!Ht.current){e=dr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=ir(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),rh(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(W(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),rh(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Rt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,vi(e,n),s=mn(s),r=r(s),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,s=vn(r,e.pendingProps),s=vn(r.type,s),yx(t,e,r,s,n);case 15:return py(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vn(r,s),Sl(t,e),e.tag=1,Wt(r)?(t=!0,Zl(e)):t=!1,vi(e,n),dy(e,r,s),ih(e,r,s,n),lh(null,e,r,!0,t,n);case 19:return yy(t,e,n);case 22:return my(t,e,n)}throw Error(W(156,e.tag))};function Dy(t,e){return l0(t,e)}function T_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,r){return new T_(t,e,n,r)}function Mf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function S_(t){if(typeof t=="function")return Mf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nf)return 11;if(t===rf)return 14}return 2}function Hr(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Al(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Mf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case si:return _s(n.children,s,a,e);case tf:o=8,s|=8;break;case Id:return t=fn(12,n,e,s|2),t.elementType=Id,t.lanes=a,t;case Cd:return t=fn(13,n,e,s),t.elementType=Cd,t.lanes=a,t;case Ad:return t=fn(19,n,e,s),t.elementType=Ad,t.lanes=a,t;case Wb:return Jc(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $b:o=10;break e;case Hb:o=9;break e;case nf:o=11;break e;case rf:o=14;break e;case Er:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=fn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function _s(t,e,n,r){return t=fn(7,t,r,e),t.lanes=n,t}function Jc(t,e,n,r){return t=fn(22,t,r,e),t.elementType=Wb,t.lanes=n,t.stateNode={isHidden:!1},t}function ld(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function cd(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function I_(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$u(0),this.expirationTimes=$u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$u(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zf(t,e,n,r,s,a,o,c,u){return t=new I_(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=fn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kf(a),t}function C_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ri,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ly(t){if(!t)return Qr;t=t._reactInternals;e:{if(Fs(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Wt(n))return L0(t,n,e)}return e}function Vy(t,e,n,r,s,a,o,c,u){return t=zf(n,r,!0,t,s,a,o,c,u),t.context=Ly(null),n=t.current,r=Dt(),s=$r(n),a=ir(r,s),a.callback=e??null,Ur(n,a,s),t.current.lanes=s,jo(t,s,r),qt(t,r),t}function Xc(t,e,n,r){var s=e.current,a=Dt(),o=$r(s);return n=Ly(n),e.context===null?e.context=n:e.pendingContext=n,e=ir(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ur(s,e,o),t!==null&&(Sn(t,s,o,a),jl(t,s,o)),o}function hc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ax(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ff(t,e){Ax(t,e),(t=t.alternate)&&Ax(t,e)}function A_(){return null}var My=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uf(t){this._internalRoot=t}Zc.prototype.render=Uf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Xc(t,e,null,null)};Zc.prototype.unmount=Uf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rs(function(){Xc(null,t,null,null)}),e[cr]=null}};function Zc(t){this._internalRoot=t}Zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=m0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&g0(t)}};function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function eu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rx(){}function R_(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=hc(o);a.call(d)}}var o=Vy(e,r,t,0,null,!1,!1,"",Rx);return t._reactRootContainer=o,t[cr]=o.current,ro(t.nodeType===8?t.parentNode:t),Rs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=hc(u);c.call(d)}}var u=zf(t,0,!1,null,null,!1,!1,"",Rx);return t._reactRootContainer=u,t[cr]=u.current,ro(t.nodeType===8?t.parentNode:t),Rs(function(){Xc(e,u,n,r)}),u}function tu(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var c=s;s=function(){var u=hc(o);c.call(u)}}Xc(e,o,t,s)}else o=R_(n,e,t,s,r);return hc(o)}f0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ea(e.pendingLanes);n!==0&&(of(e,n|1),qt(e,Qe()),!(Ee&6)&&(Li=Qe()+500,as()))}break;case 13:Rs(function(){var r=ur(t,1);if(r!==null){var s=Dt();Sn(r,t,1,s)}}),Ff(t,1)}};lf=function(t){if(t.tag===13){var e=ur(t,134217728);if(e!==null){var n=Dt();Sn(e,t,134217728,n)}Ff(t,134217728)}};p0=function(t){if(t.tag===13){var e=$r(t),n=ur(t,e);if(n!==null){var r=Dt();Sn(n,t,e,r)}Ff(t,e)}};m0=function(){return Se};x0=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};Ud=function(t,e,n){switch(e){case"input":if(Od(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wc(r);if(!s)throw Error(W(90));Gb(r),Od(r,s)}}}break;case"textarea":Qb(t,n);break;case"select":e=n.value,e!=null&&xi(t,!!n.multiple,e,!1)}};n0=Df;r0=Rs;var P_={usingClientEntryPoint:!1,Events:[To,li,Wc,e0,t0,Df]},ka={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O_={bundleType:ka.bundleType,version:ka.version,rendererPackageName:ka.rendererPackageName,rendererConfig:ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=a0(t),t===null?null:t.stateNode},findFiberByHostInstance:ka.findFiberByHostInstance||A_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{Uc=dl.inject(O_),Fn=dl}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P_;an.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bf(e))throw Error(W(200));return C_(t,e,null,n)};an.createRoot=function(t,e){if(!Bf(t))throw Error(W(299));var n=!1,r="",s=My;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zf(t,1,!1,null,null,n,!1,r,s),t[cr]=e.current,ro(t.nodeType===8?t.parentNode:t),new Uf(e)};an.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=a0(e),t=t===null?null:t.stateNode,t};an.flushSync=function(t){return Rs(t)};an.hydrate=function(t,e,n){if(!eu(e))throw Error(W(200));return tu(null,t,e,!0,n)};an.hydrateRoot=function(t,e,n){if(!Bf(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=My;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Vy(e,null,t,1,n??null,s,!1,a,o),t[cr]=e.current,ro(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zc(e)};an.render=function(t,e,n){if(!eu(e))throw Error(W(200));return tu(null,t,e,!1,n)};an.unmountComponentAtNode=function(t){if(!eu(t))throw Error(W(40));return t._reactRootContainer?(Rs(function(){tu(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};an.unstable_batchedUpdates=Df;an.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!eu(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return tu(t,e,n,!1,r)};an.version="18.3.1-next-f1338f8080-20240426";function zy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zy)}catch(t){console.error(t)}}zy(),zb.exports=an;var D_=zb.exports,Px=D_;Td.createRoot=Px.createRoot,Td.hydrateRoot=Px.hydrateRoot;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),me=(t,e)=>{const n=G.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:c="",children:u,...d},f)=>G.createElement("svg",{ref:f,...L_,width:s,height:s,stroke:r,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${V_(t)}`,c].join(" "),...d},[...e.map(([x,b])=>G.createElement(x,b)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=me("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=me("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=me("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=me("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=me("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=me("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=me("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=me("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=me("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=me("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=me("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=me("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=me("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=me("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=me("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=me("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=me("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=me("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=me("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=me("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=me("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=me("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=me("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=me("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=me("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=me("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=me("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),K_={lowStock:[{name:"HYDRAULIC PUMP",qty:2},{name:"THERMAL SHIELD",qty:5},{name:"CORE SENSOR",qty:1},{name:"VALVE GASKET",qty:3},{name:"POWER RELAY",qty:4}]},Dx=({masterData:t,setMasterData:e,setActivePanel:n,user:r})=>{const s=G.useMemo(()=>{const f=new Date().toLocaleDateString("en-GB"),x=(t.productions||[]).filter(S=>S.date===f).length,b=(t.productions||[]).length,E=(t.cuttingStock||[]).reduce((S,T)=>S+(Number(T.borka||0)+Number(T.hijab||0)),0),I=(t.productions||[]).filter(S=>S.type==="sewing"&&S.status==="Pending").reduce((S,T)=>S+(Number(T.issueBorka||0)+Number(T.issueHijab||0)),0),A=(t.productions||[]).filter(S=>S.type==="stone"&&S.status==="Pending").reduce((S,T)=>S+(Number(T.issueBorka||0)+Number(T.issueHijab||0)),0),O=(t.pataEntries||[]).filter(S=>S.status==="Received").reduce((S,T)=>S+Number(T.pataQty||0),0)-(t.productions||[]).filter(S=>S.type==="stone").reduce((S,T)=>S+Number(T.pataQty||0),0),N=(t.productions||[]).filter(S=>S.status==="Received").reduce((S,T)=>S+(Number(T.receivedBorka||0)+Number(T.receivedHijab||0)),0)-(t.deliveries||[]).reduce((S,T)=>S+(Number(T.borka||0)+Number(T.hijab||0)),0),v={};(t.rawInventory||[]).forEach(S=>{const T=S.color?`${S.item} (${S.color})`:S.item;v[T]||(v[T]={name:S.item,color:S.color,qty:0}),S.type==="in"?v[T].qty+=Number(S.qty):S.type==="out"&&(v[T].qty-=Number(S.qty))});const j=[...Object.values(v).filter(S=>S.qty<=5),...K_.lowStock],L=[...(t.productions||[]).map(S=>({...S,activityType:"Factory",icon:wh,color:"text-blue-500",bg:"bg-blue-50"})),...(t.cuttingStock||[]).map(S=>({...S,activityType:"Cutting",icon:Mi,color:"text-black",bg:"bg-slate-100"})),...(t.pataEntries||[]).map(S=>({...S,activityType:"Pata",icon:po,color:"text-amber-500",bg:"bg-amber-50"}))].sort((S,T)=>(T.id||0)-(S.id||0)).slice(0,15);return{productionToday:x,totalProduction:b,activeCutting:E,sewingWIP:I,stoneWIP:A,pataStock:O,finishedStock:N,lowStock:j,recentActivity:L}},[t]),a=(r==null?void 0:r.role)==="admin",o=(r==null?void 0:r.role)==="manager",[c,u]=Cn.useState(""),d=()=>{if(!c)return;const f={id:Date.now(),from:r.name,text:c,date:new Date().toLocaleString()};e(x=>({...x,adminNotes:[...x.adminNotes||[],f]})),u("")};return i.jsxs("div",{className:"space-y-8 pb-16 animate-fade-up px-2 italic text-black font-outfit",children:[i.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start md:items-end gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-black text-white rounded-[1.25rem] md:rounded-[1.75rem] flex items-center justify-center shadow-2xl rotate-3 hover:rotate-0 transition-all duration-700",children:i.jsx($f,{size:24,strokeWidth:3,className:"md:w-[32px] md:h-[32px] animate-pulse"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[11px] font-bold font-black text-slate-600 font-bold uppercase tracking-[0.3em] mb-1.5",children:"SYSTEM ALIVE"}),i.jsxs("h1",{className:"text-2xl md:text-5xl font-black uppercase italic tracking-tighter leading-none text-black",children:["FACTORY ",i.jsx("span",{className:"text-slate-400 font-bold",children:"LIVE"})]})]})]}),i.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 no-scrollbar w-full md:w-auto",children:[i.jsxs("div",{className:"bg-white px-6 py-4 rounded-[1.75rem] border-2 border-slate-50 shadow-xl min-w-[160px]",children:[i.jsx("p",{className:"text-[11px] font-bold font-black uppercase tracking-widest text-slate-600 font-bold mb-2 italic",children:"Output Today"}),i.jsxs("p",{className:"text-2xl font-black italic tracking-tighter text-black",children:["+",s.productionToday,i.jsx("span",{className:"text-xs font-bold ml-1 text-slate-400 font-bold",children:"PCS"})]})]}),i.jsxs("button",{onClick:()=>n("Menu"),className:"bg-black text-white px-8 py-4 rounded-[1.75rem] shadow-xl min-w-[180px] flex items-center justify-center gap-3 hover:scale-[1.02] transition-all group border-b-[6px] border-zinc-900",children:[i.jsx("div",{className:"p-2 bg-white/10 rounded-xl group-hover:rotate-12 transition-transform",children:i.jsx(gs,{size:18,strokeWidth:3})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"text-sm font-black italic leading-none uppercase",children:"Main Menu"}),i.jsx("p",{className:"text-xs font-bold font-bold font-black uppercase text-slate-600 font-bold tracking-widest mt-0.5",children:"Full System Hub"})]})]}),i.jsxs("button",{onClick:()=>n("Swing"),className:"bg-indigo-600 text-white px-8 py-4 rounded-[1.75rem] shadow-xl min-w-[180px] flex items-center justify-center gap-3 hover:scale-[1.02] transition-all group border-b-[6px] border-indigo-900",children:[i.jsx("div",{className:"p-2 bg-white/10 rounded-xl group-hover:rotate-12 transition-transform",children:i.jsx(Pt,{size:18,strokeWidth:3})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"text-sm font-black italic leading-none uppercase",children:"Issue Work"}),i.jsx("p",{className:"text-xs font-bold font-bold font-black uppercase text-indigo-200 tracking-widest mt-0.5",children:"Quick Action"})]})]})]})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[{label:"Cutting Stock",value:s.activeCutting,unit:"PCS",color:"text-black",bg:"bg-white",icon:Mi,panel:"Cutting",roles:["admin","manager"]},{label:"Swing WIP",value:s.sewingWIP,unit:"PCS",color:"text-indigo-600",bg:"bg-indigo-50/50",icon:wh,panel:"Swing",roles:["admin","manager"]},{label:"Stone WIP",value:s.stoneWIP,unit:"PCS",color:"text-amber-600",bg:"bg-amber-50/50",icon:By,panel:"Stone",roles:["admin","manager"]},{label:"Pata Ready",value:s.pataStock,unit:"PCS",color:"text-blue-600",bg:"bg-blue-50/50",icon:Io,panel:"Pata",roles:["admin","manager"]},{label:"Finished",value:s.finishedStock,unit:"PCS",color:"text-emerald-600",bg:"bg-emerald-50/50",icon:$y,panel:"Stock",roles:["admin","manager"]}].map((f,x)=>{const b=!f.roles||f.roles.includes(r==null?void 0:r.role);return i.jsxs("button",{onClick:()=>b?n(f.panel):null,className:`${f.bg} p-4 rounded-lg border-2 border-slate-50 shadow-lg transition-all group text-left relative overflow-hidden ${b?"hover:shadow-xl hover:border-black":"opacity-60 cursor-not-allowed filter grayscale"}`,children:[i.jsx("div",{className:"absolute -right-3 -top-3 opacity-[0.03] group-hover:opacity-[0.08] transition-opacity",children:i.jsx(f.icon,{size:80})}),i.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-slate-600 font-bold mb-1.5 italic",children:f.label}),i.jsxs("p",{className:`text-2xl font-black italic tracking-tighter ${f.color}`,children:[f.value.toLocaleString(),i.jsx("span",{className:"text-[11px] font-bold ml-1 not-italic opacity-40",children:f.unit})]}),b?i.jsx("div",{className:"mt-3 w-6 h-1 bg-slate-100 rounded-full group-hover:w-12 transition-all duration-500"}):i.jsxs("div",{className:"mt-3 flex items-center gap-1.5",children:[i.jsx(fo,{size:8,className:"text-rose-500"}),i.jsx("span",{className:"text-[6.5px] font-black uppercase text-rose-500 tracking-widest",children:"Locked"})]})]},x)})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs("div",{className:"bg-white p-5 rounded-xl border-2 border-slate-50 shadow-xl overflow-hidden min-h-[500px]",children:[i.jsxs("div",{className:"flex justify-between items-center mb-5 border-b-2 border-slate-50 pb-6",children:[i.jsxs("h3",{className:"text-xl font-black uppercase italic tracking-tighter flex items-center gap-3",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500 animate-pulse"}),"Live Production Stream"]}),i.jsx("button",{onClick:()=>window.location.reload(),className:"p-3 bg-slate-50 text-slate-600 font-bold rounded-xl hover:bg-black hover:text-white transition-all",children:i.jsx(pc,{size:16})})]}),i.jsx("div",{className:"space-y-4",children:s.recentActivity.map((f,x)=>i.jsxs("div",{className:"group bg-slate-50/50 hover:bg-white p-4 md:p-5 rounded-lg border border-transparent hover:border-slate-100 hover:shadow-lg transition-all duration-500 flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-md group-hover:rotate-12 transition-transform ${f.bg}`,children:i.jsx(f.icon,{size:20,className:f.color})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded-sm text-xs font-bold font-bold font-black uppercase tracking-widest text-white shadow-sm ${f.activityType==="Factory"?"bg-blue-500":f.activityType==="Cutting"?"bg-black":"bg-amber-500"}`,children:f.activityType}),i.jsx("p",{className:"text-[8px] font-black text-slate-400 font-bold uppercase tracking-widest",children:f.date})]}),i.jsx("h4",{className:"text-lg md:text-xl font-black italic uppercase tracking-tighter leading-none mt-1.5 text-black",children:f.activityType==="Factory"?`${f.worker} - ${f.design}`:f.activityType==="Cutting"?`Cutting: ${f.design}`:`${f.worker} - ${f.pataType}`}),i.jsx("p",{className:"text-[11px] font-bold font-black text-slate-600 font-bold uppercase tracking-widest mt-1",children:f.color||f.pataStoneColors})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl md:text-3xl font-black italic tracking-tighter leading-none text-black",children:["+",f.issueBorka||f.issueHijab||f.borka||f.pataQty||0]}),i.jsx("p",{className:"text-xs font-bold font-bold font-black text-slate-400 font-bold uppercase tracking-widest mt-0.5",children:"TOTAL ASSETS"})]})]},f.id||x))})]})}),i.jsxs("div",{className:"space-y-8",children:[a&&(t.adminNotes||[]).length>0&&i.jsxs("div",{className:"bg-black text-white p-5 rounded-xl shadow-xl space-y-6 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 right-0 p-5 opacity-5 scale-150 rotate-12 group-hover:rotate-0 transition-transform duration-700",children:i.jsx($_,{size:80})}),i.jsx("h3",{className:"text-xl font-black uppercase italic flex items-center gap-3 relative z-10",children:"Manager Notes"}),i.jsx("div",{className:"space-y-4 relative z-10 max-h-[250px] overflow-y-auto no-scrollbar",children:(t.adminNotes||[]).slice().reverse().map(f=>i.jsxs("div",{className:"bg-white/10 p-4 rounded-[1.25rem] border border-white/5 backdrop-blur-3xl",children:[i.jsx("p",{className:"text-sm font-bold italic leading-tight",children:f.text}),i.jsxs("div",{className:"mt-3 flex justify-between items-center opacity-40",children:[i.jsx("p",{className:"text-[8px] font-black uppercase text-amber-500",children:f.from}),i.jsx("p",{className:"text-[8px] font-black uppercase",children:f.date.split(",")[0]})]})]},f.id))})]}),o&&i.jsxs("div",{className:"bg-white p-4 rounded-xl border-2 border-slate-50 shadow-xl space-y-6",children:[i.jsx("label",{className:"bg-black text-white px-2 py-0.5 rounded-sm text-[8px] font-black uppercase italic tracking-widest inline-block shadow-lg",children:"New Note"}),i.jsx("textarea",{className:"w-full h-24 bg-slate-50 text-base font-black italic p-4 rounded-[1.25rem] border-none outline-none placeholder:text-slate-100 text-black uppercase resize-none shadow-inner",placeholder:"TYPE SOMETHING...",value:c,onChange:f=>u(f.target.value)}),i.jsx("button",{onClick:d,className:"w-full py-4 bg-black text-white rounded-[1.25rem] font-black uppercase tracking-widest hover:scale-[1.02] active:translate-y-1 transition-all shadow-xl text-xs font-bold border-b-[4px] border-zinc-900",children:"POST NOTE"})]}),s.lowStock.length>0&&i.jsxs("div",{className:"bg-rose-50 border-2 border-slate-50 rounded-xl p-5 space-y-6 shadow-xl border-b-[10px] border-rose-100",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-3 bg-rose-500 text-white rounded-2xl shadow-xl rotate-6 group-hover:rotate-0 transition-transform",children:i.jsx(fo,{size:24})}),i.jsxs("h3",{className:"text-xl font-black uppercase italic text-black leading-none tracking-tighter",children:["Inventory ",i.jsx("br",{}),"Warnings"]})]}),i.jsx("div",{className:"space-y-3",children:s.lowStock.slice(0,5).map((f,x)=>i.jsxs("div",{className:"bg-white p-4 rounded-xl border border-rose-100 flex items-center justify-between shadow-sm",children:[i.jsx("span",{className:"text-xs font-bold font-black text-black uppercase italic tracking-tighter",children:f.name}),i.jsxs("span",{className:"bg-rose-500 text-white px-3 py-0.5 rounded-full text-[8px] font-black shadow-lg",children:["ONLY ",f.qty]})]},x))}),i.jsx("button",{onClick:()=>n("Stock"),className:"w-full py-4 mt-2 bg-white text-rose-500 border-2 border-rose-100 rounded-full text-[11px] font-bold font-black uppercase tracking-widest hover:bg-rose-500 hover:text-white transition-all",children:"Resolve Stock Items"})]})]})]}),i.jsxs("div",{className:"pt-12 border-t border-slate-50 flex justify-between items-center opacity-40",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),i.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest",children:"Master Node Link Established"})]}),i.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest",children:"NRZONE INDUSTRIAL  2026"})]})]})},Ba=(t,e,n,r)=>{const s=t.designs.find(d=>d.name===e),a=Number((s==null?void 0:s.sewingRate)||0),o=(t.cuttingStock||[]).filter(d=>d.design===e&&d.color===n&&d.size===r).reduce((d,f)=>({borka:d.borka+Number(f.borka||0),hijab:d.hijab+Number(f.hijab||0)}),{borka:0,hijab:0}),c=(t.productions||[]).filter(d=>d.type==="sewing"&&d.design===e&&d.color===n&&d.size===r).reduce((d,f)=>({borka:d.borka+Number(f.issueBorka||0),hijab:d.hijab+Number(f.issueHijab||0)}),{borka:0,hijab:0});let u={borka:0,hijab:0};return a===0&&(u=(t.productions||[]).filter(d=>d.type==="stone"&&d.design===e&&d.color===n&&d.size===r).reduce((d,f)=>({borka:d.borka+Number(f.issueBorka||0),hijab:d.hijab+Number(f.issueHijab||0)}),{borka:0,hijab:0})),{borka:o.borka-c.borka-u.borka,hijab:o.hijab-c.hijab-u.hijab}},Rl=(t,e,n,r)=>{const s=t.designs.find(f=>f.name===e);if(Number((s==null?void 0:s.sewingRate)||0)===0)return Ba(t,e,n,r);if(Number((s==null?void 0:s.stoneRate)||0)===0)return{borka:0,hijab:0};const c=(t.productions||[]).filter(f=>f.type==="sewing"&&(f.status==="Received"||f.status==="Pending"||f.status==="Partial")&&f.design===e&&f.color===n&&f.size===r).reduce((f,x)=>({borka:f.borka+Number(x.issueBorka||0),hijab:f.hijab+Number(x.issueHijab||0)}),{borka:0,hijab:0}),u=(t.productions||[]).filter(f=>f.type==="stone"&&f.design===e&&f.color===n&&f.size===r).reduce((f,x)=>({borka:f.borka+Number(x.issueBorka||0),hijab:f.hijab+Number(x.issueHijab||0)}),{borka:0,hijab:0}),d={borka:0,hijab:0};return{borka:c.borka-u.borka-d.borka,hijab:c.hijab-u.hijab-d.hijab}},Q_=(t,e,n,r)=>{const s=(t.productions||[]).filter(u=>u.type==="finishing"&&u.status==="Received"&&u.design===e&&u.color===n&&u.size===r).reduce((u,d)=>({borka:u.borka+Number(d.receivedBorka||0),hijab:u.hijab+Number(d.receivedHijab||0)}),{borka:0,hijab:0}),a=(t.productions||[]).some(u=>u.type==="finishing"&&u.design===e);let o=s;if(!a){const u=t.designs.find(x=>x.name===e),d=Number((u==null?void 0:u.stoneRate)||0),f=Number((u==null?void 0:u.pataRate)||0);d>0||f>0?o=(t.productions||[]).filter(x=>x.type==="sewing"&&x.status==="Received"&&x.design===e&&x.color===n&&x.size===r).reduce((x,b)=>({borka:x.borka+Number(b.receivedBorka||0),hijab:x.hijab+Number(b.receivedHijab||0)}),{borka:0,hijab:0}):o=(t.productions||[]).filter(x=>x.type==="sewing"&&x.status==="Received"&&x.design===e&&x.color===n&&x.size===r).reduce((x,b)=>({borka:x.borka+Number(b.receivedBorka||0),hijab:x.hijab+Number(b.receivedHijab||0)}),{borka:0,hijab:0})}const c=(t.deliveries||[]).filter(u=>u.design===e&&u.color===n&&u.size===r).reduce((u,d)=>({borka:u.borka+Number(d.borka||0),hijab:u.hijab+Number(d.hijab||0)}),{borka:0,hijab:0});return{borka:o.borka-c.borka,hijab:o.hijab-c.hijab}},qy=t=>{var n,r;const e={};return(n=t.pataEntries)==null||n.filter(s=>s.status==="Received").forEach(s=>{const a=`${s.design}-${s.color}-${s.pataType}`;e[a]||(e[a]={design:s.design,color:s.color,type:s.pataType,added:0,spent:0}),e[a].added+=Number(s.pataQty||0)}),(r=t.productions)==null||r.filter(s=>s.type==="stone").forEach(s=>{const a=`${s.design}-${s.color}-${s.pataType||"Standard"}`;e[a]||(e[a]={design:s.design,color:s.color,type:s.pataType||"Standard",added:0,spent:0}),e[a].spent+=Number(s.pataQty||0)}),Object.values(e).map(s=>({...s,balance:s.added-s.spent}))},Lx=(t,e,n,r)=>{const s=(t.pataEntries||[]).filter(o=>o.design===e&&o.color===n&&o.pataType===r&&o.status==="Received").reduce((o,c)=>o+Number(c.pataQty||0),0),a=(t.productions||[]).filter(o=>o.type==="stone"&&o.design===e&&o.color===n&&o.pataType===r).reduce((o,c)=>o+Number(c.pataQty||0),0);return s-a},Y_="https://script.google.com/macros/s/AKfycbyDVgJGENR7sVKupsCpjFbygxW0VdnyPEUE1wcXvAe4Lhc4iD4hrVriU7vMLv1cSLXv2A/exec",Ot=async t=>{try{const e={timestamp:new Date().toLocaleString(),...t};await fetch(Y_,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e)}),console.log("Sync requested for:",t.type)}catch(e){console.error("Sync Error:",e)}},J_=({masterData:t,setMasterData:e,showNotify:n,user:r,setActivePanel:s})=>{const a=(r==null?void 0:r.role)==="admin",[o,c]=G.useState(!1),[u,d]=G.useState(null),[f,x]=G.useState({design:"",color:"",size:""}),[b,E]=G.useState({design:"",color:"",cutterName:"",lotNo:"",sizes:[{size:"",borka:"",hijab:""}]}),[I,A]=G.useState(null),O=!f.design||!f.color||!f.size||!u?{borka:0,hijab:0}:u==="swing"?Ba(t,f.design,f.color,f.size):u==="stone"?Rl(t,f.design,f.color,f.size):{borka:0,hijab:0},N=(t.cuttingStock||[]).reduce((g,p)=>g+Number(p.borka||0)+Number(p.hijab||0),0)-(t.productions||[]).filter(g=>g.type==="sewing").reduce((g,p)=>g+Number(p.issueBorka||0)+Number(p.issueHijab||0),0),v=()=>{E(g=>({...g,sizes:[...g.sizes,{size:"",borka:"",hijab:""}]}))},j=g=>{b.sizes.length!==1&&E(p=>({...p,sizes:p.sizes.filter((y,k)=>k!==g)}))},L=(g,p,y)=>{const k=[...b.sizes];k[g][p]=y,E(C=>({...C,sizes:k}))},S=()=>{const g=b.design||"N/A",p=b.color||"N/A",y=b.cutterName||"N/A";if((r==null?void 0:r.role)==="manager"&&(!b.design||!b.color||!b.cutterName||!b.lotNo)){n("  , ,       !","error");return}const k=b.sizes.filter(R=>R.size&&(Number(R.borka||0)>0||Number(R.hijab||0)>0));if(k.length===0){n("      !","error");return}const C=k.map(R=>({id:Date.now()+Math.random(),date:new Date().toLocaleDateString("en-GB"),design:g,color:p,size:R.size,cutterName:y,lotNo:b.lotNo||"N/A",borka:Number(R.borka||0),hijab:Number(R.hijab||0)}));e(R=>({...R,cuttingStock:[...C,...R.cuttingStock||[]]})),C.forEach(R=>{Ot({type:"CUTTING_ENTRY",worker:R.cutterName,detail:`${R.design}(${R.color}) - ${R.size} - B:${R.borka} H:${R.hijab}`,amount:0})}),c(!1),E({design:"",color:"",cutterName:"",lotNo:"",sizes:[{size:"",borka:"",hijab:""}]}),n(`${g} (${p})     !`)},T=g=>{confirm("  ?    ")&&(e(p=>({...p,cuttingStock:(p.cuttingStock||[]).filter(y=>y.id!==g)})),n("    !","info"))};return I?i.jsxs("div",{className:"min-h-screen bg-white text-black p-12 italic font-outfit",children:[i.jsx("style",{children:"@media print { .no-print { display: none; } }"}),i.jsxs("div",{className:"flex justify-between items-center mb-4 no-print",children:[i.jsx("button",{onClick:()=>A(null),className:"bg-slate-50 text-slate-600 font-bold px-10 py-4 rounded-full font-black uppercase text-xs hover:text-black transition-all",children:" "}),i.jsx("button",{onClick:()=>window.print(),className:"bg-black text-white px-10 py-4 rounded-full font-black uppercase text-xs shadow-xl hover:scale-105 transition-all",children:"  "})]}),i.jsxs("div",{className:"max-w-2xl mx-auto border-4 border-slate-50 p-16 rounded-3xl text-center bg-white shadow-3xl",children:[i.jsx("h1",{className:"text-6xl font-black italic tracking-tighter mb-4 text-black",children:"NRZONE PRO"}),i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-[0.5em] text-slate-600 font-bold mb-4 border-y-2 border-slate-50 py-4",children:"CUTTING DISPATCH SLIP"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-left mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest",children:"Master Name"}),i.jsx("p",{className:"text-3xl font-black uppercase italic",children:I.cutterName})]}),i.jsxs("div",{className:"space-y-2 text-right",children:[i.jsx("p",{className:"text-xs font-bold font-black text-black uppercase tracking-widest",children:"Lot Number"}),i.jsxs("p",{className:"text-4xl font-black uppercase text-black",children:["#",I.lotNo]})]})]}),i.jsxs("div",{className:"space-y-8 text-left bg-slate-50 p-4 rounded-2xl border-2 border-white shadow-inner",children:[i.jsxs("div",{className:"flex justify-between items-center border-b-2 border-white pb-6",children:[i.jsx("span",{className:"text-xl font-black text-slate-600 font-bold uppercase italic",children:"Design:"}),i.jsx("span",{className:"text-4xl font-black italic text-black",children:I.design})]}),i.jsxs("div",{className:"flex justify-between items-center border-b-2 border-white pb-6",children:[i.jsx("span",{className:"text-xl font-black text-slate-600 font-bold uppercase italic",children:"Color:"}),i.jsx("span",{className:"text-3xl font-black italic text-black",children:I.color})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-xl font-black text-slate-600 font-bold uppercase italic",children:"Size:"}),i.jsx("span",{className:"text-6xl font-black italic bg-black text-white px-8 py-2 rounded-2xl rotate-3 shadow-2xl",children:I.size})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[i.jsxs("div",{className:"bg-black text-white p-4 rounded-2xl shadow-3xl",children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase mb-2 tracking-widest opacity-60",children:"Borka Qty"}),i.jsx("p",{className:"text-7xl font-black italic",children:I.borka})]}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border-2 border-white shadow-inner",children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase mb-2 text-slate-600 font-bold tracking-widest",children:"Hijab Qty"}),i.jsx("p",{className:"text-7xl font-black italic text-black",children:I.hijab})]})]}),i.jsxs("div",{className:"mt-16 pt-10 border-t-2 border-slate-50 flex justify-between items-center opacity-40 italic",children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase underline decoration-black decoration-4",children:"Officer Signature"}),i.jsx("p",{className:"text-xs font-bold font-black uppercase",children:I.date})]})]})]}):i.jsxs("div",{className:"space-y-12 pb-24 animate-fade-up px-2 italic text-black font-outfit",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>s("Overview"),className:"p-4 bg-white text-black rounded-2xl border border-slate-100 shadow-sm hover:bg-black hover:text-white transition-all group",children:i.jsx(yt,{size:20,className:"group-hover:-translate-x-1 transition-transform"})}),i.jsxs("div",{className:"flex items-center gap-3 bg-white p-5 rounded-3xl border-4 border-slate-50 shadow-xl",children:[i.jsx("div",{className:"p-4 bg-black text-white rounded-xl shadow-2xl rotate-3 hover:rotate-0 transition-transform",children:i.jsx(Mi,{size:32,strokeWidth:3})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-4xl font-black uppercase italic tracking-tighter leading-none text-black",children:["Cutting ",i.jsx("span",{className:"text-slate-100",children:"Panel"})]}),i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.4em] mt-3 italic",children:"PRODUCTION HUB"})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center",children:[i.jsxs("div",{className:"bg-white rounded-2xl px-10 py-6 flex flex-col items-end min-w-[280px] border-4 border-slate-50 shadow-xl",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-[0.4em] mb-2",children:"AVAILABLE STOCK"}),i.jsxs("p",{className:"text-4xl font-black italic tracking-tighter text-black",children:[N.toLocaleString()," ",i.jsx("span",{className:"text-xs not-italic text-slate-400 font-bold",children:"PCS"})]})]}),i.jsxs("button",{onClick:()=>c(!0),className:"bg-black text-white px-10 rounded-2xl py-8 font-black uppercase tracking-[0.3em] shadow-2xl hover:scale-[1.02] active:scale-95 transition-all",children:[i.jsx(Pt,{size:24,strokeWidth:3})," NEW CUTTING"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[i.jsx("div",{className:"bg-white rounded-3xl p-12 border-4 border-slate-50 shadow-2xl relative overflow-hidden group",children:i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-3xl font-black uppercase tracking-tighter italic flex items-center gap-3 text-black",children:[i.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100 shadow-sm",children:i.jsx(ar,{size:24,strokeWidth:3,className:"text-slate-400 font-bold"})}),i.jsx("span",{children:"Stock Intelligence"})]}),i.jsx("p",{className:"text-xs font-bold text-slate-600 font-bold font-black uppercase tracking-[0.4em] mt-3 italic",children:"REAL-TIME INVENTORY ANALYTICS"})]}),i.jsxs("div",{className:"flex p-2 bg-slate-50 rounded-3xl border border-slate-100",children:[i.jsx("button",{onClick:()=>d("swing"),className:`px-10 py-4 rounded-2xl text-xs font-bold font-black uppercase tracking-widest transition-all ${u==="swing"?"bg-black text-white shadow-xl":"text-slate-600 font-bold hover:text-black"}`,children:"Sewing"}),i.jsx("button",{onClick:()=>d("stone"),className:`px-10 py-4 rounded-2xl text-xs font-bold font-black uppercase tracking-widest transition-all ${u==="stone"?"bg-black text-white shadow-xl":"text-slate-600 font-bold hover:text-black"}`,children:"Stone"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[i.jsxs("select",{className:"form-input text-lg font-black uppercase py-6 bg-slate-50 border-slate-100 text-black",onChange:g=>x(p=>({...p,design:g.target.value})),value:f.design,children:[i.jsx("option",{value:"",children:"DESIGN"}),(t.designs||[]).map(g=>i.jsx("option",{value:g.name,children:g.name},g.name))]}),i.jsxs("select",{className:"form-input text-lg font-black uppercase py-6 bg-slate-50 border-slate-100 text-black",onChange:g=>x(p=>({...p,color:g.target.value})),value:f.color,children:[i.jsx("option",{value:"",children:"COLOR"}),(t.colors||[]).map(g=>i.jsx("option",{value:g,children:g},g))]}),i.jsxs("select",{className:"form-input text-lg font-black uppercase py-6 bg-slate-50 border-slate-100 text-black",onChange:g=>x(p=>({...p,size:g.target.value})),value:f.size,children:[i.jsx("option",{value:"",children:"SIZE"}),(t.sizes||[]).map(g=>i.jsx("option",{value:g,children:g},g))]})]}),i.jsx("div",{className:"bg-slate-50 rounded-3xl p-16 border border-slate-100 italic relative overflow-hidden shadow-inner",children:u?i.jsx("div",{className:"w-full animate-fade-up",children:f.design&&f.color&&!f.size?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center px-8 mb-4 border-b border-slate-100 pb-4",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-[0.4em]",children:"Size Breakdown"}),i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-[0.4em]",children:"Borka / Hijab"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3 max-h-[300px] overflow-y-auto pr-4",children:[(t.sizes||[]).map(g=>{const p=u==="swing"?Ba(t,f.design,f.color,g):Rl(t,f.design,f.color,g);return p.borka===0&&p.hijab===0?null:i.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-3xl border border-slate-100 shadow-sm",children:[i.jsx("span",{className:"text-2xl font-black italic text-black",children:g}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-[11px] font-bold text-slate-600 font-bold block uppercase font-bold",children:"Borka"}),i.jsx("span",{className:"text-xl font-black text-black",children:p.borka})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-[11px] font-bold text-slate-600 font-bold block uppercase font-bold",children:"Hijab"}),i.jsx("span",{className:"text-xl font-black text-black",children:p.hijab})]})]})]},g)}),!(t.sizes||[]).some(g=>{const p=u==="swing"?Ba(t,f.design,f.color,g):Rl(t,f.design,f.color,g);return p.borka>0||p.hijab>0})&&i.jsx("p",{className:"text-center py-10 text-slate-400 font-bold font-black uppercase tracking-widest text-xs",children:"No Stock Available"})]})]}):f.size?i.jsxs("div",{className:"flex w-full items-center justify-around",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.5em] mb-4",children:"BORKA"}),i.jsx("p",{className:"text-8xl font-black italic tracking-tighter leading-none text-black",children:O.borka})]}),i.jsx("div",{className:"w-[4px] h-32 bg-slate-200 rounded-full"}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.5em] mb-4",children:"HIJAB"}),i.jsx("p",{className:"text-8xl font-black italic tracking-tighter leading-none text-black",children:O.hijab})]})]}):i.jsxs("div",{className:"py-14 text-slate-100 flex flex-col items-center gap-3",children:[i.jsx(ar,{size:64,strokeWidth:1,className:"opacity-20"}),i.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.6em] text-center",children:"SELECT DESIGN & COLOR TO SEE BREAKDOWN"})]})}):i.jsxs("div",{className:"py-14 text-slate-100 flex flex-col items-center gap-3",children:[i.jsx(ar,{size:64,strokeWidth:1,className:"opacity-20"}),i.jsx("p",{className:"text-[11px] font-black uppercase tracking-[0.6em]",children:"SELECT PARAMETERS TO PROBE DATA"})]})})]})}),i.jsxs("div",{className:"bg-white rounded-3xl border-4 border-slate-50 overflow-hidden shadow-2xl",children:[i.jsxs("div",{className:"p-12 border-b border-slate-100 flex justify-between items-center text-black",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-3xl font-black uppercase tracking-tighter italic",children:" "}),i.jsx("p",{className:"text-xs font-bold text-slate-600 font-bold font-black uppercase tracking-[0.4em] mt-3",children:"RECENT PRODUCTION ARTIFACTS"})]}),i.jsxs("div",{className:"bg-slate-50 border border-slate-100 px-8 py-3 rounded-full text-xs font-bold font-black uppercase tracking-widest italic text-black flex items-center justify-center",children:[(t.cuttingStock||[]).length," RECORDS"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left uppercase text-black",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold font-black text-xs font-bold tracking-[0.4em] italic border-b border-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-12 py-8",children:"TIMESTAMP"}),i.jsx("th",{className:"px-12 py-8",children:"DESIGN / COLOR / SIZE"}),i.jsx("th",{className:"px-12 py-8 text-center",children:"BORKA"}),i.jsx("th",{className:"px-12 py-8 text-center",children:"HIJAB"}),i.jsx("th",{className:"px-12 py-8 text-right",children:"OPS"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:(t.cuttingStock||[]).map(g=>i.jsxs("tr",{className:"hover:bg-slate-50 transition-all group",children:[i.jsx("td",{className:"px-12 py-10 font-black text-[11px] text-slate-400 font-bold",children:g.date}),i.jsx("td",{className:"px-12 py-10",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-black text-white px-4 py-2 rounded-xl font-black text-xl italic",children:g.size}),i.jsxs("div",{children:[i.jsx("p",{className:"font-black text-2xl italic tracking-tighter leading-none text-black",children:g.design}),i.jsxs("p",{className:"text-xs font-bold text-slate-600 font-bold font-black mt-2 tracking-widest",children:[g.color,"  ",g.cutterName,"  LOT: ",g.lotNo]})]})]})}),i.jsx("td",{className:"px-12 py-10 text-center font-black text-4xl italic tracking-tighter text-black",children:g.borka}),i.jsx("td",{className:"px-12 py-10 text-center font-black text-4xl italic tracking-tighter text-black",children:g.hijab}),i.jsx("td",{className:"px-12 py-10 text-right",children:i.jsxs("div",{className:"flex gap-3 justify-end opacity-0 group-hover:opacity-100 transition-all translate-x-4 group-hover:translate-x-0",children:[i.jsx("button",{onClick:()=>A(g),className:"p-5 bg-black text-white rounded-2xl shadow-xl hover:scale-110 transition-all",children:i.jsx(Vi,{size:20})}),a&&i.jsx("button",{onClick:()=>T(g.id),className:"p-5 bg-white border-2 border-slate-100 text-rose-500 rounded-2xl shadow-xl hover:bg-rose-500 hover:text-white transition-all",children:i.jsx(zn,{size:20})})]})})]},g.id))})]})})]})]}),i.jsx("div",{className:"space-y-10",children:i.jsxs("div",{className:"bg-white rounded-3xl p-12 flex items-center justify-between border-4 border-slate-50 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-4 bg-emerald-50 rounded-2xl border border-emerald-100 text-emerald-500",children:i.jsx(nu,{size:32})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-[0.4em] mb-1",children:"SYSTEM STATUS"}),i.jsx("p",{className:"text-xl font-black italic tracking-tighter leading-none text-black",children:"OPERATION NOMINAL"})]})]}),i.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-slate-100 border-t-black animate-spin"})]})})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[300] flex items-center justify-center p-2 md:p-4 text-black italic",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-3xl w-full max-w-6xl border-4 border-white shadow-3xl animate-fade-up max-h-[96vh] flex flex-col overflow-hidden italic font-outfit",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 md:p-4 border-b-2 border-slate-50 bg-white flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-3",children:[i.jsx("div",{className:"p-4 md:p-4 bg-black text-white rounded-[1.2rem] md:rounded-xl shadow-2xl rotate-3",children:i.jsx(Pt,{size:32,strokeWidth:3})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-black uppercase text-2xl md:text-5xl tracking-tighter leading-none",children:" "}),i.jsx("p",{className:"text-[11px] font-bold md:text-xs font-bold text-slate-600 font-bold font-black uppercase tracking-[0.4em] mt-2 italic",children:"Advanced Production Injection"})]})]}),i.jsx("button",{onClick:()=>{c(!1),E({design:"",color:"",cutterName:"",lotNo:"",sizes:[{size:"",borka:"",hijab:""}]})},className:"p-4 md:p-4 bg-slate-50 rounded-full hover:bg-black hover:text-white transition-all text-black",children:i.jsx(Bt,{size:28})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-12 space-y-12 italic custom-scrollbar",children:[i.jsxs("div",{className:"bg-slate-50 p-4 md:p-4 rounded-xl md:rounded-3xl border-2 border-white shadow-inner space-y-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-1.5 h-8 bg-black rounded-full"}),i.jsx("h4",{className:"text-lg md:text-xl font-black uppercase tracking-widest italic leading-none",children:".    (Identity)"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-3",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 tracking-widest",children:"   (Master)"}),i.jsxs("select",{className:"w-full text-xl md:text-2xl font-black py-5 md:py-6 bg-white border-none rounded-lg md:rounded-xl px-8 focus:ring-4 focus:ring-black/5 outline-none text-black italic transition-all appearance-none shadow-sm",value:b.cutterName,onChange:g=>E(p=>({...p,cutterName:g.target.value})),children:[i.jsx("option",{value:"",children:"--"}),(t.cutters||[]).map(g=>i.jsx("option",{value:g,children:g},g))]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 tracking-widest",children:" (Style)"}),i.jsxs("select",{className:"w-full text-xl md:text-2xl font-black py-5 md:py-6 bg-white border-none rounded-lg md:rounded-xl px-8 focus:ring-4 focus:ring-black/5 outline-none text-black italic transition-all appearance-none shadow-sm",value:b.design,onChange:g=>E(p=>({...p,design:g.target.value})),children:[i.jsx("option",{value:"",children:"--"}),(t.designs||[]).map(g=>i.jsx("option",{value:g.name,children:g.name},g.name))]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 tracking-widest",children:" (Color)"}),i.jsxs("select",{className:"w-full text-xl md:text-2xl font-black py-5 md:py-6 bg-white border-none rounded-lg md:rounded-xl px-8 focus:ring-4 focus:ring-black/5 outline-none text-black italic transition-all appearance-none shadow-sm",value:b.color,onChange:g=>E(p=>({...p,color:g.target.value})),children:[i.jsx("option",{value:"",children:"--"}),(t.colors||[]).map(g=>i.jsx("option",{value:g,children:g},g))]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 tracking-widest",children:"  (Lot Number)"}),i.jsx("input",{type:"text",placeholder:"LOT-XXXX",className:"w-full text-3xl md:text-5xl font-black py-6 md:py-10 bg-black text-white border-none rounded-xl md:rounded-3xl px-8 md:px-14 focus:ring-8 focus:ring-black/5 outline-none italic transition-all placeholder:text-zinc-800 shadow-2xl",value:b.lotNo,onChange:g=>E(p=>({...p,lotNo:g.target.value}))})]})]}),i.jsxs("div",{className:"bg-white p-4 md:p-4 rounded-2xl md:rounded-3xl border-4 border-slate-50 shadow-3xl space-y-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-1.5 h-8 bg-emerald-500 rounded-full"}),i.jsx("h4",{className:"text-lg md:text-xl font-black uppercase tracking-widest italic text-emerald-600 leading-none",children:".    (Size & Quantity)"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center border-b-2 border-slate-50 pb-6 gap-3",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest italic",children:"     "}),i.jsxs("button",{onClick:v,className:"flex items-center gap-3 px-6 md:px-8 py-3 bg-slate-50 text-black border-2 border-slate-100 rounded-full text-xs font-bold font-black uppercase tracking-widest hover:bg-black hover:text-white transition-all shadow-sm",children:[i.jsx(Pt,{size:16}),"    "]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-3",children:b.sizes.map((g,p)=>i.jsxs("div",{className:"bg-slate-50/50 p-4 md:p-5 rounded-xl md:rounded-2xl border-2 border-white space-y-6 relative group/size hover:border-black/10 transition-all shadow-sm",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-4 tracking-widest italic",children:"Size"}),i.jsxs("select",{className:"w-full bg-white text-black border-none rounded-2xl px-6 h-16 text-xl font-black italic outline-none focus:ring-4 focus:ring-black/5 appearance-none shadow-sm",value:g.size,onChange:y=>L(p,"size",y.target.value),children:[i.jsx("option",{value:"",children:"--"}),(t.sizes||[]).map(y=>i.jsx("option",{value:y,children:y},y))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-3",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-500 font-bold uppercase text-center block tracking-widest italic",children:"Borka"}),i.jsx("input",{type:"number",className:"w-full h-16 md:h-20 text-center font-black text-3xl md:text-4xl bg-white border-none rounded-2xl outline-none focus:ring-4 focus:ring-black/5 shadow-inner",placeholder:"0",value:g.borka,onChange:y=>L(p,"borka",y.target.value)})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs font-bold font-black text-emerald-400 uppercase text-center block tracking-widest italic",children:"Hijab"}),i.jsx("input",{type:"number",className:"w-full h-16 md:h-20 text-center font-black text-3xl md:text-4xl bg-emerald-50 text-emerald-600 border-none rounded-2xl outline-none focus:ring-4 focus:ring-emerald-100 shadow-inner",placeholder:"0",value:g.hijab,onChange:y=>L(p,"hijab",y.target.value)})]})]}),i.jsx("button",{onClick:()=>j(p),className:"absolute -top-4 -right-4 p-3 bg-white text-rose-500 border-2 border-slate-50 rounded-full shadow-xl opacity-0 group-hover/size:opacity-100 transition-all hover:bg-rose-500 hover:text-white",children:i.jsx(Bt,{size:16})})]},p))})]})]}),i.jsxs("div",{className:"p-4 md:p-12 border-t-2 border-slate-50 bg-white flex flex-col md:flex-row gap-3 md:gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>{c(!1),E({design:"",color:"",cutterName:"",lotNo:"",sizes:[{size:"",borka:"",hijab:""}]})},className:"flex-1 py-6 md:py-10 bg-slate-50 text-slate-600 font-bold rounded-full font-black uppercase text-xs font-bold md:text-xs tracking-widest hover:text-black transition-all order-2 md:order-1",children:"Cancel"}),i.jsx("button",{onClick:S,className:"flex-[3] py-6 md:py-10 rounded-full bg-black text-white font-black text-xl md:text-3xl uppercase tracking-[0.2em] md:tracking-[0.4em] shadow-2xl hover:scale-[1.01] active:scale-95 transition-all order-1 md:order-2",children:"DATA INJECTION"})]})]})}),i.jsx("div",{className:"pt-20 pb-10 flex justify-center",children:i.jsxs("button",{onClick:()=>s("Overview"),className:"group relative flex items-center gap-3 bg-white px-12 py-6 rounded-full border-4 border-slate-50 shadow-2xl hover:border-black transition-all duration-500",children:[i.jsx("div",{className:"p-3 bg-black text-white rounded-2xl group-hover:rotate-[-12deg] transition-transform",children:i.jsx(yt,{size:20,strokeWidth:3})}),i.jsx("span",{className:"text-lg font-black uppercase italic tracking-widest text-black",children:"  "}),i.jsx("div",{className:"absolute -inset-1 bg-black/5 blur-2xl rounded-full -z-10 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})},Vx=({type:t,masterData:e,setMasterData:n,showNotify:r,user:s,setActivePanel:a})=>{var Ks,ea,et,ot;const[o,c]=G.useState(t),[u,d]=G.useState("active"),f=(s==null?void 0:s.role)==="admin",x=(s==null?void 0:s.role)==="manager";Cn.useEffect(()=>{c(t)},[t]);const[b,E]=G.useState(null),[I,A]=G.useState(null),[O,N]=G.useState(null),[v,j]=G.useState(null),[L,S]=G.useState(null),[T,g]=G.useState(!1),[p,y]=G.useState(null),[k,C]=G.useState(!1),[R,_]=G.useState(!1),[ae,Ge]=G.useState({design:"",color:"",lotNo:"",date:new Date().toISOString().split("T")[0],pataType:((Ks=e.pataTypes)==null?void 0:Ks[0])||"Single",rate:"",worker:"",note:""}),[wt,F]=G.useState([{size:"",borka:"",hijab:"",pataQty:""}]),[z,$]=G.useState(""),Q=e.workerCategories[o]||[],se=(e.productions||[]).filter(P=>P.type===o&&P.status==="Pending"),ce=(e.productions||[]).filter(P=>P.type===o&&(P.status==="Received"||P.status==="Partial")),He=P=>{if(!ae.design||!ae.color||o==="sewing"&&!P)return{borka:0,hijab:0,pata:0};const X=e.designs.find(Y=>Y.name===ae.design);if(o==="sewing")return((X==null?void 0:X.sewingRate)||0)===0?{borka:0,hijab:0,pata:0}:Ba(e,ae.design,ae.color,P);{const Y=Rl(e,ae.design,ae.color,P),ne=Lx(e,ae.design,ae.color,ae.pataType);return{borka:Y.borka,hijab:Y.hijab,pata:ne}}},Ce=()=>{F(P=>[...P,{size:"",borka:"",hijab:"",pataQty:""}])},Ct=P=>{wt.length!==1&&F(X=>X.filter((Y,ne)=>ne!==P))},Ze=(P,X,Y)=>{const ne=[...wt];ne[P][X]=Y,F(ne)},Kt=()=>{const P=e.sizes.map(X=>({size:X,borka:"",hijab:"",pataQty:""}));F(P),r("    !")},D=Cn.useMemo(()=>{const P=e.productions||[],X=e.cuttingStock||[],Y=[];if(o==="sewing")X.forEach(ne=>{const q=e.designs.find(pe=>pe.name===ne.design);if(((q==null?void 0:q.sewingRate)||0)===0)return;const Z=P.filter(pe=>pe.type==="sewing"&&pe.design===ne.design&&pe.color===ne.color&&pe.lotNo===ne.lotNo&&pe.size===ne.size).reduce((pe,ue)=>pe+(ue.issueBorka||0),0),je=P.filter(pe=>pe.type==="sewing"&&pe.design===ne.design&&pe.color===ne.color&&pe.lotNo===ne.lotNo&&pe.size===ne.size).reduce((pe,ue)=>pe+(ue.issueHijab||0),0),be=ne.borka-Z,fe=ne.hijab-je;if(be>0||fe>0){const pe=Y.find(ue=>ue.lotNo===ne.lotNo&&ue.design===ne.design&&ue.color===ne.color);pe?(pe.sizes[ne.size]={remB:be,remH:fe},pe.totalAvailable+=be+fe):Y.push({lotNo:ne.lotNo,design:ne.design,color:ne.color,totalAvailable:be+fe,sizes:{[ne.size]:{remB:be,remH:fe}}})}});else if(o==="stone"){X.forEach(q=>{const Z=e.designs.find(je=>je.name===q.design);if(((Z==null?void 0:Z.stoneRate)||0)>0&&((Z==null?void 0:Z.sewingRate)||0)===0){const je=P.filter(ue=>ue.type==="stone"&&ue.design===q.design&&ue.color===q.color&&ue.lotNo===q.lotNo&&ue.size===q.size).reduce((ue,xe)=>ue+(xe.issueBorka||0),0),be=P.filter(ue=>ue.type==="stone"&&ue.design===q.design&&ue.color===q.color&&ue.lotNo===q.lotNo&&ue.size===q.size).reduce((ue,xe)=>ue+(xe.issueHijab||0),0),fe=q.borka-je,pe=q.hijab-be;if(fe>0||pe>0){const ue=Y.find(xe=>xe.lotNo===q.lotNo&&xe.design===q.design&&xe.color===q.color);ue?(ue.sizes[q.size]={remB:fe,remH:pe},ue.totalAvailable+=fe+pe):Y.push({lotNo:q.lotNo,design:q.design,color:q.color,totalAvailable:fe+pe,sizes:{[q.size]:{remB:fe,remH:pe}},isDirect:!0})}}});const ne={};P.filter(q=>q.type==="sewing"&&(q.status==="Received"||q.status==="Pending"||q.status==="Partial")).forEach(q=>{const Z=`${q.design}|${q.color}|${q.lotNo}|${q.size}`;ne[Z]||(ne[Z]={b:0,h:0}),ne[Z].b+=q.issueBorka||0,ne[Z].h+=q.issueHijab||0}),Object.keys(ne).forEach(q=>{const[Z,je,be,fe]=q.split("|"),pe=P.filter(Ae=>Ae.type==="stone"&&Ae.design===Z&&Ae.color===je&&Ae.lotNo===be&&Ae.size===fe).reduce((Ae,ln)=>Ae+(ln.issueBorka||0),0),ue=P.filter(Ae=>Ae.type==="stone"&&Ae.design===Z&&Ae.color===je&&Ae.lotNo===be&&Ae.size===fe).reduce((Ae,ln)=>Ae+(ln.issueHijab||0),0),xe=ne[q].b-pe,Yt=ne[q].h-ue;if(xe>0||Yt>0){const Ae=Y.find(tt=>tt.lotNo===be&&tt.design===Z&&tt.color===je),ln=(e.productions||[]).filter(tt=>tt.design===Z&&tt.status==="Received").reduce((tt,Xt)=>tt+(Xt.receivedBorka||0),0),Jt=(e.productions||[]).filter(tt=>tt.design===Z&&tt.status==="Received").reduce((tt,Xt)=>tt+(Xt.receivedHijab||0),0);Ae?(Ae.sizes[fe]={remB:xe,remH:Yt},Ae.totalAvailable+=xe+Yt):Y.push({lotNo:be,design:Z,color:je,totalAvailable:xe+Yt,designStockB:ln,designStockH:Jt,sizes:{[fe]:{remB:xe,remH:Yt}}})}})}return f&&k&&e.designs.forEach(ne=>{(e.colors||[]).forEach(Z=>{Y.find(be=>be.design===ne.name&&be.color===Z)||Y.push({lotNo:"ADMIN",design:ne.name,color:Z,totalAvailable:999,designStockB:999,designStockH:999,sizes:e.sizes.reduce((be,fe)=>({...be,[fe]:{remB:999,remH:999}}),{})})})}),Y},[e,o,k,f]),U=P=>{if($(P),!P)return;const[X,Y,ne]=P.split("|"),q=D.find(Z=>Z.lotNo===ne&&Z.design===X&&Z.color===Y);if(q){const Z=e.designs.find(fe=>fe.name===q.design),je=o==="sewing"?(Z==null?void 0:Z.sewingRate)||0:(Z==null?void 0:Z.stoneRate)||0;Ge(fe=>{var pe,ue;return{...fe,design:q.design,color:q.color,lotNo:q.lotNo,rate:fe.worker&&((ue=(pe=e.workerWages)==null?void 0:pe[o])==null?void 0:ue[fe.worker])>0?e.workerWages[o][fe.worker]:je}});const be=Object.keys(q.sizes).map(fe=>({size:fe,borka:q.sizes[fe].remB,hijab:q.sizes[fe].remH,pataQty:""}));F(be)}},ve=P=>{Ge(X=>{var Z,je;const Y=e.designs.find(be=>be.name===X.design),ne=o==="sewing"?(Y==null?void 0:Y.sewingRate)||0:(Y==null?void 0:Y.stoneRate)||0,q=(je=(Z=e.workerWages)==null?void 0:Z[o])==null?void 0:je[P];return{...X,worker:P,rate:q>0?q:X.rate||ne}})},Qt=P=>{P.preventDefault();const{design:X,color:Y,pataType:ne,worker:q,rate:Z,date:je,lotNo:be}=ae;if(!q)return r("  !","error");let fe=be;if(R){if(!X||!Y)return r("    !","error");fe=`ORD-${Math.floor(Math.random()*9e5)+1e5}`}else if(!be)return r("  !","error");const pe=wt.filter(xe=>xe.size&&(Number(xe.borka||0)>0||Number(xe.hijab||0)>0));if(pe.length===0)return r("     !","error");const ue=pe.map(xe=>({id:`prod_${Date.now()}_${Math.random()}`,date:new Date(je).toLocaleDateString("en-GB"),type:o,worker:q,design:X,color:Y,lotNo:fe,size:xe.size,issueBorka:Number(xe.borka||0),issueHijab:Number(xe.hijab||0),pataType:o==="stone"?ne:null,pataQty:o==="stone"?Number(xe.pataQty||0):0,status:"Pending",receivedBorka:0,receivedHijab:0,shortageBorka:0,shortageHijab:0,rate:Number(Z||0),note:ae.note}));n(xe=>({...xe,productions:[...ue,...xe.productions||[]]})),ue.forEach(xe=>{Ot({type:`${o.toUpperCase()}_ISSUE`,worker:xe.worker,detail:`${xe.design}(${xe.color}) - ${xe.size} - B:${xe.issueBorka} H:${xe.issueHijab} (Lot: ${xe.lotNo})`,amount:0})}),F([{size:"",borka:"",hijab:"",pataQty:""}]),g(!1),_(!1),Ge(xe=>({...xe,design:"",color:"",lotNo:"",note:""})),r(`${q}-   !`)},Ve=(P,X,Y)=>{X<=0&&Y<=0||(n(ne=>{const q=ne.productions.map(Z=>{if(Z.id===P.id){const je=(Z.receivedBorka||0)+X,be=(Z.receivedHijab||0)+Y,fe=Math.max(0,Z.issueBorka-je),pe=Math.max(0,Z.issueHijab-be),ue=fe>0||pe>0?"Partial":"Received";return{...Z,receivedBorka:je,receivedHijab:be,shortageBorka:fe,shortageHijab:pe,status:ue}}return Z});return{...ne,productions:q}}),Ot({type:`${P.type.toUpperCase()}_SHORTAGE_RECOVER`,worker:P.worker,detail:`Recovered shortage for ${P.design} (Lot: ${P.lotNo}): B:${X} H:${Y}`,amount:0}),r("    !"))},Jn=P=>{var ne,q;P.preventDefault();const X=P.target,Y={...p,worker:X.worker.value,design:X.design.value,color:X.color.value,lotNo:X.lotNo.value,size:X.size.value,issueBorka:Number(X.iBorka.value),issueHijab:Number(X.iHijab.value),receivedBorka:Number(((ne=X.rBorka)==null?void 0:ne.value)||p.receivedBorka||0),receivedHijab:Number(((q=X.rHijab)==null?void 0:q.value)||p.receivedHijab||0),status:X.status.value,rate:Number(X.rate.value),note:X.note.value};n(Z=>({...Z,productions:Z.productions.map(je=>je.id===Y.id?Y:je)})),y(null),r("    (Admin Power)!")},ls=P=>{confirm("    ? ( )")&&(n(X=>({...X,productions:X.productions.filter(Y=>Y.id!==P)})),r("   !"))},cs=P=>{let X=0;(e.productions||[]).filter(q=>q.worker===P&&q.status==="Received"&&q.type===o).forEach(q=>{const Z=e.designs.find(fe=>fe.name===q.design),je=q.type==="stone"?(Z==null?void 0:Z.stoneRate)||0:(Z==null?void 0:Z.sewingRate)||0,be=Number(q.rate||je);X+=(Number(q.receivedBorka||0)+Number(q.receivedHijab||0))*be});const ne=(e.workerPayments||[]).filter(q=>q.worker===P&&q.dept===o).reduce((q,Z)=>q+Number(Z.amount),0);return X-ne},Xn=P=>{P.preventDefault();const X=Number(P.target.amount.value),Y=P.target.date.value?new Date(P.target.date.value).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB");if(X<=0)return;const ne={id:Date.now(),date:Y,worker:I,dept:o,amount:X,note:P.target.note.value};n(q=>({...q,workerPayments:[ne,...q.workerPayments||[]]})),Ot({type:"WORKER_PAYMENT",worker:I,amount:X,detail:`Payment from ${o} factory`}),A(null),r("  !")};return L?i.jsxs("div",{className:"min-h-screen bg-black text-white p-12 italic",children:[i.jsx("style",{children:"@media print { .no-print { display: none; } }"}),i.jsx("button",{onClick:()=>S(null),className:"no-print bg-white text-black px-10 py-4 font-black uppercase text-xs mb-4 rounded-full",children:" "}),i.jsxs("div",{className:"max-w-2xl mx-auto border border-white/20 p-16 rounded-3xl text-center bg-zinc-900 shadow-3xl",children:[i.jsx("h1",{className:"text-5xl font-black italic tracking-tighter mb-4",children:"NRZONE PRO"}),i.jsxs("p",{className:"text-sm font-black uppercase tracking-widest text-gray-500 mb-4",children:[o," FACTORY SLIP"]}),i.jsxs("div",{className:"space-y-8 text-left border-t border-white/10 pt-12",children:[i.jsxs("div",{className:"flex justify-between text-2xl font-black text-white",children:[i.jsx("span",{children:":"})," ",i.jsx("span",{children:L.worker})]}),i.jsxs("div",{className:"flex justify-between text-2xl font-black text-white",children:[i.jsx("span",{children:":"})," ",i.jsx("span",{children:L.design})]}),i.jsxs("div",{className:"flex justify-between text-2xl font-black text-white px-2 py-1 bg-white/10 rounded-lg",children:[i.jsx("span",{children:" :"})," ",i.jsxs("span",{children:["#",L.lotNo]})]}),i.jsxs("div",{className:"flex justify-between text-2xl font-black text-gray-500",children:[i.jsx("span",{children:"/:"})," ",i.jsxs("span",{children:[L.color," / ",L.size]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-12",children:[i.jsxs("div",{className:"bg-white text-black p-5 rounded-3xl",children:[i.jsx("p",{className:"text-xs font-black uppercase mb-2",children:"Issue Borka"}),i.jsx("p",{className:"text-5xl font-black italic",children:L.issueBorka})]}),i.jsxs("div",{className:"bg-zinc-800 p-5 rounded-3xl border border-white/5",children:[i.jsx("p",{className:"text-xs font-black uppercase mb-2 text-gray-400",children:"Issue Hijab"}),i.jsx("p",{className:"text-5xl font-black italic text-white",children:L.issueHijab})]})]})]})]})]}):i.jsxs("div",{className:"space-y-6 md:space-y-12 pb-24 animate-fade-up px-1 md:px-2 italic text-black font-outfit selection:bg-blue-600",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3 md:gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>a("Overview"),className:"p-4 bg-white text-black rounded-2xl border border-slate-100 shadow-sm hover:bg-black hover:text-white transition-all group",children:i.jsx(yt,{size:20,className:"group-hover:-translate-x-1 transition-transform"})}),i.jsxs("div",{className:"flex items-center gap-3 md:gap-3 bg-white p-4 md:p-4 rounded-xl md:rounded-3xl border-4 border-slate-50 shadow-2xl w-full md:w-auto",children:[i.jsx("div",{className:`p-4 md:p-4 ${o==="sewing"?"bg-indigo-600 shadow-indigo-500/20":"bg-amber-600 shadow-amber-500/20"} text-white rounded-[1.2rem] md:rounded-xl shadow-2xl rotate-3 transition-transform hover:rotate-0`,children:o==="sewing"?i.jsx(Mi,{size:28,strokeWidth:3,className:"md:w-[36px] md:h-[36px]"}):i.jsx(Io,{size:28,strokeWidth:3,className:"md:w-[36px] md:h-[36px]"})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl md:text-4xl font-black uppercase italic tracking-tighter leading-none text-black",children:[o==="sewing"?"Swing":"Stone"," ",i.jsx("span",{className:"text-slate-100",children:"Unit"})]}),i.jsxs("div",{className:"flex gap-3 mt-4",children:[i.jsx("button",{onClick:()=>c("sewing"),className:`text-xs font-bold font-black uppercase tracking-widest px-6 py-2 rounded-full border transition-all ${o==="sewing"?"bg-black text-white border-black shadow-xl":"text-slate-600 font-bold border-slate-50 hover:text-black"}`,children:"Sewing"}),i.jsx("button",{onClick:()=>c("stone"),className:`text-xs font-bold font-black uppercase tracking-widest px-6 py-2 rounded-full border transition-all ${o==="stone"?"bg-black text-white border-black shadow-xl":"text-slate-600 font-bold border-slate-50 hover:text-black"}`,children:"Stone"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl md:rounded-2xl px-8 py-5 md:px-12 md:py-8 flex flex-col items-center md:items-end border-4 border-slate-50 shadow-xl min-w-[260px] md:min-w-[300px] w-full md:w-auto relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:i.jsx(Ua,{size:80,className:o==="sewing"?"text-indigo-500":"text-amber-500"})}),i.jsx("p",{className:"text-[11px] font-bold md:text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest mb-1 md:mb-2",children:"FACTORY PIPELINE"}),i.jsxs("p",{className:`text-3xl md:text-5xl font-black italic tracking-tighter ${o==="sewing"?"text-indigo-600":"text-amber-600"} relative z-10`,children:[D.length.toLocaleString()," ",i.jsx("span",{className:"text-xs md:text-sm not-italic text-slate-400 font-bold",children:"AVAILABLE LOTS"})]})]})]}),(u==="active"||u==="history")&&i.jsxs("div",{className:"bg-white p-4 md:p-5 rounded-xl md:rounded-3xl border-4 border-slate-50 shadow-xl flex flex-col md:flex-row items-center justify-between gap-3 animate-fade-down group hover:border-black transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-4 md:p-4 ${o==="sewing"?"bg-indigo-600 shadow-indigo-500/20":"bg-amber-600 shadow-amber-500/20"} text-white rounded-[1.2rem] md:rounded-xl shadow-2xl`,children:i.jsx(Pt,{size:32,strokeWidth:3,className:"md:w-[40px] md:h-[40px]"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl md:text-3xl font-black uppercase italic tracking-tighter leading-none mb-2",children:"   "}),i.jsx("p",{className:"text-xs font-bold font-black tracking-widest text-slate-600 font-bold uppercase italic",children:"Assign Work to Production Hub"})]})]}),i.jsx("button",{onClick:()=>g(!0),className:`w-full md:w-auto px-12 py-5 md:py-8 ${o==="sewing"?"bg-indigo-600":"bg-amber-600"} text-white rounded-full font-black text-xl md:text-2xl uppercase tracking-[0.2em] shadow-2xl hover:scale-105 active:scale-95 transition-all flex items-center justify-center gap-3`,children:"  (Entry)"})]}),i.jsx("div",{className:"space-y-12",children:u==="payments"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Q.map((P,X)=>{const Y=cs(P);return i.jsxs("div",{className:"bg-white p-5 md:p-12 rounded-2xl md:rounded-3xl border-4 border-slate-50 shadow-2xl flex flex-col justify-between h-64 md:h-80 group hover:border-black transition-all relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 p-5 opacity-5 group-hover:opacity-10 transition-opacity",children:i.jsx(Yr,{size:120,className:"text-black"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-2xl md:text-4xl font-black italic uppercase leading-none mb-3 md:mb-4 text-black group-hover:translate-x-2 transition-transform",children:P}),i.jsx("p",{className:"text-[11px] font-bold md:text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest",children:"Total Due ()"})]}),i.jsxs("div",{className:"flex justify-between items-end relative z-10",children:[i.jsxs("div",{className:"flex items-baseline gap-2",children:[i.jsxs("p",{className:`text-4xl md:text-6xl font-black italic tracking-tighter leading-none ${Y>0?"text-black":"text-slate-400 font-bold"}`,children:["",f||x?Y.toLocaleString():"***"]}),Y>0&&i.jsx("span",{className:"text-xs font-bold font-black text-emerald-500 uppercase animate-pulse",children:"Payable"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>N(P),className:"p-4 md:p-4 bg-slate-50 text-slate-600 font-bold rounded-2xl md:rounded-3xl border border-slate-100 hover:bg-black hover:text-white transition-all shadow-sm",title:"View Ledger",children:i.jsx(Ua,{size:20,className:"md:w-[24px] md:h-[24px]"})}),(f||x)&&i.jsx("button",{onClick:()=>A(P),className:"p-4 md:p-4 bg-black text-white rounded-2xl md:rounded-3xl shadow-xl hover:rotate-12 transition-transform active:scale-95 border-b-[8px] border-zinc-900",children:i.jsx(Yr,{size:20,className:"md:w-[24px] md:h-[24px]"})})]})]})]},X)})}):i.jsx("div",{className:"space-y-6",children:(u==="active"?se:ce).length===0?i.jsxs("div",{className:"h-[400px] flex flex-col items-center justify-center text-slate-800 gap-3",children:[i.jsx(Fy,{size:80,strokeWidth:1,className:"opacity-10"}),i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-[0.8em] opacity-40",children:"Empty Archive   "})]}):(u==="active"?se:ce).map(P=>{const X=P.type==="sewing",Y=e.designs.find(J=>J.name===P.design),ne=(Y==null?void 0:Y.stoneRate)||0,q=(Y==null?void 0:Y.pataRate)||0,Z=e.productions.filter(J=>J.type==="sewing"&&J.design===P.design&&J.color===P.color&&J.size===P.size&&J.lotNo===P.lotNo).reduce((J,lt)=>J+(Number(lt.issueBorka||0)+Number(lt.issueHijab||0)),0),je=e.productions.filter(J=>J.type==="stone"&&J.status==="Received"&&J.design===P.design&&J.color===P.color&&J.size===P.size&&J.lotNo===P.lotNo).reduce((J,lt)=>J+Number(lt.receivedBorka||0),0),be=e.productions.filter(J=>J.type==="stone"&&J.status==="Received"&&J.design===P.design&&J.color===P.color&&J.size===P.size&&J.lotNo===P.lotNo).reduce((J,lt)=>J+Number(lt.receivedHijab||0),0),fe=je+be,pe=e.productions.filter(J=>J.type==="stone"&&J.design===P.design&&J.color===P.color&&J.size===P.size&&J.lotNo===P.lotNo).reduce((J,lt)=>J+(Number(lt.issueBorka||0)+Number(lt.issueHijab||0)),0),ue=(e.pataEntries||[]).filter(J=>J.status==="Received"&&J.design===P.design&&J.color===P.color&&J.lotNo===P.lotNo).reduce((J,lt)=>J+Number(lt.receivedQty||0),0),xe=e.productions.filter(J=>J.type==="stone"&&J.status==="Pending"&&J.design===P.design&&J.color===P.color&&J.size===P.size&&J.lotNo===P.lotNo).length,Yt=(e.pataEntries||[]).filter(J=>J.status==="Pending"&&J.design===P.design&&J.color===P.color&&J.lotNo===P.lotNo).length,Ae=e.productions.filter(J=>J.type==="stone"&&J.design===P.design&&J.color===P.color&&J.size===P.size&&J.lotNo===P.lotNo).reduce((J,lt)=>J+Number(lt.wastedBorka||0),0),ln=e.productions.filter(J=>J.type==="stone"&&J.design===P.design&&J.color===P.color&&J.size===P.size&&J.lotNo===P.lotNo).reduce((J,lt)=>J+Number(lt.wastedHijab||0),0),Jt=ne===0||xe===0&&(pe>0||fe>0),tt=q===0||ue>=Z&&Yt===0&&ue>0,Xt=X&&ne>0&&!Jt,ta=Z-(ne>0?fe:q>0?ue:Z);return i.jsxs("div",{className:"bg-white p-4 md:p-4 rounded-xl md:rounded-3xl border-4 border-slate-50 shadow-2xl flex items-center justify-between group hover:border-black transition-all relative overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-3",children:[i.jsx("div",{className:"flex items-center justify-center bg-slate-50 text-black w-14 h-14 md:w-20 md:h-20 rounded-lg md:rounded-2xl font-black italic text-xl md:text-3xl border border-slate-100 shadow-xl group-hover:rotate-6 transition-transform",children:P.size}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-xl md:text-3xl font-black italic uppercase leading-none mb-2 text-black",children:[P.design," ",i.jsxs("span",{className:"text-xs font-bold bg-slate-100 text-slate-600 font-bold px-3 py-1 rounded-full not-italic ml-2 uppercase tracking-widest select-none",children:["#",P.lotNo]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[i.jsxs("p",{className:"text-[11px] font-bold md:text-[11px] font-black text-slate-600 font-bold uppercase tracking-widest flex items-center gap-2",children:[i.jsx(Wy,{size:12})," ",P.worker]}),i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-100"}),i.jsx("p",{className:"text-[11px] font-bold md:text-[11px] font-black text-slate-600 font-bold uppercase tracking-widest",children:P.color}),i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-100"}),i.jsx("p",{className:"text-[11px] font-bold md:text-[11px] font-black text-slate-600 font-bold uppercase tracking-widest",children:P.date})]}),P.note&&i.jsx("p",{className:"text-[11px] font-bold font-black text-indigo-500 uppercase tracking-widest mt-2 bg-indigo-50 px-2 py-1 rounded-lg border border-indigo-100 inline-block",children:P.note}),P.receiveDate&&i.jsxs("p",{className:"text-[11px] font-bold font-black text-emerald-500 uppercase tracking-[0.3em] mt-3 flex items-center gap-2 animate-pulse",children:[i.jsx(nu,{size:10})," REC: ",P.receiveDate]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-3 md:gap-16",children:[i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-end gap-3 justify-end leading-none",children:[i.jsx("p",{className:"text-2xl md:text-5xl font-black italic text-black uppercase tracking-tighter",children:P.receivedBorka||P.issueBorka}),i.jsxs("p",{className:"text-xs font-bold md:text-xs font-black text-slate-600 font-bold uppercase mb-1 md:mb-2",children:[P.status==="Received"?"Rec.":"Iss."," Borka"]})]}),i.jsxs("div",{className:"flex items-end gap-3 justify-end leading-none mt-2",children:[i.jsx("p",{className:"text-lg md:text-3xl font-black italic text-indigo-600 uppercase tracking-tighter",children:P.receivedHijab||P.issueHijab}),i.jsx("p",{className:"text-[8px] md:text-xs font-bold font-black text-slate-500 font-bold uppercase mb-1",children:"Hijab"})]}),P.pataQty>0&&i.jsxs("p",{className:"text-[11px] font-bold font-black text-amber-500 uppercase mt-4 tracking-widest bg-amber-50 px-3 py-1 rounded-full border border-amber-100 inline-block",children:["PATA: ",P.pataQty," PCS"]})]}),i.jsxs("div",{className:"flex gap-3",children:[P.status==="Pending"?i.jsxs("div",{className:"flex flex-col items-end gap-3",children:[X&&(ne>0||q>0)&&i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[ne>0&&i.jsxs("div",{className:`text-[11px] font-bold font-black px-4 py-1.5 rounded-2xl border flex items-center gap-3 transition-all ${Jt?"bg-emerald-50 text-emerald-500 border-emerald-100 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-rose-50 text-rose-500 border-rose-100"}`,children:[i.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Jt?"bg-emerald-500":"bg-rose-500 animate-pulse"}`}),"STONE: ",fe," / ",Z]}),q>0&&i.jsxs("div",{className:`text-[11px] font-bold font-black px-4 py-1.5 rounded-2xl border flex items-center gap-3 transition-all ${tt?"bg-blue-50 text-blue-500 border-blue-100":"bg-rose-50 text-rose-500 border-rose-100"}`,children:[i.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${tt?"bg-blue-500":"bg-rose-500 animate-pulse"}`}),"PATA: ",ue," / ",Z]}),ta>0&&i.jsxs("span",{className:"text-[8px] font-black text-rose-500 uppercase italic bg-rose-50 px-4 py-1.5 rounded-full border border-rose-100 flex items-center gap-2 animate-bounce",children:[i.jsx(fo,{size:10})," ",ta," PSC WASTED"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[f&&Xt&&i.jsx("button",{onClick:()=>confirm("Force Receive?")&&E({...P,stoneB:je,stoneH:be,stoneW_B:Ae,stoneW_H:ln,hasStone:ne>0}),className:"px-8 py-4 rounded-full font-black text-xs font-bold uppercase tracking-widest bg-amber-500 text-white shadow-2xl",children:"Force Rec."}),i.jsx("button",{onClick:()=>E({...P,stoneB:je,stoneH:be,stoneW_B:Ae,stoneW_H:ln,hasStone:ne>0}),disabled:Xt,className:`px-10 py-5 rounded-full font-black text-[11px] uppercase tracking-widest shadow-2xl transition-all ${Xt?"bg-slate-50 text-slate-500 font-bold border border-slate-100 cursor-not-allowed italic":"bg-black text-white hover:scale-105 active:scale-95 border-b-[8px] border-zinc-900"}`,children:Xt?"Waiting":"RECEIVE ()"})]})]}):i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i.jsx("p",{className:`${P.status==="Partial"?"text-rose-500":"text-emerald-500"} font-black italic text-2xl md:text-4xl tracking-tighter leading-none select-none`,children:P.status==="Partial"?"SHORTAGE":"COMPLETED"}),P.status==="Partial"&&i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsxs("p",{className:"text-xs font-bold font-black text-rose-500 uppercase tracking-widest bg-rose-50 px-2 py-1 rounded border border-rose-100",children:["Shortage: B:",P.shortageBorka," / H:",P.shortageHijab]}),i.jsx("button",{onClick:()=>j(P),className:"px-4 py-1.5 bg-rose-500 text-white rounded-full text-[11px] font-bold font-black uppercase tracking-widest shadow-lg hover:scale-105 active:scale-95 transition-all",children:"  "})]}),f&&i.jsxs("p",{className:"text-[8px] text-slate-600 font-bold uppercase font-black tracking-widest mt-1",children:["Rec: ",P.receivedBorka+P.receivedHijab," Pcs"]})]}),i.jsxs("div",{className:"flex gap-3",children:[f&&i.jsx("button",{onClick:()=>y(P),className:"p-4 md:p-4 bg-slate-50 text-black rounded-2xl md:rounded-xl border-2 border-slate-100 hover:bg-black hover:text-white transition-all shadow-sm",children:i.jsx(zi,{size:20,className:"md:w-[24px] md:h-[24px]"})}),i.jsx("button",{onClick:()=>S(P),className:"p-4 md:p-4 bg-slate-50 text-slate-600 font-bold rounded-2xl md:rounded-xl border-2 border-slate-100 hover:text-black hover:bg-slate-50 transition-all shadow-sm",children:i.jsx(Vi,{size:20,className:"md:w-[24px] md:h-[24px]"})})]})]})]})]},P.id)})})}),T&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[350] flex items-center justify-center p-2 md:p-4 text-black italic",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-3xl w-full max-w-5xl border-4 border-white shadow-3xl animate-fade-up max-h-[96vh] flex flex-col overflow-hidden italic font-outfit",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 md:p-4 border-b-2 border-slate-50 bg-white flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-3",children:[i.jsx("div",{className:"p-4 bg-black text-white rounded-[1.2rem] md:rounded-lg shadow-xl rotate-3",children:i.jsx(kh,{size:28})}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("h3",{className:"text-2xl md:text-4xl font-black uppercase tracking-tighter italic",children:"  "}),i.jsx("p",{className:"text-[11px] font-bold text-slate-600 font-bold font-black uppercase tracking-widest mt-1 italic",children:"Assign Work to Production Hub"})]}),i.jsx("div",{className:"sm:hidden",children:i.jsx("h3",{className:"text-xl font-black uppercase tracking-tighter italic leading-none",children:" "})})]}),i.jsx("button",{onClick:()=>g(!1),className:"p-4 md:p-4 bg-slate-50 rounded-full hover:bg-black hover:text-white transition-all",children:i.jsx(Bt,{size:28})})]}),i.jsxs("form",{onSubmit:Qt,className:"flex-1 overflow-y-auto p-4 md:p-4 space-y-10 custom-scrollbar",children:[ae.design&&ae.color&&i.jsxs("div",{className:"bg-black text-white p-4 rounded-xl flex flex-wrap gap-3 items-center justify-around shadow-2xl animate-fade-down",children:[i.jsxs("div",{className:"text-center px-4",children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-widest text-slate-600 font-bold mb-1",children:"Live Body Stock"}),i.jsxs("p",{className:"text-3xl font-black italic tracking-tighter",children:[D.filter(X=>X.design===ae.design&&X.color===ae.color).reduce((X,Y)=>X+Y.totalAvailable,0)," Pcs"]})]}),o==="stone"&&i.jsxs("div",{className:"text-center px-4 border-l border-white/10",children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-widest text-amber-500 mb-1",children:"Live Pata Stock"}),i.jsxs("p",{className:"text-3xl font-black italic tracking-tighter text-amber-500",children:[Lx(e,ae.design,ae.color,ae.pataType)," Pcs"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-3",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 tracking-widest italic flex items-center gap-2",children:[i.jsx("div",{className:"w-1 h-3 bg-black rounded-full"}),"  (Worker)"]}),i.jsxs("select",{className:"w-full text-lg md:text-xl font-black py-5 md:py-6 bg-slate-50 border-none rounded-lg md:rounded-xl px-6 md:px-8 focus:ring-4 focus:ring-black/5 outline-none text-black italic transition-all appearance-none",onChange:P=>ve(P.target.value),value:ae.worker,children:[i.jsx("option",{value:"",children:"SELECT WORKER"}),(((ea=e.workerCategories)==null?void 0:ea[o])||[]).map(P=>i.jsx("option",{value:P,children:P},P))]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 tracking-widest italic flex items-center gap-2",children:[i.jsx("div",{className:"w-1 h-3 bg-black rounded-full"}),"   (Lot Selection)"]}),i.jsxs("select",{className:"w-full text-lg md:text-xl font-black py-5 md:py-6 bg-slate-50 border-none rounded-lg md:rounded-xl px-6 md:px-8 focus:ring-4 focus:ring-black/5 outline-none text-black italic transition-all appearance-none",onChange:P=>U(P.target.value),value:z,children:[i.jsx("option",{value:"",children:"CHOOSE LOT"}),D.map(P=>i.jsxs("option",{value:`${P.design}|${P.color}|${P.lotNo}`,children:["#",P.lotNo," - ",P.design," (",P.color,")"]},`${P.design}|${P.color}|${P.lotNo}`))]})]}),f&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 tracking-widest italic",children:"Wage Rate Override"}),i.jsx("input",{type:"number",className:"w-full text-lg md:text-xl font-black py-5 md:py-6 bg-slate-50 text-emerald-600 border-none rounded-lg md:rounded-xl px-6 md:px-8 focus:ring-4 focus:ring-emerald-500/10 outline-none italic transition-all placeholder:text-slate-400 font-bold",value:ae.rate,onChange:P=>Ge({...ae,rate:P.target.value})})]}),o==="stone"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 tracking-widest italic flex items-center gap-2",children:[i.jsx("div",{className:"w-1 h-3 bg-amber-500 rounded-full"}),"   (Pata Type)"]}),i.jsx("select",{className:"w-full text-lg md:text-xl font-black py-5 md:py-6 bg-amber-50 text-amber-600 border-none rounded-lg md:rounded-xl px-6 md:px-8 focus:ring-4 focus:ring-amber-500/10 outline-none italic transition-all appearance-none",onChange:P=>Ge({...ae,pataType:P.target.value}),value:ae.pataType,children:(e.pataTypes||[]).map(P=>i.jsx("option",{value:P,children:P},P))})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 md:p-4 rounded-lg md:rounded-xl border border-slate-100 shadow-sm",children:[i.jsxs("p",{className:"text-xs md:text-sm font-black uppercase text-black tracking-widest italic",children:["Size Matrix ",i.jsx("span",{className:"text-[11px] font-bold font-bold text-slate-400 font-bold mt-1 sm:hidden",children:" "})]}),i.jsxs("div",{className:"flex gap-2 md:gap-3",children:[i.jsx("button",{type:"button",onClick:Kt,className:"px-4 py-2 bg-white text-black border-2 border-slate-100 rounded-full font-black text-[11px] font-bold md:text-xs font-bold uppercase hover:bg-black hover:text-white transition-all shadow-sm",children:"Bulk Load"}),i.jsx("button",{type:"button",onClick:Ce,className:"p-3 md:p-4 bg-black text-white rounded-xl md:rounded-2xl shadow-xl hover:scale-110 transition-transform",children:i.jsx(Pt,{size:18})})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-3",children:wt.map((P,X)=>i.jsxs("div",{className:"bg-white p-4 md:p-5 rounded-2xl md:rounded-3xl border-4 border-slate-50 space-y-6 relative group/row hover:border-black transition-all shadow-sm italic",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold mb-2 uppercase tracking-widest italic",children:"Size"}),i.jsxs("select",{className:"w-full bg-slate-50 text-black border-none rounded-2xl px-6 py-4 text-xl font-black italic outline-none focus:ring-4 focus:ring-black/5 appearance-none",value:P.size,onChange:Y=>Ze(X,"size",Y.target.value),children:[i.jsx("option",{value:"",children:"--"}),e.sizes.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]}),i.jsx("button",{type:"button",onClick:()=>Ct(X),className:"p-3 text-rose-500 hover:bg-rose-50 rounded-xl transition-all ml-4 border border-slate-100",children:i.jsx(H_,{size:18})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-[11px] font-bold font-black text-slate-600 font-bold tracking-widest text-center uppercase",children:"Borka"}),i.jsx("input",{type:"number",className:"w-full h-14 text-center text-2xl font-black bg-slate-50 rounded-xl border-none focus:ring-2 focus:ring-black/5",placeholder:"0",value:P.borka,onChange:Y=>Ze(X,"borka",Y.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-[11px] font-bold font-black text-indigo-400 tracking-widest text-center uppercase",children:"Hijab"}),i.jsx("input",{type:"number",className:"w-full h-14 text-center text-2xl font-black bg-indigo-50/50 text-indigo-600 rounded-xl border-none focus:ring-2 focus:ring-indigo-100",placeholder:"0",value:P.hijab,onChange:Y=>Ze(X,"hijab",Y.target.value)})]})]}),o==="stone"&&i.jsxs("div",{className:"space-y-1 bg-amber-50 p-4 rounded-2xl border border-amber-100/50",children:[i.jsx("p",{className:"text-[11px] font-bold font-black text-amber-500 tracking-widest text-center uppercase",children:"Pata Pcs"}),i.jsx("input",{type:"number",className:"w-full h-14 text-center text-3xl font-black bg-white text-amber-500 rounded-xl border-2 border-amber-100 outline-none",placeholder:"0",value:P.pataQty,onChange:Y=>Ze(X,"pataQty",Y.target.value)})]}),P.size&&i.jsx("div",{className:"bg-slate-50 rounded-lg p-4 flex justify-around border border-slate-100",children:(()=>{const Y=He(P.size);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[8px] font-black text-slate-600 font-bold uppercase mb-1",children:"Stock B"}),i.jsx("p",{className:"text-lg font-black text-black",children:Y.borka})]}),i.jsxs("div",{className:"text-center border-l border-slate-200 pl-4",children:[i.jsx("p",{className:"text-[8px] font-black text-indigo-400 uppercase mb-1",children:"Stock H"}),i.jsx("p",{className:"text-lg font-black text-indigo-600",children:Y.hijab})]}),o==="stone"&&i.jsxs("div",{className:"text-center border-l border-slate-200 pl-4",children:[i.jsx("p",{className:"text-[8px] font-black text-amber-500 uppercase mb-1",children:"Pata Live"}),i.jsx("p",{className:"text-lg font-black text-amber-600",children:Y.pata})]})]})})()})]},X))})]})]}),i.jsxs("div",{className:"p-4 md:p-4 border-t-2 border-slate-50 bg-white flex flex-col md:flex-row gap-3 md:gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-6 md:py-8 bg-slate-50 text-slate-600 font-bold rounded-full font-black uppercase text-xs tracking-widest hover:text-black transition-all",children:"Cancel"}),i.jsxs("button",{onClick:Qt,className:`flex-[3] py-6 md:py-8 ${o==="sewing"?"bg-indigo-600 shadow-indigo-500/20":"bg-amber-600 shadow-amber-500/20"} text-white rounded-full font-black text-2xl uppercase tracking-[0.2em] shadow-2xl hover:scale-[1.01] active:scale-95 transition-all flex items-center justify-center gap-3`,children:[i.jsx(kh,{size:24}),"   (Save)"]})]})]})}),b&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[400] flex items-center justify-center p-2 md:p-4 text-black italic",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-3xl w-full max-w-4xl border-4 border-white shadow-3xl animate-fade-up max-h-[96vh] flex flex-col overflow-hidden italic font-outfit",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 md:p-4 border-b-2 border-slate-50 bg-white flex-shrink-0",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl md:text-5xl font-black uppercase tracking-tighter italic leading-none",children:"  "}),i.jsxs("p",{className:"text-[11px] font-bold md:text-xs font-bold text-slate-600 font-bold font-black uppercase tracking-widest mt-2",children:[b.design,"  ",b.color,"  LOT ",b.lotNo]})]}),i.jsx("button",{onClick:()=>E(null),className:"p-4 md:p-4 bg-slate-50 rounded-full hover:bg-black hover:text-white transition-all text-black",children:i.jsx(Bt,{size:28})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-12 space-y-10 custom-scrollbar",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-3",children:[i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 tracking-widest",children:"  (Borka Rec.)"}),i.jsx("input",{type:"number",className:"w-full text-4xl md:text-6xl font-black py-8 md:py-12 bg-slate-50 border-none rounded-xl md:rounded-2xl text-center focus:ring-4 focus:ring-black/5 outline-none transition-all placeholder:text-slate-400 font-bold",value:b.recB||"",placeholder:b.issueBorka,onChange:P=>E({...b,recB:P.target.value}),autoFocus:!0}),i.jsxs("p",{className:"text-xs font-bold text-center font-black text-slate-400 font-bold uppercase italic",children:["Issued: ",b.issueBorka," Pcs"]})]}),i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 tracking-widest",children:"  (Hijab Rec.)"}),i.jsx("input",{type:"number",className:"w-full text-4xl md:text-6xl font-black py-8 md:py-12 bg-slate-50 border-none rounded-xl md:rounded-2xl text-center focus:ring-4 focus:ring-black/5 outline-none transition-all placeholder:text-slate-400 font-bold",value:b.recH||"",placeholder:b.issueHijab,onChange:P=>E({...b,recH:P.target.value})}),i.jsxs("p",{className:"text-xs font-bold text-center font-black text-slate-400 font-bold uppercase italic",children:["Issued: ",b.issueHijab," Pcs"]})]})]}),b.hasStone&&i.jsxs("div",{className:"bg-emerald-50 p-4 md:p-4 rounded-xl md:rounded-3xl border-2 border-emerald-100/50 space-y-8",children:[i.jsx("div",{className:"text-center",children:i.jsx("div",{className:"inline-block px-10 py-3 bg-white text-emerald-500 rounded-full font-black uppercase text-xs font-bold tracking-[0.4em] shadow-sm border border-emerald-100 italic",children:"Stone Unit Verification"})}),i.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-3 divide-x-2 divide-emerald-100",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[8px] font-black text-emerald-400 uppercase mb-2 tracking-widest",children:"Stone Rec. B"}),i.jsx("p",{className:"text-xl md:text-4xl font-black text-emerald-600 italic leading-none",children:b.stoneB})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[8px] font-black text-emerald-400 uppercase mb-2 tracking-widest",children:"Stone Rec. H"}),i.jsx("p",{className:"text-xl md:text-4xl font-black text-emerald-600 italic leading-none",children:b.stoneH})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[8px] font-black text-rose-400 uppercase mb-2 tracking-widest",children:"Stone Waste"}),i.jsx("p",{className:"text-xl md:text-4xl font-black text-rose-500 italic leading-none",children:b.stoneW_B+b.stoneW_H})]})]})]}),i.jsx("div",{className:"bg-slate-50/50 p-5 rounded-2xl border-2 border-dashed border-slate-100 text-center",children:i.jsxs("p",{className:"text-xs font-bold font-black text-slate-500 font-bold uppercase tracking-widest leading-relaxed italic",children:["  (Shortage)  /    ",i.jsx("br",{}),'   "  "   ']})})]}),i.jsxs("div",{className:"p-4 md:p-12 border-t-2 border-slate-50 bg-white flex flex-col md:flex-row gap-3 md:gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>E(null),className:"flex-1 py-6 md:py-10 bg-slate-50 text-slate-600 font-bold rounded-full font-black uppercase text-xs font-bold md:text-xs tracking-widest hover:text-black transition-all order-2 md:order-1",children:" (Cancel)"}),i.jsx("button",{onClick:handleReceive,className:"flex-[3] py-6 md:py-10 bg-black text-white rounded-full font-black uppercase text-xl md:text-3xl tracking-[0.2em] shadow-2xl border-b-[16px] border-zinc-900 hover:scale-[1.01] active:scale-95 transition-all order-1 md:order-2",children:"  "})]})]})}),O&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-3xl z-[400] flex items-center justify-center p-2 md:p-4 text-black italic font-outfit",children:i.jsxs("div",{className:"bg-white w-full max-w-5xl md:max-h-[96vh] rounded-2xl md:rounded-[4.5rem] border-4 border-white shadow-3xl flex flex-col overflow-hidden italic animate-fade-up",children:[i.jsxs("div",{className:"p-4 md:p-12 border-b-2 border-slate-50 flex justify-between items-center bg-white flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-3",children:[i.jsx("div",{className:"p-4 md:p-4 bg-black text-white rounded-[1.2rem] md:rounded-[2.2rem] shadow-xl rotate-3",children:i.jsx(Ua,{size:32,className:"md:w-[40px] md:h-[40px]"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-2xl md:text-5xl font-black uppercase tracking-tighter italic leading-none",children:[O," ",i.jsx("span",{className:"text-indigo-400",children:"Ledger"})]}),i.jsxs("p",{className:"text-xs font-bold text-slate-600 font-bold font-black uppercase tracking-widest mt-2",children:[o==="sewing"?"Sewing":"Stone"," Unit History"]})]})]}),i.jsx("button",{onClick:()=>N(null),className:"p-4 md:p-4 bg-slate-50 rounded-full hover:bg-black hover:text-white transition-all text-black",children:i.jsx(Bt,{size:28})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-12 space-y-12 custom-scrollbar",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-12",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"}),i.jsx("h4",{className:"text-xs font-black uppercase tracking-[0.2em] text-indigo-400 italic",children:"Production Records"})]}),i.jsx("div",{className:"space-y-4",children:e.productions.filter(P=>P.worker===O&&P.status==="Received"&&P.type===o).map((P,X)=>i.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg md:rounded-xl border border-slate-100 flex justify-between items-center group hover:border-black transition-all",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-black text-sm md:text-lg uppercase italic",children:[P.design," ",i.jsxs("span",{className:"text-xs font-bold text-slate-500 font-bold",children:["#",P.lotNo]})]}),i.jsx("p",{className:"text-xs font-bold text-slate-600 font-bold uppercase italic mt-1",children:P.receiveDate||P.date})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-black italic text-xl md:text-2xl text-black",children:[(Number(P.receivedBorka||0)+Number(P.receivedHijab||0)).toLocaleString()," Pcs"]}),i.jsxs("p",{className:"text-xs font-bold text-indigo-400 uppercase font-black italic",children:["Rate: ",P.rate]})]})]},X))})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-1.5 h-6 bg-emerald-500 rounded-full"}),i.jsx("h4",{className:"text-xs font-black uppercase tracking-[0.2em] text-emerald-400 italic",children:"Payment Records"})]}),i.jsx("div",{className:"space-y-4",children:e.workerPayments.filter(P=>P.worker===O&&P.dept===o).map((P,X)=>i.jsxs("div",{className:"bg-emerald-50/30 p-4 rounded-lg md:rounded-xl border border-emerald-100 flex justify-between items-center group hover:border-emerald-500 transition-all",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-black text-sm md:text-lg uppercase italic text-emerald-600",children:"Payment Out"}),i.jsx("p",{className:"text-xs font-bold text-emerald-300 uppercase italic mt-1",children:P.date}),P.note&&i.jsx("p",{className:"text-[11px] font-bold text-emerald-400 italic mt-2 leading-tight uppercase font-black",children:P.note})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"font-black italic text-2xl md:text-4xl text-emerald-500 tracking-tighter",children:["",P.amount.toLocaleString()]})})]},X))})]})]})}),i.jsxs("div",{className:"p-5 md:p-14 bg-black border-t-4 border-zinc-900 flex flex-col md:flex-row justify-between items-center gap-3 flex-shrink-0 animate-fade-up",children:[i.jsxs("div",{className:"flex flex-col items-center md:items-start gap-1",children:[i.jsx("p",{className:"text-zinc-600 uppercase tracking-[0.4em] text-xs font-bold font-black italic leading-none mb-1",children:"Total Available Balance (Due)"}),i.jsxs("p",{className:"text-4xl md:text-7xl font-black italic tracking-tighter text-white leading-none",children:["",cs(O).toLocaleString()]})]}),i.jsx("button",{onClick:()=>{N(null),A(O)},className:"w-full md:w-auto px-16 py-6 md:py-10 bg-white text-black rounded-full font-black text-sm md:text-xl uppercase tracking-widest shadow-2xl hover:bg-emerald-500 hover:text-white transition-all transform hover:scale-105 active:scale-95",children:"  (Pay Now)"})]})]})}),p&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[400] flex items-center justify-center p-2 md:p-4 text-black italic animate-fade-up",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-[4.5rem] w-full max-w-4xl border-4 border-white shadow-3xl overflow-hidden flex flex-col font-outfit max-h-[96vh]",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 md:p-4 border-b-2 border-slate-50 bg-white flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-3 text-left",children:[i.jsx("div",{className:"p-4 md:p-4 bg-amber-500 text-white rounded-[1.2rem] md:rounded-xl shadow-xl rotate-3",children:i.jsx(zi,{size:32,className:"md:w-[40px] md:h-[40px]"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-2xl md:text-5xl font-black uppercase tracking-tighter italic text-black leading-none",children:["Admin ",i.jsx("span",{className:"text-amber-600",children:"Override"})]}),i.jsxs("p",{className:"text-[11px] font-bold md:text-xs font-bold font-black text-slate-600 font-bold tracking-[0.4em] uppercase mt-1 italic leading-none",children:["Entry ID: ",p.id]})]})]}),i.jsx("button",{onClick:()=>y(null),className:"p-4 md:p-4 bg-slate-50 rounded-full hover:bg-black hover:text-white transition-all text-black",children:i.jsx(Bt,{size:24})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 md:p-12 space-y-10 custom-scrollbar italic font-black",children:i.jsxs("form",{id:"editForm",onSubmit:Jn,className:"space-y-10 uppercase",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-3",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest uppercase",children:"Worker"}),i.jsx("select",{name:"worker",defaultValue:p.worker,className:"w-full text-xl md:text-2xl py-6 md:py-8 bg-slate-50 border border-slate-100 rounded-lg md:rounded-2xl px-8 focus:border-black outline-none appearance-none shadow-sm text-black",children:(ot=(et=e.workerCategories)==null?void 0:et[o])==null?void 0:ot.map(P=>i.jsx("option",{value:P,children:P},P))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest uppercase",children:"Design"}),i.jsx("select",{name:"design",defaultValue:p.design,className:"w-full text-xl md:text-2xl py-6 md:py-8 bg-slate-50 border border-slate-100 rounded-lg md:rounded-2xl px-8 focus:border-black outline-none appearance-none shadow-sm text-black",children:e.designs.map(P=>i.jsx("option",{value:P.name,children:P.name},P.name))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest uppercase",children:"Color"}),i.jsx("select",{name:"color",defaultValue:p.color,className:"w-full text-xl md:text-2xl py-6 md:py-8 bg-slate-50 border border-slate-100 rounded-lg md:rounded-2xl px-8 focus:border-black outline-none appearance-none shadow-sm text-black",children:e.colors.map(P=>i.jsx("option",{value:P,children:P},P))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-3",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest uppercase",children:"Lot No"}),i.jsx("input",{name:"lotNo",defaultValue:p.lotNo,className:"w-full text-xl md:text-3xl py-6 md:py-8 bg-slate-50 border border-slate-100 rounded-lg md:rounded-2xl px-6 text-center focus:border-black outline-none shadow-sm text-black"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest uppercase",children:"Size"}),i.jsx("select",{name:"size",defaultValue:p.size,className:"w-full text-xl md:text-3xl py-6 md:py-8 bg-slate-50 border border-slate-100 rounded-lg md:rounded-2xl px-6 text-center focus:border-black outline-none appearance-none shadow-sm text-black",children:e.sizes.map(P=>i.jsx("option",{value:P,children:P},P))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest uppercase",children:"Wage Rate"}),i.jsx("input",{name:"rate",type:"number",defaultValue:p.rate,className:"w-full text-xl md:text-3xl py-6 md:py-8 bg-emerald-50 text-emerald-600 border-none rounded-lg md:rounded-2xl px-6 text-center focus:ring-4 focus:ring-emerald-100 shadow-inner"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest uppercase",children:"Status"}),i.jsxs("select",{name:"status",defaultValue:p.status,className:"w-full text-xl md:text-3xl py-6 md:py-8 bg-black text-white border-none rounded-lg md:rounded-2xl px-6 text-center focus:ring-4 focus:ring-black/5 outline-none appearance-none",children:[i.jsx("option",{value:"Pending",children:"PENDING"}),i.jsx("option",{value:"Received",children:"RECEIVED"})]})]})]}),i.jsxs("div",{className:"bg-slate-50/50 p-5 md:p-14 rounded-2xl md:rounded-[4.5rem] border-2 border-dashed border-slate-100 grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-14 shadow-sm animate-fade-up",children:[i.jsxs("div",{className:"space-y-4 text-center",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 font-bold uppercase tracking-widest font-black italic block leading-none",children:"Issue Borka"}),i.jsx("input",{name:"iBorka",type:"number",defaultValue:p.issueBorka,className:"w-full text-center text-3xl md:text-6xl font-black bg-transparent border-none outline-none text-black leading-none italic"})]}),i.jsxs("div",{className:"space-y-4 text-center",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 font-bold uppercase tracking-widest font-black italic block leading-none",children:"Issue Hijab"}),i.jsx("input",{name:"iHijab",type:"number",defaultValue:p.issueHijab,className:"w-full text-center text-3xl md:text-6xl font-black bg-transparent border-none outline-none text-black leading-none italic"})]}),i.jsxs("div",{className:"space-y-4 text-center",children:[i.jsx("label",{className:"text-xs font-bold text-emerald-400 uppercase tracking-widest font-black italic block leading-none",children:"Rec. Borka"}),i.jsx("input",{name:"rBorka",type:"number",defaultValue:p.receivedBorka,className:"w-full text-center text-3xl md:text-6xl font-black bg-transparent border-none outline-none text-emerald-500 leading-none italic"})]}),i.jsxs("div",{className:"space-y-4 text-center",children:[i.jsx("label",{className:"text-xs font-bold text-emerald-400 uppercase tracking-widest font-black italic block leading-none",children:"Rec. Hijab"}),i.jsx("input",{name:"rHijab",type:"number",defaultValue:p.receivedHijab,className:"w-full text-center text-3xl md:text-6xl font-black bg-transparent border-none outline-none text-emerald-500 leading-none italic"})]})]}),i.jsxs("div",{className:"space-y-4 pb-8",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest uppercase",children:"Special Note ()"}),i.jsx("textarea",{name:"note",defaultValue:p.note,className:"w-full h-32 md:h-40 bg-slate-50 border border-slate-100 rounded-xl md:rounded-2xl p-5 md:p-12 focus:border-black outline-none italic font-black shadow-sm text-xl text-black",placeholder:"  ..."})]})]})}),i.jsxs("div",{className:"p-4 md:p-12 border-t-2 border-slate-50 bg-white flex flex-col md:flex-row gap-3 md:gap-3 flex-shrink-0 font-black italic",children:[i.jsx("button",{onClick:()=>y(null),className:"flex-1 py-6 md:py-10 bg-slate-50 text-slate-600 font-bold rounded-full uppercase text-xs tracking-widest hover:text-black transition-all order-2 md:order-1",children:" (Cancel)"}),i.jsx("button",{form:"editForm",type:"submit",className:"flex-[3] py-6 md:py-10 bg-black text-white rounded-full uppercase text-xl md:text-3xl tracking-[0.2em] shadow-2xl border-b-[16px] border-zinc-900 hover:scale-[1.01] transition-all order-1 md:order-2",children:"  "}),i.jsx("button",{type:"button",onClick:()=>confirm("Delete Permanently?")&&ls(p.id),className:"w-full md:w-auto p-5 md:p-4 bg-rose-50 text-rose-500 rounded-xl md:rounded-full hover:bg-rose-500 hover:text-white transition-all shadow-xl group order-3",children:i.jsx(zn,{size:32,className:"group-hover:scale-110 transition-transform"})})]})]})}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[400] flex items-center justify-center p-2 md:p-4 text-black italic animate-fade-up",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-[4.5rem] w-full max-w-xl border-4 border-white shadow-3xl overflow-hidden flex flex-col font-outfit max-h-[96vh]",children:[i.jsxs("div",{className:"p-5 md:p-14 text-center bg-white border-b-2 border-slate-50 flex-shrink-0",children:[i.jsx("h3",{className:"text-3xl md:text-6xl font-black uppercase italic text-black leading-none mb-4 tracking-tighter",children:" "}),i.jsx("div",{className:"inline-block px-8 py-3 bg-black text-white rounded-full text-xs font-bold md:text-sm tracking-[0.4em] uppercase font-black italic",children:I})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-16 space-y-12 custom-scrollbar italic font-black",children:i.jsxs("form",{id:"paymentForm",onSubmit:Xn,className:"space-y-12",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest text-center block leading-none mb-2",children:" (Date)"}),i.jsx("input",{name:"date",type:"date",className:"w-full py-6 bg-slate-50 border border-slate-100 rounded-lg md:rounded-2xl text-[12px] md:text-lg font-black italic px-8 text-black focus:border-black outline-none shadow-sm",defaultValue:new Date().toISOString().split("T")[0]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest text-center block leading-none mb-2",children:"  (Amount)"}),i.jsx("input",{name:"amount",type:"number",className:"w-full h-24 md:h-32 text-center text-4xl md:text-7xl font-black bg-emerald-50 text-emerald-600 border-none rounded-lg md:rounded-2xl px-6 focus:ring-8 focus:ring-emerald-100 shadow-inner",placeholder:"",required:!0,autoFocus:!0})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest ml-6 block italic leading-none mb-2",children:" (Optional Note)"}),i.jsx("input",{name:"note",className:"w-full py-6 md:py-10 text-sm md:text-2xl font-black bg-slate-50 border border-slate-100 text-black placeholder:text-slate-400 font-bold italic uppercase px-10 rounded-lg md:rounded-2xl focus:border-black outline-none shadow-sm",placeholder:"  ..."})]})]})}),i.jsxs("div",{className:"p-4 md:p-12 border-t-2 border-slate-50 bg-white flex flex-col sm:flex-row gap-3 md:gap-3 flex-shrink-0 font-black italic",children:[i.jsx("button",{type:"button",onClick:()=>A(null),className:"flex-1 py-6 md:py-10 bg-slate-50 text-slate-600 font-bold rounded-full uppercase text-xs font-bold md:text-xs tracking-widest hover:text-black transition-all order-2 sm:order-1",children:" (Cancel)"}),i.jsx("button",{form:"paymentForm",type:"submit",className:"flex-[3] py-6 md:py-10 bg-black text-white rounded-full uppercase text-xl md:text-3xl tracking-[0.2em] shadow-2xl border-b-[16px] border-zinc-900 hover:scale-[1.01] transition-all order-1 sm:order-2",children:"  "})]})]})}),i.jsx("div",{className:"pt-20 pb-10 flex justify-center",children:i.jsxs("button",{onClick:()=>a("Overview"),className:"group relative flex items-center gap-3 bg-white px-12 py-6 rounded-full border-4 border-slate-50 shadow-2xl hover:border-black transition-all duration-500",children:[i.jsx("div",{className:"p-3 bg-black text-white rounded-2xl group-hover:rotate-[-12deg] transition-transform",children:i.jsx(yt,{size:20,strokeWidth:3})}),i.jsx("span",{className:"text-lg font-black uppercase italic tracking-widest text-black",children:"  "}),i.jsx("div",{className:"absolute -inset-1 bg-black/5 blur-2xl rounded-full -z-10 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),v&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[400] flex items-center justify-center p-2 md:p-4 text-black italic animate-fade-up",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-[4.5rem] w-full max-w-xl border-4 border-white shadow-3xl overflow-hidden flex flex-col font-outfit max-h-[96vh]",children:[i.jsxs("div",{className:"p-5 md:p-12 border-b-2 border-slate-50 bg-white flex justify-between items-center flex-shrink-0",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl md:text-5xl font-black uppercase italic tracking-tighter leading-none",children:"   "}),i.jsxs("p",{className:"text-[11px] font-bold md:text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-[0.4em] mt-2 italic leading-none",children:[v.design," (",v.color,") - Lot: #",v.lotNo]})]}),i.jsx("button",{onClick:()=>j(null),className:"p-4 md:p-4 bg-slate-50 rounded-full hover:bg-black hover:text-white transition-all text-black",children:i.jsx(Bt,{size:24})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-14 space-y-12 custom-scrollbar italic font-black",children:[i.jsxs("div",{className:"bg-rose-50 p-5 md:p-12 rounded-2xl md:rounded-3xl border-2 border-rose-100 flex justify-around items-center shadow-inner",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs font-bold uppercase font-black text-rose-400 tracking-[0.3em] leading-none mb-3",children:"Borka Due"}),i.jsx("p",{className:"text-4xl md:text-7xl font-black italic text-rose-600 tracking-tighter leading-none",children:v.shortageBorka})]}),i.jsx("div",{className:"w-px h-16 bg-rose-200"}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs font-bold uppercase font-black text-rose-400 tracking-[0.3em] leading-none mb-3",children:"Hijab Due"}),i.jsx("p",{className:"text-4xl md:text-7xl font-black italic text-rose-600 tracking-tighter leading-none",children:v.shortageHijab})]})]}),i.jsxs("form",{id:"recoveryForm",onSubmit:P=>{P.preventDefault();const X=Number(P.target.rBorka.value||0),Y=Number(P.target.rHijab.value||0);if(X>v.shortageBorka||Y>v.shortageHijab)return r("      !","error");Ve(v,X,Y),j(null)},className:"space-y-10",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest ml-6 block leading-none",children:"Receive Borka"}),i.jsx("input",{name:"rBorka",type:"number",defaultValue:v.shortageBorka,className:"w-full text-center text-4xl md:text-7xl font-black py-8 md:py-12 bg-slate-100 border-none rounded-lg md:rounded-2xl focus:ring-8 focus:ring-black/5 outline-none transition-all placeholder:text-slate-500 font-bold italic",placeholder:"0",autoFocus:!0})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest ml-6 block leading-none",children:"Receive Hijab"}),i.jsx("input",{name:"rHijab",type:"number",defaultValue:v.shortageHijab,className:"w-full text-center text-4xl md:text-7xl font-black py-8 md:py-12 bg-slate-100 border-none rounded-lg md:rounded-2xl focus:ring-8 focus:ring-black/5 outline-none transition-all placeholder:text-slate-500 font-bold italic",placeholder:"0"})]})]}),i.jsx("p",{className:"text-xs font-bold font-black text-center text-slate-500 font-bold uppercase tracking-[0.2em] italic leading-relaxed",children:"        "})]})]}),i.jsxs("div",{className:"p-4 md:p-12 border-t-2 border-slate-50 bg-white flex flex-col sm:flex-row gap-3 md:gap-3 flex-shrink-0 font-black italic",children:[i.jsx("button",{type:"button",onClick:()=>j(null),className:"flex-1 py-6 md:py-10 bg-slate-50 text-slate-600 font-bold rounded-full uppercase text-xs font-bold md:text-xs tracking-widest hover:text-black transition-all order-2 sm:order-1",children:"Cancel"}),i.jsx("button",{form:"recoveryForm",type:"submit",className:"flex-[3] py-6 md:py-10 bg-black text-white rounded-full uppercase text-sm md:text-xl tracking-[0.2em] shadow-2xl border-b-[16px] border-zinc-900 hover:scale-[1.01] transition-all order-1 sm:order-2",children:" "})]})]})})]})},X_=({masterData:t,setMasterData:e,showNotify:n,user:r,setActivePanel:s})=>{var Ct,Ze,Kt;const a=(r==null?void 0:r.role)==="admin",[o,c]=G.useState("active"),[u,d]=G.useState(!1),[f,x]=G.useState(""),[b,E]=G.useState(null),[I,A]=G.useState(null),[O,N]=G.useState(null),[v,j]=G.useState(null),[L,S]=G.useState(null),[T,g]=G.useState(!1),[p,y]=G.useState({worker:"",design:"",color:"",size:"",lotNo:"",pataType:"Single",pataQty:"",borkaQty:"",hijabQty:"",stonePackets:"",paperRolls:"",note:""}),[k,C]=G.useState({design:"",color:"",pataType:"Single",qty:"",note:""}),R=((Ct=t.workerCategories)==null?void 0:Ct.pata)||[],_=D=>{let U=0;(t.pataEntries||[]).filter(Ve=>Ve.worker===D&&Ve.status==="Received").forEach(Ve=>{U+=Number(Ve.amount||0)});const Qt=(t.workerPayments||[]).filter(Ve=>Ve.worker===D&&Ve.dept==="pata").reduce((Ve,Jn)=>Ve+Number(Jn.amount),0);return U-Qt},ae=D=>{D.preventDefault();const U=Number(D.target.amount.value),ve=D.target.date.value?new Date(D.target.date.value).toLocaleDateString("en-GB"):new Date().toLocaleDateString("en-GB");if(U<=0)return;const Qt={id:Date.now(),date:ve,worker:v,dept:"pata",amount:U,note:D.target.note.value};e(Ve=>({...Ve,workerPayments:[Qt,...Ve.workerPayments||[]]})),Ot({type:"WORKER_PAYMENT",worker:v,amount:U,detail:"Pata payment"}),j(null),n("     !")},Ge=Cn.useMemo(()=>{const D={stone:0,roll:0};return(t.rawInventory||[]).forEach(U=>{U.item.toLowerCase().includes("stone")&&(U.type==="in"?D.stone+=Number(U.qty):D.stone-=Number(U.qty)),U.item.toLowerCase().includes("roll")&&(U.type==="in"?D.roll+=Number(U.qty):D.roll-=Number(U.qty))}),D},[t.rawInventory]),wt=Cn.useMemo(()=>{const D=new Set((t.pataEntries||[]).filter(U=>U.status==="Received").map(U=>U.lotNo));return(t.productions||[]).filter(U=>!D.has(U.lotNo)).map(U=>({lotNo:U.lotNo,design:U.design,color:U.color,qty:Math.max(Number(U.receivedBorka||0),Number(U.issueBorka||0))}))},[t.productions,t.pataEntries]),F=()=>{if(!p.worker||!p.design||!p.lotNo||!p.pataQty)return n(", ,     !","error");const D={id:Date.now(),date:new Date().toLocaleDateString("en-GB"),worker:p.worker,design:p.design,color:p.color||"N/A",size:p.size||"N/A",lotNo:p.lotNo,pataType:p.pataType,pataQty:Number(p.pataQty),borkaQty:Number(p.borkaQty||0),hijabQty:Number(p.hijabQty||0),stonePackets:Number(p.stonePackets||0),paperRolls:Number(p.paperRolls||0),status:"Pending",note:p.note};e(U=>{const ve=[...U.rawInventory||[]];return D.stonePackets>0&&ve.unshift({id:Date.now()+1,date:new Date().toLocaleDateString("en-GB"),item:"Stone Packet",qty:D.stonePackets,type:"out",note:`Pata Work Issue: ${D.worker} (Lot: ${D.lotNo})`}),D.paperRolls>0&&ve.unshift({id:Date.now()+2,date:new Date().toLocaleDateString("en-GB"),item:"Paper Roll",qty:D.paperRolls,type:"out",note:`Pata Work Issue: ${D.worker} (Lot: ${D.lotNo})`}),{...U,pataEntries:[D,...U.pataEntries||[]],rawInventory:ve}}),Ot({type:"PATA_ISSUE",worker:D.worker,detail:`${D.design}(${D.color}) - ${D.pataType}: ${D.pataQty} Pcs (Stone: ${D.stonePackets}, Paper: ${D.paperRolls})`,amount:0}),d(!1),E(D),y({worker:"",design:"",color:"",size:"",lotNo:"",pataType:"Single",pataQty:"",borkaQty:"",hijabQty:"",stonePackets:"",paperRolls:"",note:""}),n("         !")},z=D=>{var ls;D.preventDefault();const U=I,ve=Number(D.target.rQty.value||U.pataQty),Qt=((ls=t.pataRates)==null?void 0:ls[U.pataType])||0,Ve=ve*Qt;e(cs=>({...cs,pataEntries:cs.pataEntries.map(Xn=>Xn.id===U.id?{...Xn,status:"Received",receivedQty:ve,amount:Ve,receiveDate:new Date().toLocaleDateString("en-GB")}:Xn)}));const Jn={...U,status:"Received",receivedQty:ve,amount:Ve,receiveDate:new Date().toLocaleDateString("en-GB")};E(Jn),Ot({type:"PATA_RECEIVE",worker:U.worker,detail:`${U.design}(${U.pataType}) - ${ve} Pcs`,amount:Ve}),A(null),n("     !")},$=D=>{D.preventDefault();const U=D.target,ve={...O,worker:U.worker.value,design:U.design.value,color:U.color.value,lotNo:U.lotNo.value,pataType:U.pataType.value,pataQty:Number(U.qty.value),stonePackets:Number(U.stone.value),paperRolls:Number(U.roll.value),status:U.status.value,note:U.note.value};e(Qt=>({...Qt,pataEntries:Qt.pataEntries.map(Ve=>Ve.id===ve.id?ve:Ve)})),N(null),n("    (Admin Power)!")},Q=D=>{if(D.preventDefault(),!k.design||!k.qty)return n("   !","error");const U={id:Date.now(),date:new Date().toLocaleDateString("en-GB"),worker:"Manual/Owner",design:k.design,color:k.color||"N/A",lotNo:"MANUAL",pataType:k.pataType,pataQty:Number(k.qty),status:"Received",receiveDate:new Date().toLocaleDateString("en-GB"),note:k.note||"Manual Stock Entry"};e(ve=>({...ve,pataEntries:[U,...ve.pataEntries||[]]})),Ot({type:"PATA_MANUAL_STOCK",worker:"Manual",detail:`${k.design}(${k.pataType}) - ${k.qty} Pcs`,amount:0}),g(!1),C({design:"",color:"",pataType:"Single",qty:"",note:""}),n("    !")},se=D=>{window.confirm("  ?")&&(e(U=>({...U,pataEntries:(U.pataEntries||[]).filter(ve=>ve.id!==D)})),n("   !"))},ce=(t.pataEntries||[]).filter(D=>D.worker.toLowerCase().includes(f.toLowerCase())||D.design.toLowerCase().includes(f.toLowerCase())||D.lotNo.toLowerCase().includes(f.toLowerCase())),He=ce.filter(D=>D.status==="Pending"),Ce=ce.filter(D=>D.status==="Received");return b?i.jsxs("div",{className:"min-h-screen bg-black text-white p-12 italic font-outfit",children:[i.jsx("style",{children:"@media print { .no-print { display: none; } }"}),i.jsxs("div",{className:"flex justify-between items-center mb-4 no-print",children:[i.jsx("button",{onClick:()=>E(null),className:"bg-white text-black px-10 py-4 rounded-full font-black uppercase text-xs",children:" "}),i.jsx("button",{onClick:()=>window.print(),className:"bg-amber-500 text-white px-10 py-4 rounded-full font-black uppercase text-xs",children:"  "})]}),i.jsxs("div",{className:"max-w-2xl mx-auto border border-white/20 p-16 rounded-3xl text-center bg-zinc-900 shadow-3xl",children:[i.jsx("h1",{className:"text-6xl font-black italic tracking-tighter mb-4 text-white",children:"NRZONE PRO"}),i.jsx("p",{className:"text-sm font-black uppercase tracking-[0.5em] text-gray-500 mb-4 border-y border-white/5 py-4",children:"PATA WORK DISPATCH"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-left mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-bold font-black text-gray-500 uppercase tracking-widest",children:"Worker Name"}),i.jsx("p",{className:"text-3xl font-black uppercase text-white",children:b.worker})]}),i.jsxs("div",{className:"space-y-2 text-right",children:[i.jsx("p",{className:"text-xs font-bold font-black text-amber-500 uppercase tracking-widest",children:"Lot Number"}),i.jsxs("p",{className:"text-4xl font-black uppercase text-amber-500",children:["#",b.lotNo]})]})]}),i.jsxs("div",{className:"space-y-8 text-left bg-white/5 p-4 rounded-2xl border border-white/10",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-6",children:[i.jsx("span",{className:"text-xl font-black text-gray-400 uppercase",children:"Design:"}),i.jsx("span",{className:"text-4xl font-black italic text-white",children:b.design})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-xl font-black text-gray-400 uppercase",children:"Type:"}),i.jsx("span",{className:"text-4xl font-black italic text-amber-500",children:b.pataType})]})]}),i.jsxs("div",{className:"mt-4 bg-white text-black p-12 rounded-3xl shadow-2xl relative overflow-hidden",children:[i.jsxs("div",{className:"relative z-10",children:[i.jsx("p",{className:"text-xs font-black uppercase mb-2 tracking-[0.3em]",children:"Total Quantity (PCS)"}),i.jsx("p",{className:"text-8xl font-black italic tracking-tighter",children:b.pataQty})]}),i.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-5 scale-150",children:i.jsx(vh,{size:120})})]}),i.jsxs("div",{className:"mt-16 pt-10 border-t border-white/5 flex justify-between items-center opacity-40 italic text-white",children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase underline decoration-amber-500 decoration-4",children:"Worker Signature"}),i.jsx("p",{className:"text-xs font-bold font-black uppercase",children:b.date})]})]})]}):i.jsxs("div",{className:"space-y-12 pb-24 animate-fade-up px-2 italic text-black font-outfit selection:bg-amber-600",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>s("Overview"),className:"p-4 bg-white text-black rounded-2xl border border-slate-100 shadow-sm hover:bg-slate-50 transition-all group",children:i.jsx(yt,{size:20,className:"group-hover:-translate-x-1 transition-transform"})}),i.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 rounded-3xl border-4 border-slate-50 shadow-xl w-full md:w-auto",children:[i.jsx("div",{className:"p-4 bg-amber-600 text-white rounded-xl shadow-amber-500/20 shadow-2xl rotate-3 transition-transform hover:rotate-0",children:i.jsx(vh,{size:36,strokeWidth:3})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-4xl font-black uppercase italic tracking-tighter leading-none text-black",children:["Pata ",i.jsx("span",{className:"text-slate-400 font-bold",children:"Unit"})]}),i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.4em] mt-3 italic",children:"WORKER OPS"})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center w-full md:w-auto",children:[i.jsxs("div",{className:"relative group flex-1 md:w-64",children:[i.jsx(ar,{className:"absolute left-8 top-1/2 -translate-y-1/2 text-slate-600 font-bold group-focus-within:text-black transition-colors",size:20}),i.jsx("input",{type:"text",placeholder:"SEARCH WORKER/LOT...",className:"w-full bg-slate-50 pl-20 pr-8 py-8 rounded-full border-4 border-white shadow-xl font-black italic text-xs text-black uppercase focus:border-slate-100 outline-none transition-all placeholder:text-slate-500 font-bold",value:f,onChange:D=>x(D.target.value)})]}),i.jsxs("div",{className:"bg-white rounded-2xl px-12 py-8 flex flex-col items-center md:items-end border-4 border-slate-50 shadow-xl min-w-[200px]",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest mb-1",children:"TOTAL PENDING"}),i.jsxs("p",{className:"text-4xl font-black italic tracking-tighter text-amber-500 leading-none",children:[He.reduce((D,U)=>D+Number(U.pataQty||0),0).toLocaleString(),i.jsx("span",{className:"text-xs font-bold not-italic text-slate-400 font-bold ml-2",children:"PCS"})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>g(!0),className:"bg-amber-50 text-amber-600 px-6 py-5 rounded-xl font-black uppercase tracking-widest shadow-xl hover:bg-amber-600 hover:text-white transition-all text-xs flex items-center gap-2 border border-amber-100",children:[i.jsx(hl,{size:20})," STOCK IN"]}),i.jsxs("button",{onClick:()=>d(!0),className:"bg-black text-white px-8 py-5 rounded-xl font-black uppercase tracking-widest shadow-2xl hover:scale-105 active:scale-95 transition-all text-sm flex items-center gap-2 border-b-4 border-zinc-900",children:[i.jsx(Pt,{size:20,strokeWidth:3})," ISSUE WORK"]})]})]})]}),i.jsx("div",{className:"flex bg-white p-3 rounded-2xl border border-slate-100 shadow-inner w-full md:w-auto",children:["active","history",a&&"payments"].filter(Boolean).map(D=>i.jsx("button",{onClick:()=>c(D),className:`flex-1 px-8 py-5 rounded-xl font-black uppercase text-xs font-bold tracking-widest transition-all ${o===D?"bg-black text-white shadow-2xl":"text-slate-600 font-bold hover:text-black"}`,children:D==="active"?" (Pending)":D==="history"?"  (History)":"  "},D))}),i.jsx("div",{className:"space-y-8",children:o==="payments"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:R.map((D,U)=>{const ve=_(D);return i.jsxs("div",{className:"bg-white p-4 rounded-3xl border-4 border-slate-50 shadow-xl flex flex-col justify-between h-72 group hover:border-black transition-all relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 p-5 opacity-[0.05] group-hover:opacity-[0.1] transition-opacity",children:i.jsx(Yr,{size:140,className:"text-black"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-3xl font-black italic uppercase leading-none mb-3 text-black group-hover:text-black transition-colors",children:D}),i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest",children:"Total Due ()"})]}),i.jsxs("div",{className:"flex justify-between items-end relative z-10",children:[i.jsx("div",{className:"flex items-baseline gap-2",children:i.jsxs("p",{className:`text-5xl font-black italic tracking-tighter leading-none ${ve>0?"text-black":"text-slate-400 font-bold"}`,children:["",ve.toLocaleString()]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>S(D),className:"p-5 bg-slate-50 text-slate-600 font-bold rounded-lg border border-slate-100 hover:bg-black hover:text-white transition-all shadow-xl",title:"View Ledger",children:i.jsx(Ua,{size:24})}),i.jsx("button",{onClick:()=>j(D),className:"p-5 bg-black text-white rounded-lg shadow-2xl hover:scale-110 active:scale-95 transition-all border-b-[8px] border-zinc-900",title:"Make Payment",children:i.jsx(Yr,{size:24})})]})]})]},U)})}):i.jsxs(i.Fragment,{children:[He.length===0&&o==="active"&&i.jsxs("div",{className:"h-[400px] flex flex-col items-center justify-center text-slate-600 font-bold gap-3",children:[i.jsx(hl,{size:80,strokeWidth:1,className:"opacity-20"}),i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-[0.8em] opacity-40",children:"NO PATA WORK ASSIGNED"})]}),i.jsx("div",{className:"space-y-6",children:(o==="active"?He:Ce).map((D,U)=>i.jsxs("div",{className:"bg-white p-5 md:p-4 rounded-2xl border-4 border-slate-50 shadow-2xl flex items-center justify-between group hover:border-black transition-all relative overflow-hidden italic",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-lg flex items-center justify-center text-slate-400 font-bold border border-slate-100 text-xl font-black italic shadow-inner group-hover:bg-black group-hover:text-white transition-all",children:U+1}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-2xl font-black italic uppercase leading-none mb-1 text-black",children:[D.design," ",i.jsxs("span",{className:"text-slate-600 font-bold text-base not-italic",children:["(",D.worker,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsxs("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold font-black uppercase tracking-widest ${D.status==="Received"?"bg-black text-white":"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20"}`,children:["LOT: #",D.lotNo]}),i.jsxs("span",{className:"text-[10px] font-bold font-black text-slate-600 font-bold uppercase tracking-widest",children:[D.color,"  ",D.size||"N/A"]}),i.jsxs("span",{className:"text-[10px] font-bold font-black text-slate-400 font-bold uppercase tracking-widest",children:[" ",D.date]})]}),i.jsxs("p",{className:"text-[10px] font-bold font-black text-amber-500 mt-1 uppercase tracking-tighter italic opacity-60",children:["S: ",D.stonePackets||0,"  P: ",D.paperRolls||0,"  B: ",D.borkaQty||0,"  H: ",D.hijabQty||0]}),D.note&&i.jsx("p",{className:"text-[9px] font-bold font-black text-indigo-400 capitalize tracking-widest mt-1 bg-indigo-50 px-2 py-0.5 rounded-lg border border-indigo-100 inline-block",children:D.note})]})]}),i.jsxs("div",{className:"flex items-center gap-10",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-4xl font-black italic text-black tracking-tighter",children:D.pataQty}),i.jsx("p",{className:"text-[10px] font-bold font-black text-slate-600 font-bold uppercase tracking-widest",children:D.pataType})]}),i.jsxs("div",{className:"flex gap-2",children:[D.status==="Pending"?i.jsx("button",{onClick:()=>A(D),className:"px-8 py-3 bg-black text-white rounded-full font-black uppercase text-[10px] tracking-widest shadow-xl hover:scale-105 active:scale-95 transition-all border-b-4 border-zinc-900 leading-none",children:" "}):i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"px-6 py-3 bg-emerald-50 text-emerald-500 rounded-full font-black uppercase text-[10px] tracking-widest border border-emerald-100 uppercase italic",children:""}),i.jsx("button",{onClick:()=>E(D),className:"p-4 bg-white border-2 border-slate-50 text-black rounded-full hover:scale-110 transition-transform shadow-md",children:i.jsx(Vi,{size:16})})]}),a&&i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>N(D),className:"p-4 bg-slate-50 text-slate-600 font-bold rounded-full hover:bg-black hover:text-white transition-all shadow-md",children:i.jsx(zi,{size:16})}),i.jsx("button",{onClick:()=>se(D.id),className:"p-4 bg-rose-50 border border-rose-100 text-rose-500 rounded-full shadow-md hover:bg-rose-500 hover:text-white transition-all",children:i.jsx(zn,{size:18})})]})]})]})]},U))})]})}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[200] flex items-center justify-center p-2 md:p-4 italic",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-3xl w-full max-w-6xl border-4 border-white shadow-3xl animate-fade-up overflow-hidden max-h-[96vh] flex flex-col text-black",children:[i.jsxs("div",{className:"p-3 border-b border-slate-50 flex justify-between items-center bg-white flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-3 bg-amber-600 text-white rounded-xl shadow-2xl rotate-3",children:i.jsx(Pt,{size:24,strokeWidth:3})}),i.jsx("div",{children:i.jsx("h3",{className:"font-black uppercase text-xl md:text-3xl tracking-tighter leading-none text-black",children:"  ()"})})]}),i.jsx("button",{onClick:()=>d(!1),className:"p-3 bg-slate-50 border border-slate-100 rounded-full hover:bg-black hover:text-white transition-all text-black shadow-sm",children:i.jsx(Bt,{size:20})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-12 space-y-12 italic custom-scrollbar",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-3 flex-shrink-0",children:[i.jsxs("div",{className:"bg-amber-50 p-4 md:p-4 rounded-2xl md:rounded-3xl border border-amber-100 flex flex-col justify-center",children:[i.jsx("p",{className:"text-xs font-bold font-black text-amber-600 uppercase tracking-widest mb-1 italic",children:"Stone Packets"}),i.jsx("p",{className:"text-2xl md:text-4xl font-black italic text-amber-600",children:Ge.stone})]}),i.jsxs("div",{className:"bg-blue-50 p-4 md:p-4 rounded-2xl md:rounded-3xl border border-blue-100 flex flex-col justify-center",children:[i.jsx("p",{className:"text-xs font-bold font-black text-blue-600 uppercase tracking-widest mb-1 italic",children:"Paper Rolls"}),i.jsx("p",{className:"text-2xl md:text-4xl font-black italic text-blue-600",children:Ge.roll})]}),p.design&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",onClick:()=>{const D=(t.productions||[]).filter(U=>U.design===p.design&&U.status==="Received").reduce((U,ve)=>U+(ve.receivedBorka||0),0);y(U=>({...U,pataQty:D}))},className:"bg-slate-50 p-4 md:p-4 rounded-2xl md:rounded-3xl border border-slate-100 flex flex-col justify-center text-left hover:border-black transition-all group/stock",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest mb-1 italic",children:"Live Body (Borka)"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-2xl md:text-4xl font-black italic text-black",children:(t.productions||[]).filter(D=>D.design===p.design&&D.status==="Received").reduce((D,U)=>D+(U.receivedBorka||0),0)}),i.jsx(Pt,{size:16,className:"text-slate-500 font-bold group-hover/stock:text-black transition-colors"})]})]}),i.jsxs("button",{type:"button",onClick:()=>{const D=(t.productions||[]).filter(U=>U.design===p.design&&U.status==="Received").reduce((U,ve)=>U+(ve.receivedHijab||0),0);y(U=>({...U,pataQty:D}))},className:"bg-emerald-50 p-4 md:p-4 rounded-2xl md:rounded-3xl border border-emerald-100 flex flex-col justify-center text-left hover:border-emerald-600 transition-all group/stock",children:[i.jsx("p",{className:"text-xs font-bold font-black text-emerald-600 uppercase tracking-widest mb-1 italic",children:"Live Body (Hijab)"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-2xl md:text-4xl font-black italic text-emerald-600",children:(t.productions||[]).filter(D=>D.design===p.design&&D.status==="Received").reduce((D,U)=>D+(U.receivedHijab||0),0)}),i.jsx(Pt,{size:16,className:"text-emerald-300 group-hover/stock:text-emerald-600 transition-colors"})]})]})]})]}),i.jsxs("div",{className:"space-y-6 flex-1 italic custom-scrollbar",children:[i.jsxs("div",{className:"bg-slate-50/50 p-4 rounded-xl border border-slate-100 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("div",{className:"w-1 h-6 bg-black rounded-full"}),i.jsx("h4",{className:"text-base font-black uppercase tracking-widest text-black",children:".    (Identity)"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 md:gap-3",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"text-[10px] font-black text-slate-600 font-bold uppercase ml-4 tracking-widest flex items-center gap-1",children:[i.jsx(Mi,{size:12})," "]}),i.jsxs("select",{className:"form-input text-lg font-black border border-slate-100 rounded-lg bg-white h-14 text-black px-4 focus:border-black outline-none appearance-none",value:p.worker,onChange:D=>y(U=>({...U,worker:D.target.value})),children:[i.jsx("option",{value:"",children:"  "}),(((Ze=t.workerCategories)==null?void 0:Ze.pata)||[]).map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"text-[12px] font-black text-slate-600 font-bold uppercase ml-6 tracking-widest flex items-center gap-2",children:[i.jsx(hl,{size:14}),"  (Style)"]}),i.jsxs("select",{className:"form-input text-xl md:text-2xl font-black border border-slate-100 rounded-lg md:rounded-xl bg-white h-20 md:h-24 text-black px-6 focus:border-black outline-none appearance-none",value:p.design,onChange:D=>y(U=>({...U,design:D.target.value})),children:[i.jsx("option",{value:"",children:"  "}),(t.designs||[]).map(D=>i.jsx("option",{value:D.name,children:D.name},D.name))]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"text-[12px] font-black text-slate-600 font-bold uppercase ml-6 tracking-widest flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-600"}),"  (Color)"]}),i.jsxs("select",{className:"form-input text-xl md:text-2xl font-black border border-slate-100 rounded-lg md:rounded-xl bg-white h-20 md:h-24 text-black px-6 focus:border-black outline-none appearance-none",value:p.color,onChange:D=>y(U=>({...U,color:D.target.value})),children:[i.jsx("option",{value:"",children:"  "}),(t.colors||[]).map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-[12px] font-black text-slate-600 font-bold uppercase ml-6 tracking-widest flex items-center gap-2",children:" (Size)"}),i.jsx("input",{className:"form-input text-xl md:text-2xl font-black border border-slate-100 rounded-lg md:rounded-xl bg-white h-20 md:h-24 text-black px-6 focus:border-black outline-none",placeholder:"32, 34...",value:p.size,onChange:D=>y(U=>({...U,size:D.target.value}))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-[12px] font-black text-slate-600 font-bold uppercase ml-6 tracking-widest flex items-center gap-2",children:"#  (Auto Selection)"}),i.jsxs("select",{className:"form-input text-xl md:text-2xl font-black border border-slate-100 rounded-lg md:rounded-xl bg-white h-20 md:h-24 text-black px-6 focus:border-black outline-none appearance-none",value:p.lotNo,onChange:D=>{const U=wt.find(ve=>ve.lotNo===D.target.value);y(U?ve=>({...ve,lotNo:U.lotNo,design:U.design,color:U.color,pataQty:U.qty}):ve=>({...ve,lotNo:D.target.value}))},children:[i.jsx("option",{value:"",children:"  "}),wt.map(D=>i.jsxs("option",{value:D.lotNo,children:["#",D.lotNo," - ",D.design," (",D.color,")"]},D.lotNo))]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-[12px] font-black text-slate-600 font-bold uppercase ml-6 tracking-widest flex items-center gap-2",children:"  (Variant)"}),i.jsx("select",{className:"form-input text-xl md:text-2xl font-black border border-slate-100 rounded-lg md:rounded-xl bg-white h-20 md:h-24 text-black px-6 uppercase focus:border-black outline-none appearance-none",value:p.pataType,onChange:D=>y(U=>({...U,pataType:D.target.value})),children:(t.pataTypes||[]).map(D=>i.jsx("option",{value:D,children:D},D))})]})]})]}),i.jsxs("div",{className:"bg-amber-50/10 p-4 rounded-xl border border-amber-500/10 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("div",{className:"w-1 h-6 bg-amber-500 rounded-full"}),i.jsx("h4",{className:"text-base font-black uppercase tracking-widest text-amber-600",children:".  "})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-3",children:[i.jsxs("div",{className:"bg-white p-4 md:p-5 rounded-lg md:rounded-2xl border-2 border-slate-50 relative group overflow-hidden shadow-sm",children:[i.jsx("label",{className:"text-xs font-black text-slate-600 font-bold uppercase tracking-widest italic mb-4 block",children:"  (Stone Packet)"}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx("input",{type:"number",className:"bg-transparent text-4xl md:text-6xl font-black text-black w-full outline-none italic placeholder:text-slate-100",placeholder:"0",value:p.stonePackets,onChange:D=>y(U=>({...U,stonePackets:D.target.value}))}),i.jsx("span",{className:"text-xl font-black text-slate-500 font-bold mb-2 italic uppercase",children:"Pkt"})]})]}),i.jsxs("div",{className:"bg-white p-4 md:p-5 rounded-lg md:rounded-2xl border-2 border-slate-50 relative group overflow-hidden shadow-sm",children:[i.jsx("label",{className:"text-xs font-black text-slate-600 font-bold uppercase tracking-widest italic mb-4 block",children:"  (Paper Roll)"}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx("input",{type:"number",className:"bg-transparent text-4xl md:text-6xl font-black text-black w-full outline-none italic placeholder:text-slate-100",placeholder:"0",value:p.paperRolls,onChange:D=>y(U=>({...U,paperRolls:D.target.value}))}),i.jsx("span",{className:"text-xl font-black text-slate-500 font-bold mb-2 italic uppercase",children:"Roll"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 md:gap-3",children:[i.jsxs("div",{className:"bg-black text-white p-6 rounded-2xl shadow-3xl text-center space-y-2 relative overflow-hidden",children:[i.jsx("label",{className:"text-[10px] font-bold font-black text-amber-500 uppercase tracking-widest italic leading-none block",children:"  (Total)"}),i.jsx("input",{type:"number",className:"w-full text-center text-4xl font-black bg-transparent border-none outline-none leading-none h-12 text-white placeholder:text-white/10",placeholder:"0",value:p.pataQty,onChange:D=>y(U=>({...U,pataQty:D.target.value}))})]}),i.jsxs("div",{className:"bg-emerald-950 text-white p-5 md:p-12 rounded-xl md:rounded-3xl shadow-3xl text-center space-y-4 relative overflow-hidden",children:[i.jsx("label",{className:"text-xs font-bold font-black text-emerald-500 uppercase tracking-[0.3em] italic leading-none block",children:" (Borka)"}),i.jsx("input",{type:"number",className:"w-full text-center text-5xl md:text-7xl font-black bg-transparent border-none outline-none leading-none h-16 md:h-24 text-white placeholder:text-white/10",placeholder:"0",value:p.borkaQty,onChange:D=>y(U=>({...U,borkaQty:D.target.value}))}),i.jsx("div",{className:"text-white/20 text-xs font-bold font-black uppercase tracking-widest leading-none",children:"Exp. Borka Pcs"})]}),i.jsxs("div",{className:"bg-rose-950 text-white p-5 md:p-12 rounded-xl md:rounded-3xl shadow-3xl text-center space-y-4 relative overflow-hidden",children:[i.jsx("label",{className:"text-xs font-bold font-black text-rose-500 uppercase tracking-[0.3em] italic leading-none block",children:" (Hijab)"}),i.jsx("input",{type:"number",className:"w-full text-center text-5xl md:text-7xl font-black bg-transparent border-none outline-none leading-none h-16 md:h-24 text-white placeholder:text-white/10",placeholder:"0",value:p.hijabQty,onChange:D=>y(U=>({...U,hijabQty:D.target.value}))}),i.jsx("div",{className:"text-white/20 text-xs font-bold font-black uppercase tracking-widest leading-none",children:"Exp. Hijab Pcs"})]})]})]})]}),i.jsxs("div",{className:"p-4 md:p-8 border-t border-slate-100 bg-white flex flex-col md:flex-row gap-3 md:gap-3 flex-shrink-0",children:[i.jsx("button",{onClick:()=>d(!1),className:"flex-1 py-4 md:py-6 bg-slate-50 border border-slate-100 rounded-full font-black text-xs uppercase text-slate-600 font-bold hover:bg-black hover:text-white transition-all order-2 md:order-1",children:"Cancel"}),i.jsx("button",{onClick:F,className:"flex-[3] py-5 md:py-8 bg-amber-600 text-white rounded-full font-black text-lg md:text-2xl uppercase tracking-widest shadow-2xl shadow-amber-600/20 hover:scale-[1.01] transition-all order-1 md:order-2 border-b-8 border-amber-800",children:"CONFIRM & PRINT SLIP"})]})]})}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[400] flex items-center justify-center p-2 md:p-4 text-black italic",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-[4.5rem] w-full max-w-lg border-4 border-white shadow-3xl animate-fade-up overflow-hidden flex flex-col text-black italic font-outfit max-h-[96vh]",children:[i.jsxs("div",{className:"p-4 md:p-4 border-b-2 border-slate-50 flex justify-between items-center bg-white flex-shrink-0",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl md:text-5xl font-black uppercase tracking-tighter italic leading-none",children:"  "}),i.jsxs("p",{className:"text-[11px] font-bold md:text-xs font-bold text-slate-600 font-bold font-black uppercase tracking-widest mt-2",children:[": ",I.worker]})]}),i.jsx("button",{onClick:()=>A(null),className:"p-4 bg-slate-50 rounded-full hover:bg-black hover:text-white transition-all text-black",children:i.jsx(Bt,{size:24})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 md:p-12 space-y-10 custom-scrollbar",children:i.jsxs("form",{id:"receiveForm",onSubmit:z,className:"space-y-12 text-center",children:[i.jsxs("div",{className:"bg-slate-50 p-4 md:p-14 rounded-2xl md:rounded-[4.5rem] shadow-inner border border-slate-100",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold font-black uppercase mb-4 block tracking-widest",children:"Received Quantity (PCS)"}),i.jsx("input",{name:"rQty",type:"number",defaultValue:I.pataQty,className:"w-full text-center text-6xl md:text-9xl font-black bg-transparent border-none text-black outline-none leading-none h-32 md:h-48",autoFocus:!0})]}),i.jsx("p",{className:"text-xs font-bold font-black text-slate-400 font-bold uppercase tracking-widest italic leading-relaxed",children:"             "})]})}),i.jsxs("div",{className:"p-4 md:p-6 border-t-2 border-slate-50 bg-white flex flex-col sm:flex-row gap-3 flex-shrink-0 font-black italic",children:[i.jsx("button",{onClick:()=>A(null),className:"flex-1 py-4 md:py-5 bg-slate-50 text-slate-600 font-bold rounded-full uppercase text-xs tracking-widest hover:text-black transition-all",children:"Cancel"}),i.jsx("button",{form:"receiveForm",type:"submit",className:"flex-[2] py-4 md:py-6 bg-black text-white rounded-full uppercase text-lg md:text-xl shadow-2xl border-b-8 border-zinc-900 hover:scale-[1.02] active:scale-95 transition-all",children:"Confirm Receive"})]})]})}),T&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[400] flex items-center justify-center p-2 md:p-4 text-black italic",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-[4.5rem] w-full max-w-2xl border-4 border-white shadow-3xl animate-fade-up overflow-hidden flex flex-col text-black italic font-outfit max-h-[96vh]",children:[i.jsxs("div",{className:"p-4 md:p-4 border-b-2 border-slate-50 flex justify-between items-center bg-white flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-3 text-left",children:[i.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-amber-600 rounded-[1.2rem] md:rounded-xl flex items-center justify-center text-white shadow-xl rotate-3",children:i.jsx(hl,{size:24,className:"md:w-[32px] md:h-[32px]"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl md:text-3xl font-black uppercase italic text-black leading-none tracking-tighter",children:"Direct Stock In"}),i.jsx("p",{className:"text-[11px] font-bold md:text-xs font-bold font-black text-slate-600 font-bold tracking-[0.2em] uppercase mt-1 italic",children:"    "})]})]}),i.jsx("button",{onClick:()=>g(!1),className:"p-4 bg-slate-50 rounded-full hover:bg-black hover:text-white transition-all text-black",children:i.jsx(Bt,{size:24})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 md:p-12 space-y-10 custom-scrollbar italic",children:i.jsxs("form",{id:"manualForm",onSubmit:Q,className:"space-y-10",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold ml-6 uppercase tracking-widest leading-none",children:"DESIGN ()"}),i.jsxs("select",{className:"w-full text-xl md:text-2xl py-6 bg-slate-50 border border-slate-100 rounded-xl px-8 font-black uppercase text-black appearance-none focus:border-black outline-none h-20 md:h-24",value:k.design,onChange:D=>C(U=>({...U,design:D.target.value})),children:[i.jsx("option",{value:"",children:"SELECT DESIGN"}),t.designs.map(D=>i.jsx("option",{value:D.name,children:D.name},D.name))]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold ml-6 uppercase tracking-widest leading-none",children:"COLOR ()"}),i.jsxs("select",{className:"w-full text-xl md:text-2xl py-6 bg-slate-50 border border-slate-100 rounded-xl px-8 font-black uppercase text-black appearance-none focus:border-black outline-none h-20 md:h-24",value:k.color,onChange:D=>C(U=>({...U,color:D.target.value})),children:[i.jsx("option",{value:"",children:"SELECT COLOR"}),t.colors.map(D=>i.jsx("option",{value:D,children:D},D))]})]})]}),i.jsxs("div",{className:"bg-slate-50 p-4 md:p-14 rounded-2xl md:rounded-[4.5rem] border border-slate-100 text-center shadow-inner",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-[0.2em] block mb-4",children:"Quantity (  )"}),i.jsx("input",{type:"number",className:"w-full text-center text-6xl md:text-9xl font-black bg-transparent border-none outline-none leading-none h-32 md:h-48 text-black",placeholder:"0",value:k.qty,onChange:D=>C(U=>({...U,qty:D.target.value})),autoFocus:!0})]})]})}),i.jsxs("div",{className:"p-4 md:p-8 border-t-2 border-slate-50 bg-white flex flex-col sm:flex-row gap-3 md:gap-3 flex-shrink-0 font-black italic",children:[i.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-4 md:py-6 bg-slate-50 text-slate-600 font-bold rounded-full uppercase text-xs tracking-widest hover:text-black transition-all order-2 sm:order-1",children:"Cancel"}),i.jsx("button",{form:"manualForm",type:"submit",className:"flex-[2] py-4 md:py-6 bg-black text-white rounded-full uppercase text-lg md:text-xl shadow-2xl border-b-8 border-zinc-900 hover:scale-[1.01] active:scale-95 transition-all order-1 sm:order-2",children:"ADD TO STOCK"})]})]})}),O&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[400] flex items-center justify-center p-2 md:p-4 text-black italic",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-[4.5rem] w-full max-w-4xl border-4 border-white shadow-3xl animate-fade-up overflow-hidden flex flex-col text-black italic font-outfit max-h-[96vh]",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 md:p-4 border-b-2 border-slate-50 bg-white flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-3",children:[i.jsx("div",{className:"p-4 md:p-4 bg-amber-600 text-white rounded-[1.2rem] md:rounded-xl shadow-xl rotate-3",children:i.jsx(zi,{size:32,className:"md:w-[40px] md:h-[40px]"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-2xl md:text-5xl font-black uppercase tracking-tighter italic text-black leading-none",children:["Pata ",i.jsx("span",{className:"text-slate-400 font-bold",children:"Override"})]}),i.jsx("p",{className:"text-[11px] font-bold md:text-xs font-bold font-black text-slate-600 font-bold tracking-[0.4em] uppercase mt-1 italic leading-none",children:"Admin Control Center"})]})]}),i.jsx("button",{onClick:()=>N(null),className:"p-4 bg-slate-50 border border-slate-100 rounded-full hover:bg-black hover:text-white transition-all text-black shadow-sm flex-shrink-0",children:i.jsx(Bt,{size:24})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-5 md:p-12 space-y-12 custom-scrollbar italic",children:i.jsxs("form",{id:"editForm",onSubmit:$,className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-12 font-black uppercase",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest",children:"Worker ()"}),i.jsxs("select",{name:"worker",defaultValue:O.worker,className:"w-full text-xl md:text-2xl font-black py-6 md:py-8 bg-slate-50 border border-slate-100 rounded-lg md:rounded-xl px-8 focus:border-black outline-none transition-all appearance-none shadow-sm text-black",children:[(((Kt=t.workerCategories)==null?void 0:Kt.pata)||[]).map(D=>i.jsx("option",{value:D,children:D},D)),i.jsx("option",{value:"Manual/Owner",children:"Manual/Owner"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest",children:"Design ()"}),i.jsx("select",{name:"design",defaultValue:O.design,className:"w-full text-xl md:text-2xl font-black py-6 md:py-8 bg-slate-50 border border-slate-100 rounded-lg md:rounded-xl px-8 focus:border-black outline-none transition-all appearance-none shadow-sm text-black",children:t.designs.map(D=>i.jsx("option",{value:D.name,children:D.name},D.name))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest",children:"Color & Lot"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("select",{name:"color",defaultValue:O.color,className:"w-full text-xl md:text-2xl font-black py-6 md:py-8 bg-slate-50 border border-slate-100 rounded-lg md:rounded-xl px-8 focus:border-black outline-none transition-all appearance-none shadow-sm text-black",children:t.colors.map(D=>i.jsx("option",{value:D,children:D},D))}),i.jsx("input",{name:"lotNo",defaultValue:O.lotNo,className:"w-full text-xl md:text-2xl font-black py-6 md:py-8 bg-black text-white border-none rounded-lg md:rounded-xl px-8 focus:ring-4 ring-black/5 outline-none transition-all text-center"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest",children:"Status & Type"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("select",{name:"status",defaultValue:O.status,className:"w-full text-xl md:text-2xl font-black py-6 md:py-8 bg-black text-white border-none rounded-lg md:rounded-xl px-8 focus:ring-4 ring-black/5 outline-none transition-all appearance-none",children:[i.jsx("option",{value:"Pending",children:"PENDING"}),i.jsx("option",{value:"Received",children:"RECEIVED"})]}),i.jsx("select",{name:"pataType",defaultValue:O.pataType,className:"w-full text-xl md:text-2xl font-black py-6 md:py-8 bg-slate-50 border border-slate-100 rounded-lg md:rounded-xl px-8 focus:border-black outline-none transition-all appearance-none shadow-sm text-black",children:(t.pataTypes||[]).map(D=>i.jsx("option",{value:D,children:D},D))})]})]}),i.jsxs("div",{className:"md:col-span-2 bg-slate-50/50 p-4 md:p-12 rounded-xl md:rounded-3xl border-2 border-slate-100 grid grid-cols-1 sm:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"text-center space-y-4 pb-6 sm:pb-0 sm:border-r-2 border-slate-100",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 font-bold block tracking-widest leading-none",children:"PATA QTY"}),i.jsx("input",{name:"qty",type:"number",defaultValue:O.pataQty,className:"w-full text-center text-4xl md:text-6xl bg-transparent outline-none font-black italic text-black leading-none"})]}),i.jsxs("div",{className:"text-center space-y-4 pb-6 sm:pb-0 sm:border-r-2 border-slate-100",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 font-bold block tracking-widest leading-none",children:"STONE PKT"}),i.jsx("input",{name:"stone",type:"number",defaultValue:O.stonePackets,className:"w-full text-center text-4xl md:text-6xl bg-transparent outline-none font-black italic text-black leading-none"})]}),i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 font-bold block tracking-widest leading-none",children:"PAPER ROLL"}),i.jsx("input",{name:"roll",type:"number",defaultValue:O.paperRolls,className:"w-full text-center text-4xl md:text-6xl bg-transparent outline-none font-black italic text-black leading-none"})]})]}),i.jsxs("div",{className:"md:col-span-2 space-y-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold ml-6 tracking-widest",children:"Special Note ()"}),i.jsx("textarea",{name:"note",defaultValue:O.note,className:"w-full h-32 bg-slate-50 border border-slate-100 rounded-xl p-5 italic outline-none focus:border-black text-black text-xl shadow-sm",placeholder:"  ..."})]})]})}),i.jsxs("div",{className:"p-4 md:p-12 border-t-2 border-slate-50 bg-white flex flex-col sm:flex-row gap-3 md:gap-3 flex-shrink-0 font-black italic",children:[i.jsx("button",{onClick:()=>N(null),className:"flex-1 py-6 md:py-10 bg-slate-50 text-slate-600 font-bold rounded-full uppercase text-xs tracking-widest hover:text-black transition-all order-2 sm:order-1",children:"Close"}),i.jsx("button",{form:"editForm",type:"submit",className:"flex-[3] py-6 md:py-10 bg-black text-white rounded-full uppercase text-xl md:text-3xl tracking-[0.2em] shadow-2xl border-b-[16px] border-zinc-900 hover:scale-[1.01] transition-all order-1 sm:order-2",children:"SAVE CHANGES"})]})]})}),v&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-xl z-[400] flex items-center justify-center p-2 md:p-4 text-black italic",children:i.jsxs("div",{className:"bg-white rounded-2xl md:rounded-[4.5rem] w-full max-w-lg border-4 border-white shadow-3xl animate-fade-up overflow-hidden flex flex-col italic font-outfit max-h-[96vh]",children:[i.jsxs("div",{className:"p-5 md:p-12 text-center bg-white border-b-2 border-slate-50 flex-shrink-0",children:[i.jsx("h3",{className:"text-3xl md:text-6xl font-black uppercase italic text-black leading-none mb-4",children:" "}),i.jsx("div",{className:"inline-block px-8 py-3 bg-black text-white rounded-full text-xs font-bold md:text-sm tracking-widest uppercase font-black italic",children:v})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-14 space-y-12 custom-scrollbar",children:i.jsx("form",{id:"paymentForm",onSubmit:ae,className:"space-y-12",children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest text-center block leading-none",children:" (Date)"}),i.jsx("input",{name:"date",type:"date",className:"w-full py-6 bg-slate-50 border border-slate-100 rounded-lg md:rounded-[2.2rem] text-[12px] md:text-lg font-black italic px-8 text-black focus:border-black outline-none",defaultValue:new Date().toISOString().split("T")[0]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest text-center block leading-none",children:"  (Amount)"}),i.jsx("input",{name:"amount",type:"number",className:"w-full h-24 md:h-28 text-center text-4xl md:text-6xl font-black bg-emerald-50 text-emerald-600 border-none rounded-lg md:rounded-[2.2rem] px-6 focus:ring-8 focus:ring-emerald-100 shadow-inner",placeholder:"",required:!0,autoFocus:!0})]})]}),i.jsxs("div",{className:"space-y-3 pt-4",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest ml-6 block italic leading-none",children:" /   (Note)"}),i.jsx("input",{name:"note",className:"w-full py-6 md:py-8 text-sm md:text-xl font-black bg-slate-50 border border-slate-100 text-black placeholder:text-slate-400 font-bold italic uppercase px-10 rounded-lg md:rounded-[2.2rem] focus:border-black outline-none shadow-sm",placeholder:"  ..."})]})]})})}),i.jsxs("div",{className:"p-4 md:p-12 border-t-2 border-slate-50 bg-white flex flex-col sm:flex-row gap-3 md:gap-3 flex-shrink-0 font-black italic",children:[i.jsx("button",{onClick:()=>j(null),className:"flex-1 py-6 md:py-10 bg-slate-50 text-slate-600 font-bold rounded-full uppercase text-xs tracking-widest hover:text-black transition-all order-2 sm:order-1",children:" (Cancel)"}),i.jsx("button",{form:"paymentForm",type:"submit",className:"flex-[3] py-6 md:py-10 bg-black text-white rounded-full uppercase text-xl md:text-3xl shadow-2xl border-b-[16px] border-zinc-900 hover:scale-[1.01] transition-all order-1 sm:order-2",children:"  "})]})]})}),L&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-3xl z-[400] flex items-center justify-center p-2 md:p-4 text-black font-outfit italic",children:i.jsxs("div",{className:"bg-white w-full max-w-5xl md:max-h-[96vh] rounded-2xl md:rounded-[4.5rem] border-4 border-slate-50 shadow-3xl flex flex-col overflow-hidden italic",children:[i.jsxs("div",{className:"p-4 md:p-12 border-b-2 border-slate-50 flex justify-between items-center bg-white flex-shrink-0 animate-fade-down",children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-3",children:[i.jsx("div",{className:"p-4 md:p-4 bg-black text-white rounded-[1.2rem] md:rounded-[2.2rem] shadow-xl rotate-3",children:i.jsx(Ua,{size:32,className:"md:w-[40px] md:h-[40px]"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-2xl md:text-5xl font-black uppercase italic text-black leading-none tracking-tighter",children:[L," ",i.jsx("span",{className:"text-slate-400 font-bold",children:"Ledger"})]}),i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold tracking-[0.4em] uppercase mt-2 md:mt-4 italic leading-none",children:"Full Production & Payment History"})]})]}),i.jsx("button",{onClick:()=>S(null),className:"p-4 md:p-4 bg-slate-50 border border-slate-100 rounded-full hover:bg-black hover:text-white transition-all shadow-sm text-black flex-shrink-0",children:i.jsx(Bt,{size:24})})]}),i.jsx("div",{className:"overflow-y-auto p-4 md:p-12 flex-1 custom-scrollbar",children:i.jsx("div",{className:"overflow-x-auto rounded-xl border-2 border-slate-50",children:i.jsxs("table",{className:"w-full text-left uppercase text-xs md:text-sm min-w-[600px]",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold font-black tracking-widest sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-8 py-6",children:"Date"}),i.jsx("th",{className:"px-8 py-6",children:"Description"}),i.jsx("th",{className:"px-8 py-6 text-right",children:"Credit (Work)"}),i.jsx("th",{className:"px-8 py-6 text-right",children:"Debit (Paid)"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100 font-black",children:[(t.pataEntries||[]).filter(D=>D.worker===L&&D.status==="Received").map((D,U)=>i.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[i.jsx("td",{className:"px-8 py-6 text-xs font-bold text-slate-500 font-bold font-black",children:D.receiveDate}),i.jsxs("td",{className:"px-8 py-6 text-black group-hover:translate-x-2 transition-transform",children:[D.design," (",D.pataType,") - ",D.receivedQty," Pcs"]}),i.jsxs("td",{className:"px-8 py-6 text-right text-emerald-500 text-lg",children:["",D.amount]}),i.jsx("td",{className:"px-8 py-6 text-right text-slate-100",children:"-"})]},`inc_${U}`)),(t.workerPayments||[]).filter(D=>D.worker===L&&D.dept==="pata").map((D,U)=>i.jsxs("tr",{className:"hover:bg-rose-50/30 transition-colors group",children:[i.jsx("td",{className:"px-8 py-6 text-xs font-bold text-slate-500 font-bold font-black",children:D.date}),i.jsxs("td",{className:"px-8 py-6 text-rose-500 group-hover:translate-x-2 transition-transform",children:["Payment ",D.note?`(${D.note})`:""]}),i.jsx("td",{className:"px-8 py-6 text-right text-slate-100",children:"-"}),i.jsxs("td",{className:"px-8 py-6 text-right text-rose-500 text-lg",children:["",D.amount]})]},`exp_${U}`))]})]})})}),i.jsxs("div",{className:"p-5 md:p-14 bg-black border-t-4 border-zinc-900 flex flex-col md:flex-row justify-between items-center gap-3 text-xl font-black italic flex-shrink-0",children:[i.jsxs("div",{className:"flex flex-col items-center md:items-start gap-1",children:[i.jsx("span",{className:"text-zinc-600 uppercase tracking-[0.3em] text-xs font-bold",children:"Net Payable Due"}),i.jsxs("span",{className:"text-4xl md:text-6xl text-white tracking-tighter",children:["",_(L).toLocaleString()]})]}),i.jsx("button",{onClick:()=>{S(null),j(L)},className:"w-full md:w-auto px-16 py-6 md:py-8 bg-white text-black rounded-full font-black uppercase text-sm md:text-lg tracking-widest shadow-2xl hover:bg-emerald-500 hover:text-white transition-all transform hover:scale-105 active:scale-95",children:"PAY NOW"})]})]})}),i.jsx("style",{children:`
                .premium-card {
                    background: white;
                    border: 4px solid #f8fafc;
                    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.05);
                }
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: transparent;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: rgba(0, 0, 0, 0.05);
                    border-radius: 10px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: rgba(0, 0, 0, 0.1);
                }
                input[type="date"]::-webkit-calendar-picker-indicator {
                    filter: opacity(0.3);
                    cursor: pointer;
                }
            `})]})},Gy=({masterData:t})=>{const[e,n]=G.useState(""),[r,s]=G.useState("all"),a=()=>{var b,E,I;const d=(((b=t.workerCategories)==null?void 0:b.sewing)||[]).map(A=>({name:A,dept:"sewing"})),f=(((E=t.workerCategories)==null?void 0:E.stone)||[]).map(A=>({name:A,dept:"stone"})),x=(((I=t.workerCategories)==null?void 0:I.pata)||[]).map(A=>({name:A,dept:"pata"}));return[...d,...f,...x]},o=(d,f)=>{var E,I;const x=(t.workerPayments||[]).filter(A=>A.worker===d&&A.dept===f).reduce((A,O)=>A+Number(O.amount||0),0),b=(I=(E=t.workerWages)==null?void 0:E[f])==null?void 0:I[d];if(b){const A=(t.attendance||[]).filter(L=>L.worker===d&&L.department===f),O=A.filter(L=>L.status==="present").length,N=A.filter(L=>L.status==="half-day").length,v=O+N*.5,j=A.reduce((L,S)=>L+(S.wage||0),0);return{qty:v,bill:j,paid:x,balance:j-x,label:"PRESENT DAYS",subLabel:`SALARY: ${b}`}}if(f==="pata"){const A=(t.pataEntries||[]).filter(v=>v.worker===d&&v.status==="Received"),O=A.reduce((v,j)=>v+Number(j.amount||0),0);return{qty:A.reduce((v,j)=>v+Number(j.pataQty||0),0),bill:O,paid:x,balance:O-x,label:"PATA PRODUCED",subLabel:"PIECE RATE"}}else{const A=(t.productions||[]).filter(v=>v.worker===d&&v.type===f&&v.status==="Received"),O=A.reduce((v,j)=>v+Number(j.receivedBorka||0)+Number(j.receivedHijab||0),0),N=A.reduce((v,j)=>{const L=t.designs.find(g=>g.name===j.design),S=Number(j.receivedBorka||0),T=Number(j.receivedHijab||0);if(f==="sewing"){const g=(L==null?void 0:L.sewingRate)||0,p=(L==null?void 0:L.hijabRate)||g;return v+S*g+T*p}else{const g=(L==null?void 0:L.stoneRate)||0;return v+(S+T)*g}},0);return{qty:O,bill:N,paid:x,balance:N-x,label:"FINISHED GOODS",subLabel:"PIECE RATE"}}},c=a().filter(d=>(r==="all"||d.dept===r)&&d.name.toLowerCase().includes(e.toLowerCase())).map(d=>({...d,...o(d.name,d.dept)})),u=c.reduce((d,f)=>d+f.bill,0);return i.jsxs("div",{className:"space-y-12 pb-24 animate-fade-up px-2 italic text-black font-outfit",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 rounded-3xl border-4 border-slate-50 shadow-2xl",children:[i.jsx("div",{className:"p-4 bg-black text-white rounded-xl shadow-2xl rotate-3 hover:rotate-0 transition-transform",children:i.jsx(Hy,{size:32})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-4xl font-black uppercase italic tracking-tighter leading-none text-black",children:["Worker ",i.jsx("span",{className:"text-slate-100",children:"Stats"})]}),i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.4em] mt-3 italic",children:"PERFORMANCE ANALYTICS"})]})]}),i.jsxs("div",{className:"bg-white px-12 py-8 rounded-2xl border-4 border-slate-50 flex flex-col items-end min-w-[300px] shadow-xl",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest mb-2",children:"Total Payable"}),i.jsxs("p",{className:"text-5xl font-black italic tracking-tighter text-black",children:["",u.toLocaleString()]})]})]}),i.jsxs("div",{className:"bg-white p-5 rounded-2xl border-4 border-slate-50 shadow-2xl flex flex-col md:flex-row gap-3",children:[i.jsxs("div",{className:"flex-1 bg-slate-50 p-4 rounded-full flex items-center gap-3 px-8 border border-slate-100 shadow-inner",children:[i.jsx(ar,{size:24,className:"text-slate-100"}),i.jsx("input",{type:"text",placeholder:"Search Identity...",className:"bg-transparent font-black italic border-none outline-none w-full uppercase text-xl text-black placeholder:text-slate-400 font-bold",value:e,onChange:d=>n(d.target.value)})]}),i.jsxs("select",{className:"bg-slate-50 text-black px-10 rounded-full font-black uppercase text-xs tracking-widest border border-slate-100",value:r,onChange:d=>s(d.target.value),children:[i.jsx("option",{value:"all",children:"All Dept"}),i.jsx("option",{value:"sewing",children:"Sewing"}),i.jsx("option",{value:"stone",children:"Stone"}),i.jsx("option",{value:"pata",children:"Pata"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:c.map((d,f)=>i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-2xl relative overflow-hidden group hover:border-black transition-all flex flex-col h-96",children:[i.jsx("div",{className:"flex justify-between items-start mb-4",children:i.jsxs("div",{children:[i.jsx("h4",{className:"text-3xl font-black italic uppercase leading-none mb-3 text-black",children:d.name}),i.jsxs("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest",children:[d.dept," DEPT"]})]})}),i.jsxs("div",{className:"space-y-6 mt-auto",children:[i.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 shadow-inner flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[11px] font-bold font-black text-slate-600 font-bold uppercase tracking-widest mb-1",children:d.label}),i.jsxs("p",{className:"text-2xl font-black italic text-black",children:[d.qty," ",i.jsx("span",{className:"text-xs font-bold text-slate-500 font-bold",children:d.label==="PRESENT DAYS"?"DAYS":"PCS"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-[11px] font-bold font-black text-slate-600 font-bold uppercase tracking-widest mb-1",children:"Payable"}),i.jsxs("p",{className:"text-2xl font-black italic text-black",children:["",d.bill.toLocaleString()]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-emerald-50 text-emerald-600 p-4 rounded-2xl border border-emerald-100 shadow-sm",children:[i.jsx("p",{className:"text-[11px] font-bold font-black uppercase tracking-widest mb-1",children:"Paid"}),i.jsxs("p",{className:"text-2xl font-black italic",children:["",d.paid.toLocaleString()]})]}),i.jsxs("div",{className:"bg-black text-white p-4 rounded-2xl shadow-xl",children:[i.jsx("p",{className:"text-[11px] font-bold font-black text-white/40 uppercase tracking-widest mb-1",children:"Balance"}),i.jsxs("p",{className:"text-2xl font-black italic",children:["",d.balance.toLocaleString()]})]})]})]})]},f))})]})},Z_=({masterData:t})=>{var d;const[e,n]=G.useState("sewing"),[r,s]=G.useState(!1),o=(()=>{const f=new Date,b=(f.getDay()+1)%7,E=new Date(f);E.setDate(f.getDate()-b),E.setHours(0,0,0,0);const I=new Date(E);return I.setDate(E.getDate()+5),I.setHours(23,59,59,999),{saturday:E,thursday:I}})(),c=((d=t.workerCategories)==null?void 0:d[e])||[],u=f=>{var b,E;if((E=(b=t.workerWages)==null?void 0:b[e])==null?void 0:E[f]){const I=(t.attendance||[]).filter(v=>{const j=new Date(v.date.split("/").reverse().join("-"));return v.worker===f&&v.department===e&&j>=o.saturday&&j<=o.thursday}),A=I.filter(v=>v.status==="present").length,O=I.filter(v=>v.status==="half-day").length,N=I.reduce((v,j)=>v+(j.wage||0),0);return{type:"Monthly",qty:A+O*.5,qtyLabel:"Days",bill:N}}if(e==="pata"){const I=(t.pataEntries||[]).filter(A=>{const O=new Date(A.date.split("/").reverse().join("-"));return A.worker===f&&O>=o.saturday&&O<=o.thursday&&A.status==="Received"});return{type:"Production",qty:I.reduce((A,O)=>A+Number(O.pataQty||0),0),qtyLabel:"Pcs",bill:I.reduce((A,O)=>A+Number(O.amount||0),0)}}else{const I=(t.productions||[]).filter(O=>{const N=new Date(O.date.split("/").reverse().join("-"));return O.worker===f&&O.type===e&&O.status==="Received"&&N>=o.saturday&&N<=o.thursday}),A=I.reduce((O,N)=>{const v=t.designs.find(S=>S.name===N.design),j=Number(N.receivedBorka||0),L=Number(N.receivedHijab||0);if(e==="sewing"){const S=(v==null?void 0:v.sewingRate)||0,T=(v==null?void 0:v.hijabRate)||S;return O+j*S+L*T}else return O+(j+L)*((v==null?void 0:v.stoneRate)||0)},0);return{type:"Production",qty:I.reduce((O,N)=>O+Number(N.receivedBorka||0)+Number(N.receivedHijab||0),0),qtyLabel:"Pcs",bill:A}}};if(r){let f=0;return i.jsxs("div",{className:"bg-white p-20 font-sans italic text-black min-h-screen",children:[i.jsx("style",{children:"@media print { body { background: white; } .no-print { display: none; } }"}),i.jsxs("div",{className:"max-w-4xl mx-auto border-[10px] border-gray-100 p-16 rounded-3xl",children:[i.jsxs("div",{className:"flex justify-between items-start border-b-4 border-black pb-12 mb-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-6xl font-black uppercase italic tracking-tighter",children:["NRZONE ",i.jsx("span",{className:"text-gray-200",children:"WEEKLY"})]}),i.jsxs("p",{className:"text-xs font-black text-gray-400 mt-4 tracking-widest",children:[e.toUpperCase()," DEPARTMENT BILL"]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"text-sm font-black italic",children:[o.saturday.toLocaleDateString()," - ",o.thursday.toLocaleDateString()]})})]}),i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"border-b-4 border-black",children:i.jsxs("tr",{className:"text-xs font-bold font-black uppercase tracking-widest",children:[i.jsx("th",{className:"py-6 text-left",children:"Worker"}),i.jsx("th",{className:"py-6 text-center",children:"Output"}),i.jsx("th",{className:"py-6 text-right",children:"Payable"})]})}),i.jsx("tbody",{children:c.map(x=>{const b=u(x);return b.bill===0?null:(f+=b.bill,i.jsxs("tr",{className:"border-b-2 border-gray-100 font-black italic",children:[i.jsx("td",{className:"py-6 uppercase text-xl",children:x}),i.jsxs("td",{className:"py-6 text-center text-2xl",children:[b.qty," ",i.jsx("span",{className:"text-xs uppercase text-gray-200",children:b.qtyLabel})]}),i.jsxs("td",{className:"py-6 text-right text-3xl",children:["",b.bill.toLocaleString()]})]},x))})}),i.jsx("tfoot",{children:i.jsxs("tr",{className:"border-t-4 border-black",children:[i.jsx("td",{colSpan:"2",className:"py-10 text-right font-black uppercase tracking-widest text-gray-300",children:"Total Settlement"}),i.jsxs("td",{className:"py-10 text-right text-6xl font-black italic tracking-tighter",children:["",f.toLocaleString()]})]})})]})]})]})}return i.jsxs("div",{className:"space-y-12 pb-24 animate-fade-up px-2 italic text-black font-outfit",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 rounded-3xl border-4 border-slate-50 shadow-2xl",children:[i.jsx("div",{className:"p-4 bg-black text-white rounded-xl shadow-2xl rotate-3 hover:rotate-0 transition-transform",children:i.jsx(Hf,{size:32})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-4xl font-black uppercase italic tracking-tighter leading-none text-black",children:["Weekly ",i.jsx("span",{className:"text-slate-100",children:"Matrix"})]}),i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-widest mt-3 underline decoration-slate-100 underline-offset-4 decoration-2",children:"Auto-Generated Invoices"})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("select",{className:"bg-white text-black px-10 rounded-full font-black uppercase text-xs tracking-widest border border-slate-100 shadow-lg",value:e,onChange:f=>n(f.target.value),children:[i.jsx("option",{value:"sewing",children:"Sewing"}),i.jsx("option",{value:"stone",children:"Stone"}),i.jsx("option",{value:"pata",children:"Pata"})]}),i.jsxs("button",{onClick:()=>{s(!0),setTimeout(()=>{window.print(),s(!1)},100)},className:"bg-black text-white px-12 py-6 rounded-2xl font-black uppercase text-xs tracking-widest shadow-2xl border-b-[12px] border-zinc-900 flex items-center gap-3 hover:scale-[1.02] active:scale-95 transition-all",children:[i.jsx(Vi,{size:20})," Print Reports"]})]})]}),i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-2xl flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-[0.5em] mb-4",children:"Current Cycle"}),i.jsxs("p",{className:"text-5xl font-black italic tracking-tighter text-black",children:[o.saturday.toLocaleDateString("en-GB"),"  ",o.thursday.toLocaleDateString("en-GB")]})]}),i.jsx("div",{className:"p-5 bg-slate-50 rounded-full rotate-12 border border-slate-100 shadow-inner",children:i.jsx(Uy,{size:48,className:"text-slate-400 font-bold"})})]}),i.jsx("div",{className:"bg-white rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold uppercase font-black text-xs font-bold tracking-widest",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-16 py-10",children:"Worker Node"}),i.jsx("th",{className:"px-16 py-10 text-center",children:"Output"}),i.jsx("th",{className:"px-16 py-10 text-right",children:"Payable"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:c.map(f=>{const x=u(f);return x.bill===0?null:i.jsxs("tr",{className:"hover:bg-slate-50 transition-all group",children:[i.jsx("td",{className:"px-16 py-12",children:i.jsx("p",{className:"font-black text-3xl uppercase tracking-tighter italic text-black",children:f})}),i.jsxs("td",{className:"px-16 py-12 text-center font-black text-4xl italic text-black",children:[x.qty," ",i.jsx("span",{className:"text-xs text-slate-400 font-bold",children:x.qtyLabel})]}),i.jsxs("td",{className:"px-16 py-12 text-right font-black text-5xl italic tracking-tighter text-black",children:["",x.bill.toLocaleString()]})]},f)})})]})})]})},ej=({masterData:t})=>{const e=G.useMemo(()=>{const n=(t.productions||[]).filter(A=>A.status==="Received").reduce((A,O)=>A+(O.issueBorka||0)+(O.issueHijab||0),0),r=(t.pataEntries||[]).filter(A=>A.status==="Received").reduce((A,O)=>A+(O.pataQty||0),0),s=(t.clientEntries||[]).filter(A=>A.type==="sale").reduce((A,O)=>A+(O.amount||0),0),a=(t.clientEntries||[]).filter(A=>A.type==="payment").reduce((A,O)=>A+(O.amount||0),0),o=t.rawInventory||[],c={};o.forEach(A=>{const O=A.color?`${A.item} (${A.color})`:A.item;c[O]||(c[O]={name:A.item,color:A.color,qty:0}),A.type==="in"?c[O].qty+=Number(A.qty):A.type==="out"&&(c[O].qty-=Number(A.qty))});const u=Object.values(c).filter(A=>A.qty<=5),d={};(t.productions||[]).forEach(A=>{d[A.design]=(d[A.design]||0)+(A.issueBorka||0)+(A.issueHijab||0)});const f=Object.entries(d).sort(([,A],[,O])=>O-A).slice(0,5),x=(t.productions||[]).filter(A=>A.status==="Pending").length,b=(t.productions||[]).length,E=b>0?Math.round((b-x)/b*100):0,I=qy(t);return{totalProduced:n,totalPata:r,totalRevenue:s,totalCollection:a,lowStockItems:u,topDesigns:f,efficiency:E,pendingWork:x,pataSummary:I}},[t]);return i.jsxs("div",{className:"p-12 space-y-12 animate-fade-up",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"bg-gradient-to-br from-black to-zinc-800 p-4 rounded-3xl text-white shadow-2xl relative overflow-hidden group",children:[i.jsxs("div",{className:"relative z-10 px-2",children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-[0.4em] opacity-40 mb-4",children:"Total Revenue"}),i.jsxs("h3",{className:"text-5xl font-black italic tracking-tighter mb-2",children:["",e.totalRevenue.toLocaleString()]}),i.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-black text-xs font-bold uppercase",children:[i.jsx(M_,{size:14})," Predicted Growth"]})]}),i.jsx($f,{className:"absolute bottom-[-20%] right-[-10%] opacity-10 group-hover:scale-110 transition-transform",size:160})]}),i.jsxs("div",{className:"bg-white p-4 rounded-3xl border-4 border-slate-50 shadow-xl relative overflow-hidden group",children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-[0.4em] text-slate-600 font-bold mb-4",children:"Production Output"}),i.jsx("h3",{className:"text-5xl font-black italic tracking-tighter text-black mb-2",children:(e.totalProduced+e.totalPata).toLocaleString()}),i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-widest text-slate-400 font-bold",children:"Total Finished Units"}),i.jsx(pc,{className:"absolute bottom-[-10%] right-[-5%] text-slate-100 opacity-50",size:120})]}),i.jsxs("div",{className:"bg-white p-4 rounded-3xl border-4 border-slate-50 shadow-xl relative overflow-hidden",children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-[0.4em] text-slate-600 font-bold mb-4",children:"Work Efficiency"}),i.jsxs("div",{className:"flex items-end gap-3",children:[i.jsxs("h3",{className:"text-7xl font-black italic tracking-tighter text-black",children:[e.efficiency,"%"]}),i.jsx("div",{className:"mb-4 space-y-1",children:i.jsx("div",{className:"w-12 h-2 bg-slate-100 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-black",style:{width:`${e.efficiency}%`}})})})]}),i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-widest text-emerald-500 mt-2",children:"Active Completion Rate"})]}),i.jsxs("div",{className:`p-4 rounded-3xl border-4 shadow-xl relative overflow-hidden transition-all ${e.lowStockItems.length>0?"bg-rose-50 border-rose-100":"bg-emerald-50 border-emerald-100"}`,children:[i.jsx("p",{className:`text-xs font-bold font-black uppercase tracking-[0.4em] mb-4 ${e.lowStockItems.length>0?"text-rose-400":"text-emerald-400"}`,children:"Material Status"}),i.jsx("h3",{className:`text-5xl font-black italic tracking-tighter mb-2 ${e.lowStockItems.length>0?"text-rose-600":"text-emerald-600"}`,children:e.lowStockItems.length>0?"CRITICAL":"OPTIMAL"}),i.jsxs("p",{className:"text-xs font-bold font-black uppercase tracking-widest opacity-50",children:[e.lowStockItems.length," Items needing restock"]}),i.jsx(fc,{className:`absolute bottom-[-10%] right-[-5%] opacity-10 ${e.lowStockItems.length>0?"text-rose-500":"text-emerald-500"}`,size:120})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[i.jsxs("div",{className:"bg-white rounded-3xl border-4 border-slate-50 shadow-2xl overflow-hidden p-12",children:[i.jsx("div",{className:"flex justify-between items-center mb-4",children:i.jsxs("h4",{className:"text-2xl font-black uppercase italic tracking-tighter flex items-center gap-3 text-black",children:[i.jsx(q_,{className:"text-amber-500",fill:"currentColor"})," Top Performing Designs"]})}),i.jsxs("div",{className:"space-y-6",children:[e.topDesigns.map(([n,r],s)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-3xl group hover:bg-black hover:text-white transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"w-10 h-10 flex items-center justify-center bg-white rounded-xl text-black font-black text-xs shadow-sm",children:["#",s+1]}),i.jsx("p",{className:"text-xl font-black uppercase italic",children:n})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl font-black italic tracking-tighter",children:["+",r.toLocaleString()]}),i.jsx("p",{className:"text-[11px] font-bold font-black uppercase opacity-40",children:"Total Yield"})]})]},s)),e.topDesigns.length===0&&i.jsx("p",{className:"text-center py-20 text-slate-400 font-bold font-black uppercase tracking-[0.5em] italic",children:"No production data yet"})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-3xl border-4 border-slate-50 shadow-2xl p-12 h-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h4",{className:"text-2xl font-black uppercase italic tracking-tighter flex items-center gap-3 text-black",children:[i.jsx(vh,{size:24,className:"text-amber-500"})," Prepared Pata Stock"]}),i.jsxs("span",{className:"px-6 py-2 bg-emerald-50 text-emerald-500 rounded-full text-xs font-bold font-black uppercase tracking-widest",children:[e.pataSummary.length," Varieties"]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3 overflow-y-auto max-h-[400px] pr-2 custom-scrollbar",children:[e.pataSummary.map((n,r)=>i.jsxs("div",{className:"flex items-center justify-between p-4 border-2 border-slate-50 rounded-3xl bg-slate-50/50 italic group hover:border-black transition-all",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xl font-black text-black uppercase",children:n.design}),i.jsxs("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase mt-1",children:[n.color,"  ",n.type]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs font-black text-slate-400 font-bold uppercase",children:"Balance"}),i.jsx("p",{className:`text-4xl font-black italic tracking-tighter leading-none ${n.balance>0?"text-black":"text-rose-500"}`,children:n.balance})]})})]},r)),e.pataSummary.length===0&&i.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-slate-100 gap-3",children:[i.jsx(Io,{size:80,strokeWidth:1}),i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-[0.6em]",children:"No Pata Stock Data"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-3xl border-4 border-slate-50 shadow-2xl p-12 h-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h4",{className:"text-2xl font-black uppercase italic tracking-tighter flex items-center gap-3 text-black",children:[i.jsx(fc,{className:"text-rose-500"})," Stock Alert Center"]}),i.jsxs("span",{className:"px-6 py-2 bg-rose-50 text-rose-500 rounded-full text-xs font-bold font-black uppercase tracking-widest",children:[e.lowStockItems.length," Warnings"]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3 overflow-y-auto max-h-[400px] pr-2 custom-scrollbar",children:[e.lowStockItems.map((n,r)=>i.jsxs("div",{className:"flex items-center justify-between p-4 border-2 border-rose-50 rounded-3xl bg-rose-50/20 italic",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xl font-black text-black uppercase",children:n.name}),i.jsx("p",{className:"text-xs font-bold font-black text-rose-300 uppercase mt-1",children:n.color||"Standard Material"})]}),i.jsxs("div",{className:"flex items-baseline gap-2",children:[i.jsx("span",{className:"text-4xl font-black text-rose-600 italic tracking-tighter",children:n.qty}),i.jsx("span",{className:"text-xs font-bold font-black text-rose-400 uppercase",children:"Left"})]})]},r)),e.lowStockItems.length===0&&i.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-slate-100 gap-3",children:[i.jsx(nu,{size:80,strokeWidth:1}),i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-[0.6em]",children:"All Stock Levels Healthy"})]})]})]})]})]})]})},tj=({masterData:t,user:e,setActivePanel:n})=>{const[r,s]=G.useState((e==null?void 0:e.role)==="admin"?"intel":"summary"),[a,o]=G.useState("productions"),[c,u]=G.useState(""),d=(e==null?void 0:e.role)==="worker",f=(e==null?void 0:e.role)==="admin",x=t.productions.filter(I=>{const A=d?I.worker.toLowerCase()===e.name.toLowerCase():!0,O=I.worker.toLowerCase().includes(c.toLowerCase())||I.design.toLowerCase().includes(c.toLowerCase());return A&&O}),b=t.cuttingStock.filter(I=>I.design.toLowerCase().includes(c.toLowerCase())),E=t.pataEntries.filter(I=>(d?I.worker.toLowerCase()===e.name.toLowerCase():!0)&&I.worker.toLowerCase().includes(c.toLowerCase()));return i.jsxs("div",{className:"space-y-12 pb-24 animate-fade-up px-2 italic text-black font-outfit",children:[i.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>n("Overview"),className:"p-4 bg-white text-black rounded-2xl border border-slate-100 shadow-sm hover:bg-black hover:text-white transition-all group",children:i.jsx(yt,{size:20,className:"group-hover:-translate-x-1 transition-transform"})}),i.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 rounded-3xl border-4 border-slate-50 shadow-2xl",children:[i.jsx("div",{className:"p-4 bg-black text-white rounded-xl shadow-2xl rotate-3 hover:rotate-0 transition-transform",children:i.jsx(z_,{size:36,strokeWidth:3})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-4xl font-black uppercase italic tracking-tighter leading-none text-black",children:["Analytics ",i.jsx("span",{className:"text-slate-100",children:"Hub"})]}),i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.4em] mt-3 italic",children:"DATA AUDIT & REPORTS"})]})]})]})}),i.jsxs("div",{className:"flex bg-slate-50 p-3 rounded-2xl border border-slate-100 shadow-inner overflow-x-auto no-scrollbar",children:[f&&i.jsx("button",{onClick:()=>s("intel"),className:`px-10 py-6 rounded-xl font-black uppercase text-xs tracking-widest transition-all ${r==="intel"?"bg-black text-white shadow-2xl":"text-slate-600 font-bold hover:text-black"}`,children:"Intelligence"}),!f&&i.jsx("button",{onClick:()=>s("summary"),className:`px-10 py-6 rounded-xl font-black uppercase text-xs tracking-widest transition-all ${r==="summary"?"bg-black text-white shadow-2xl":"text-slate-600 font-bold hover:text-black"}`,children:"Ledger"}),i.jsx("button",{onClick:()=>s("invoice"),className:`px-10 py-6 rounded-xl font-black uppercase text-xs tracking-widest transition-all ${r==="invoice"?"bg-black text-white shadow-2xl":"text-slate-600 font-bold hover:text-black"}`,children:"Invoice Matrix"}),i.jsx("button",{onClick:()=>s("transactions"),className:`px-10 py-6 rounded-xl font-black uppercase text-xs tracking-widest transition-all ${r==="transactions"?"bg-black text-white shadow-2xl":"text-slate-600 font-bold hover:text-black"}`,children:"Audit Log"})]}),i.jsxs("div",{className:"bg-white rounded-3xl border-4 border-slate-50 shadow-2xl overflow-hidden min-h-[60vh]",children:[r==="intel"&&i.jsx(ej,{masterData:t}),r==="summary"&&i.jsx(Gy,{masterData:t,user:e}),r==="invoice"&&i.jsx(Z_,{masterData:t,user:e}),r==="transactions"&&i.jsxs("div",{className:"p-12 space-y-12",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center justify-between border-b-2 border-slate-50 pb-12",children:[i.jsx("div",{className:"flex gap-3",children:["productions","cutting","pata"].map(I=>i.jsx("button",{onClick:()=>o(I),className:`px-8 py-4 rounded-full text-xs font-bold font-black uppercase tracking-widest transition-all ${a===I?"bg-black text-white shadow-xl":"bg-slate-50 text-slate-600 font-bold hover:text-black"}`,children:I},I))}),i.jsxs("div",{className:"flex-1 w-full max-w-md bg-white p-4 rounded-full flex items-center gap-3 px-8 border border-slate-100 shadow-inner",children:[i.jsx(ar,{size:20,className:"text-slate-400 font-bold"}),i.jsx("input",{type:"text",placeholder:"Scanning...",className:"bg-transparent font-black italic border-none outline-none leading-none h-auto w-full uppercase text-sm text-black placeholder:text-slate-100",value:c,onChange:I=>u(I.target.value)})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"border-b-2 border-slate-50 text-xs font-bold font-black uppercase tracking-widest text-slate-600 font-bold italic",children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-6 px-4",children:"Date"}),i.jsx("th",{className:"py-6 px-4",children:"Details"}),i.jsx("th",{className:"py-6 px-4 text-center",children:"Status"}),i.jsx("th",{className:"py-6 px-4 text-right",children:"Yield"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100",children:[a==="productions"&&x.map(I=>i.jsxs("tr",{className:"text-sm font-black italic hover:bg-slate-50 transition-all",children:[i.jsx("td",{className:"py-8 px-4 text-slate-400 font-bold",children:I.date}),i.jsxs("td",{className:"py-8 px-4 uppercase text-black",children:[i.jsx("p",{className:"text-lg",children:I.worker}),i.jsxs("p",{className:"text-xs font-bold text-slate-600 font-bold",children:[I.design," (",I.color,")"]})]}),i.jsx("td",{className:"py-8 px-4 text-center",children:i.jsx("span",{className:`px-4 py-1.5 rounded-full text-[11px] font-bold font-black uppercase tracking-widest ${I.status==="Received"?"bg-black text-white shadow-xl":"bg-slate-50 text-slate-600 font-bold border border-slate-100"}`,children:I.status})}),i.jsxs("td",{className:"py-8 px-4 text-right text-2xl font-black italic tracking-tighter text-black",children:["+",I.issueBorka+I.issueHijab]})]},I.id)),a==="cutting"&&b.map(I=>i.jsxs("tr",{className:"text-sm font-black italic hover:bg-slate-50 transition-all",children:[i.jsx("td",{className:"py-8 px-4 text-slate-400 font-bold",children:I.date}),i.jsxs("td",{className:"py-8 px-4 uppercase text-black",children:[i.jsx("p",{className:"text-lg",children:I.design}),i.jsx("p",{className:"text-xs font-bold text-slate-600 font-bold",children:I.color})]}),i.jsx("td",{className:"py-8 px-4 text-center",children:i.jsx("span",{className:"px-4 py-1.5 rounded-full text-[11px] font-bold font-black uppercase tracking-widest bg-black text-white shadow-xl",children:"CUTTING"})}),i.jsxs("td",{className:"py-8 px-4 text-right text-4xl font-black italic tracking-tighter leading-none text-black",children:["+",I.borka+I.hijab]})]},I.id)),a==="pata"&&E.map(I=>i.jsxs("tr",{className:"text-sm font-black italic hover:bg-slate-50 transition-all",children:[i.jsx("td",{className:"py-8 px-4 text-slate-400 font-bold",children:I.date}),i.jsxs("td",{className:"py-8 px-4 uppercase text-black",children:[i.jsx("p",{className:"text-lg",children:I.design}),i.jsxs("p",{className:"text-xs font-bold text-slate-600 font-bold",children:[I.color," (",I.pataType,")"]})]}),i.jsx("td",{className:"py-8 px-4 text-center",children:i.jsx("span",{className:"px-4 py-1.5 rounded-full text-[11px] font-bold font-black uppercase tracking-widest bg-black text-white shadow-xl",children:"PATA"})}),i.jsxs("td",{className:"py-8 px-4 text-right text-4xl font-black italic tracking-tighter leading-none text-black",children:["+",I.pataQty]})]},I.id))]})]})})]})]}),i.jsx("div",{className:"pt-20 pb-10 flex justify-center",children:i.jsxs("button",{onClick:()=>n("Overview"),className:"group relative flex items-center gap-3 bg-white px-12 py-6 rounded-full border-4 border-slate-50 shadow-2xl hover:border-black transition-all duration-500",children:[i.jsx("div",{className:"p-3 bg-black text-white rounded-2xl group-hover:rotate-[-12deg] transition-transform",children:i.jsx(yt,{size:20,strokeWidth:3})}),i.jsx("span",{className:"text-lg font-black uppercase italic tracking-widest text-black",children:"  "}),i.jsx("div",{className:"absolute -inset-1 bg-black/5 blur-2xl rounded-full -z-10 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})},nj=({masterData:t,setMasterData:e,showNotify:n,setActivePanel:r})=>{const[s,a]=G.useState(new Date().toISOString().split("T")[0]),[o,c]=G.useState("sewing"),[u,d]=G.useState(!1),[f,x]=G.useState("attendance"),b=G.useMemo(()=>t.workerCategories[o]||[],[t.workerCategories,o]),E=T=>{var p,y;const g=((y=(p=t.workerWages)==null?void 0:p[o])==null?void 0:y[T])||0;return Math.round(g/30)},I=T=>{var p;const g=(p=t.attendance)==null?void 0:p.find(y=>y.date===s&&y.worker===T&&y.department===o);return(g==null?void 0:g.status)||"absent"},A=(T,g)=>{e(p=>{const y=(p.attendance||[]).findIndex(_=>_.date===s&&_.worker===T&&_.department===o);let k=[...p.attendance||[]];const C=E(T);let R=0;return g==="present"?R=C:g==="half-day"&&(R=Math.round(C/2)),y>=0?k[y]={...k[y],status:g,wage:R,markedAt:new Date().toISOString()}:k.push({id:Date.now(),date:s,worker:T,department:o,status:g,wage:R,markedAt:new Date().toISOString()}),g!=="absent"&&Ot({type:"ATTENDANCE_MARK",worker:T,detail:`${o}: ${g}`,amount:R}),{...p,attendance:k}}),n&&n(`${T}-    `)},O=G.useMemo(()=>(t.attendance||[]).filter(T=>T.date===s&&T.department===o),[t.attendance,s,o]),N=G.useMemo(()=>{const T=O.filter(y=>y.status==="present").length,g=O.filter(y=>y.status==="half-day").length,p=O.reduce((y,k)=>y+(k.wage||0),0);return{present:T,halfDay:g,wages:p}},[O]),v=T=>{const g=["","","","","","",""],p=new Date(T);return g[p.getDay()]},j=T=>{const g=["","","","","","","","","","","",""],p=new Date(T);return`${p.getDate()} ${g[p.getMonth()]}`},S=(()=>{const T=new Date,g=new Date(T);g.setDate(T.getDate()-T.getDay()-1);const p=new Date(g);p.setDate(g.getDate()+5);const y=b.map(k=>{const C=(t.attendance||[]).filter(_=>_.worker===k&&_.department===o&&new Date(_.date)>=g&&new Date(_.date)<=p),R=C.reduce((_,ae)=>_+(ae.wage||0),0);return{worker:k,presentDays:C.filter(_=>_.status==="present").length+C.filter(_=>_.status==="half-day").length*.5,wage:E(k),totalWage:R}});return{saturday:g,thursday:p,workers:y,totalPayable:y.reduce((k,C)=>k+C.totalWage,0)}})();return u?i.jsxs("div",{className:"space-y-12 p-12 bg-white text-black min-h-screen italic font-sans selection:bg-black selection:text-white",children:[i.jsx("style",{children:"@media print { .no-print { display: none; } }"}),i.jsxs("div",{className:"flex justify-between items-center no-print mb-4",children:[i.jsx("button",{onClick:()=>d(!1),className:"bg-slate-50 text-black px-10 py-5 rounded-full font-black uppercase text-xs border border-slate-100 shadow-sm hover:bg-black hover:text-white transition-all",children:" "}),i.jsx("button",{onClick:()=>window.print(),className:"bg-black text-white px-12 py-5 rounded-full font-black uppercase text-xs shadow-2xl border-b-[8px] border-zinc-900",children:" "})]}),i.jsxs("div",{className:"max-w-4xl mx-auto border-[12px] border-slate-50 p-20 rounded-[5rem] shadow-3xl",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsxs("h1",{className:"text-7xl font-black italic tracking-tighter mb-4 text-black uppercase",children:["NRZONE ",i.jsx("span",{className:"text-slate-400 font-bold",children:"PRO"})]}),i.jsx("div",{className:"h-2 w-40 bg-black mx-auto mb-5 rounded-full"}),i.jsx("p",{className:"text-xl font-black uppercase tracking-[0.4em] text-slate-600 font-bold italic",children:"Weekly Wage Statement"}),i.jsxs("p",{className:"text-sm font-black text-slate-500 font-bold mt-2 uppercase tracking-widest",children:[o.toUpperCase()," DEPT  ",s]})]}),i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"border-b-4 border-slate-50",children:i.jsxs("tr",{className:"text-xs font-bold font-black uppercase tracking-[0.3em] text-slate-600 font-bold",children:[i.jsx("th",{className:"py-8",children:"Identity (Master)"}),i.jsx("th",{className:"py-8 text-center",children:"Duty Days"}),i.jsx("th",{className:"py-8 text-right",children:"Day Rate"}),i.jsx("th",{className:"py-8 text-right",children:"Net Payable"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-50 italic",children:S.workers.map((T,g)=>i.jsxs("tr",{className:"text-2xl font-black group",children:[i.jsx("td",{className:"py-8 uppercase tracking-tighter text-black",children:T.worker}),i.jsxs("td",{className:"py-8 text-center text-slate-600 font-bold",children:[T.presentDays," ",i.jsx("span",{className:"text-xs font-bold tracking-widest",children:"DAYS"})]}),i.jsxs("td",{className:"py-8 text-right text-slate-500 font-bold",children:["",T.wage]}),i.jsxs("td",{className:"py-8 text-right text-black",children:["",T.totalWage.toLocaleString()]})]},g))}),i.jsx("tfoot",{children:i.jsxs("tr",{className:"border-t-[12px] border-slate-50 font-black text-5xl",children:[i.jsx("td",{colSpan:"3",className:"py-12 text-right italic text-slate-400 font-bold",children:"TOTAL:"}),i.jsxs("td",{className:"py-12 text-right italic text-black underline underline-offset-[12px] decoration-4",children:["",S.totalPayable.toLocaleString()]})]})})]}),i.jsxs("div",{className:"mt-24 pt-12 border-t border-slate-100 flex justify-between items-end opacity-20",children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-[0.5em]",children:"Auth Signature"}),i.jsx("p",{className:"text-xs font-bold font-black uppercase tracking-[0.5em]",children:"NRZONE INTELLIGENCE UNIT"})]})]})]}):i.jsxs("div",{className:"space-y-12 pb-24 animate-fade-up px-2 italic text-black font-outfit",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>r("Overview"),className:"p-4 bg-white text-black rounded-2xl border border-slate-100 shadow-sm hover:bg-black hover:text-white transition-all group",children:i.jsx(yt,{size:20,className:"group-hover:-translate-x-1 transition-transform"})}),i.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 premium-card rounded-3xl border-4 border-slate-50 shadow-xl w-full md:w-auto",children:[i.jsx("div",{className:"p-4 bg-black text-white rounded-xl shadow-2xl rotate-3 transition-transform hover:rotate-0",children:f==="attendance"?i.jsx(Hy,{size:36,strokeWidth:3}):i.jsx(Ox,{size:36,strokeWidth:3})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-4xl font-black uppercase italic tracking-tighter leading-none text-black",children:["Workforce ",i.jsx("span",{className:"text-slate-100",children:"Hub"})]}),i.jsxs("div",{className:"flex gap-3 mt-4",children:[i.jsx("button",{onClick:()=>x("attendance"),className:`text-xs font-bold font-black uppercase tracking-widest px-6 py-2 rounded-full border transition-all ${f==="attendance"?"bg-black text-white border-black shadow-xl":"text-slate-600 font-bold border-slate-100 hover:text-black"}`,children:"Attendance"}),i.jsx("button",{onClick:()=>x("duty"),className:`text-xs font-bold font-black uppercase tracking-widest px-6 py-2 rounded-full border transition-all ${f==="duty"?"bg-black text-white border-black shadow-xl":"text-slate-600 font-bold border-slate-100 hover:text-black"}`,children:"Duty Logs"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl px-12 py-8 flex flex-col items-center md:items-end border-4 border-slate-50 shadow-xl min-w-[300px] w-full md:w-auto",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest mb-2 font-black",children:"Daily Expenditure"}),i.jsxs("p",{className:"text-5xl font-black italic tracking-tighter text-black",children:["",N.wages.toLocaleString()," ",i.jsx("span",{className:"text-sm not-italic text-slate-400 font-bold uppercase",children:"Wages"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-2xl relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 right-0 p-5 text-slate-50 -mr-4 -mt-4 group-hover:rotate-12 transition-transform opacity-10",children:i.jsx(Uy,{size:120,strokeWidth:3})}),i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 block tracking-widest mb-2",children:"Calendar Access"}),i.jsx("input",{type:"date",value:s,onChange:T=>a(T.target.value),className:"w-full text-5xl font-black italic border-none outline-none bg-transparent text-black"}),i.jsxs("p",{className:"mt-5 ml-6 text-xl font-black text-slate-100 uppercase tracking-widest italic",children:[v(s),"  ",j(s)]})]}),i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-2xl relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 right-0 p-5 text-slate-50 -mr-4 -mt-4 group-hover:-rotate-12 transition-transform opacity-10",children:i.jsx(Wf,{size:120,strokeWidth:3})}),i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase ml-6 block tracking-widest mb-2",children:"Operational Dept"}),i.jsxs("select",{value:o,onChange:T=>c(T.target.value),className:"w-full text-4xl font-black italic border-none outline-none bg-transparent uppercase text-black",children:[i.jsx("option",{value:"sewing",children:" "}),i.jsx("option",{value:"stone",children:" "}),i.jsx("option",{value:"pata",children:" "}),i.jsx("option",{value:"monthly",children:" "})]})]})]}),f==="attendance"?i.jsxs("div",{className:"space-y-12",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-xl flex flex-col justify-between h-56 italic",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-500 font-bold uppercase tracking-widest",children:"W_FORCE"}),i.jsx("h4",{className:"text-7xl font-black tracking-tighter leading-none",children:b.length}),i.jsx("p",{className:"text-[11px] font-bold font-black text-slate-400 font-bold uppercase tracking-widest",children:"Total Active Staff"})]}),i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-xl flex flex-col justify-between h-56 italic",children:[i.jsx("p",{className:"text-xs font-bold font-black text-emerald-200 uppercase tracking-widest",children:"PRESENT"}),i.jsx("h4",{className:"text-7xl font-black tracking-tighter leading-none text-emerald-500",children:N.present}),i.jsxs("p",{className:"text-[11px] font-bold font-black text-slate-400 font-bold uppercase tracking-widest",children:[N.halfDay," PARTIAL DUTIES"]})]}),i.jsxs("button",{onClick:()=>d(!0),className:"bg-black text-white p-12 rounded-3xl flex flex-col justify-between h-56 group hover:scale-[1.02] transition-all relative overflow-hidden shadow-2xl",children:[i.jsx("div",{className:"absolute bottom-0 right-0 -mr-4 -mb-4 text-white/5 rotate-12 group-hover:rotate-0 transition-transform",children:i.jsx(Vi,{size:160})}),i.jsx("p",{className:"text-xs font-bold font-black text-white/40 uppercase tracking-widest",children:"Print Weekly Receipt"}),i.jsx("h4",{className:"text-5xl font-black tracking-tighter leading-none uppercase italic border-b-4 border-white/20 pb-2 inline-block",children:"Generate"}),i.jsx(Vi,{className:"text-emerald-400 self-end",size:24})]})]}),i.jsx("div",{className:"bg-white rounded-3xl border-4 border-slate-50 shadow-2xl overflow-hidden p-12",children:i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:b.length===0?i.jsxs("div",{className:"col-span-full py-32 flex flex-col items-center justify-center opacity-10",children:[i.jsx(fo,{size:80}),i.jsx("p",{className:"text-2xl font-black uppercase mt-4",children:"No Workers Configured"})]}):b.map((T,g)=>{const p=I(T),y=E(T);return i.jsxs("div",{className:"bg-slate-50 p-5 rounded-3xl border border-slate-100 flex flex-col xl:flex-row items-center justify-between gap-3 group hover:bg-white hover:border-black hover:shadow-2xl transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-20 h-20 bg-black text-white rounded-xl font-black text-3xl flex items-center justify-center shadow-xl group-hover:rotate-12 transition-transform",children:T[0].toUpperCase()}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-3xl font-black italic uppercase leading-none text-black group-hover:scale-105 transition-transform origin-left",children:T}),i.jsxs("p",{className:"text-xs font-bold font-black text-slate-500 font-bold uppercase tracking-[0.3em] mt-3 group-hover:text-slate-600 font-bold decoration-slate-200 underline underline-offset-4 decoration-2",children:["",y.toLocaleString()," / Daily"]})]})]}),i.jsx("div",{className:"flex bg-white/50 backdrop-blur-3xl p-2 rounded-full border border-slate-100 shadow-inner w-full xl:w-auto",children:["present","half-day","absent"].map(k=>i.jsx("button",{onClick:()=>A(T,k),className:`flex-1 min-w-[100px] py-4 rounded-full text-xs font-bold font-black uppercase tracking-widest transition-all ${p===k?k==="present"?"bg-black text-white shadow-xl":k==="half-day"?"bg-amber-500 text-white shadow-xl":"bg-rose-500 text-white shadow-xl":"text-slate-500 font-bold hover:text-black hover:bg-slate-50"}`,children:k==="present"?"":k==="half-day"?"":""},k))})]},g)})})})]}):i.jsx("div",{className:"space-y-12",children:i.jsxs("div",{className:"bg-white p-12 rounded-[5rem] border-4 border-slate-50 shadow-2xl italic text-black",children:[i.jsxs("div",{className:"flex items-center justify-between mb-16 px-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-4xl font-black uppercase tracking-tighter leading-none mb-3",children:"Live Duty Logs"}),i.jsx("p",{className:"text-xs font-bold font-black text-slate-500 font-bold uppercase tracking-[0.5em]",children:"Real-time Work Assignments"})]}),i.jsx(Ox,{size:48,className:"text-slate-50"})]}),i.jsx("div",{className:"space-y-6",children:(t.productions||[]).filter(T=>T.status==="Pending"&&(T.type===o||o==="sewing"&&T.type==="finishing")).length===0?i.jsxs("div",{className:"py-32 flex flex-col items-center justify-center text-slate-100 gap-3",children:[i.jsx(Fy,{size:80,strokeWidth:1}),i.jsx("p",{className:"text-xl font-black uppercase tracking-[0.4em]",children:"  "})]}):(t.productions||[]).filter(T=>T.status==="Pending"&&(T.type===o||o==="sewing"&&T.type==="finishing")).map(T=>i.jsxs("div",{className:"bg-slate-50 p-4 rounded-3xl border-2 border-slate-100 flex items-center justify-between group hover:border-black hover:bg-white hover:shadow-2xl transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-24 h-24 bg-black text-white rounded-2xl font-black italic text-3xl flex items-center justify-center shadow-xl group-hover:rotate-12 transition-transform border-4 border-slate-50",children:T.size}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-4xl font-black italic uppercase leading-none mb-4 text-black",children:T.design}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("span",{className:"text-[11px] font-bold font-black text-slate-600 font-bold uppercase tracking-widest bg-white px-4 py-1.5 rounded-full border border-slate-100",children:T.worker}),i.jsx("span",{className:"text-[11px] font-bold font-black text-slate-600 font-bold uppercase tracking-widest bg-white px-4 py-1.5 rounded-full border border-slate-100",children:T.color})]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[i.jsx("p",{className:"text-xs font-black text-slate-500 font-bold uppercase italic",children:"Issued Units:"}),i.jsxs("p",{className:"text-5xl font-black italic text-black leading-none",children:["B:",T.issueBorka," / H:",T.issueHijab]})]}),i.jsxs("p",{className:"text-[11px] font-bold font-black text-emerald-500 uppercase tracking-[0.4em] mt-3 animate-pulse",children:["Pending Collection  ",T.date]})]})]},T.id))})]})}),i.jsx("div",{className:"pt-20 pb-10 flex justify-center",children:i.jsxs("button",{onClick:()=>r("Overview"),className:"group relative flex items-center gap-3 bg-white px-12 py-6 rounded-full border-4 border-slate-50 shadow-2xl hover:border-black transition-all duration-500",children:[i.jsx("div",{className:"p-3 bg-black text-white rounded-2xl group-hover:rotate-[-12deg] transition-transform",children:i.jsx(yt,{size:20,strokeWidth:3})}),i.jsx("span",{className:"text-lg font-black uppercase italic tracking-widest text-black",children:"  "}),i.jsx("div",{className:"absolute -inset-1 bg-black/5 blur-2xl rounded-full -z-10 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})},rj=({masterData:t,setMasterData:e,user:n,showNotify:r,setActivePanel:s})=>{var ae,Ge,wt;const[a,o]=G.useState("users"),[c,u]=G.useState(null),[d,f]=G.useState(!1),[x,b]=G.useState("sewing"),[E,I]=G.useState(!1),[A,O]=G.useState(null),N=async F=>{if(!F)return null;I(!0);try{return new Promise(z=>{const $=new FileReader;$.onloadend=()=>{I(!1),z($.result)},$.readAsDataURL(F)})}catch(z){return console.error("Local preview failed",z),I(!1),null}},v=(F,z)=>{z.trim()&&(e($=>({...$,[F]:[...$[F]||[],z.toUpperCase()]})),f(!1))},j=(F,z)=>{confirm("Delete this item?")&&e($=>({...$,[F]:$[F].filter((Q,se)=>se!==z)}))},L=(F,z,$)=>{$.trim()&&(e(Q=>({...Q,[F]:Q[F].map((se,ce)=>ce===z?$.toUpperCase():se)})),u(null))},S=(F,z,$)=>{z.trim()&&(e(Q=>({...Q,workerCategories:{...Q.workerCategories,[F]:[...Q.workerCategories[F]||[],z.toUpperCase()]},workerWages:{...Q.workerWages,[F]:{...Q.workerWages[F],[z.toUpperCase()]:Number($)||0}}})),f(!1))},T=(F,z)=>{confirm(`Delete worker ${z}?`)&&e($=>({...$,workerCategories:{...$.workerCategories,[F]:$.workerCategories[F].filter(Q=>Q!==z)}}))},g=(F,z,$,Q)=>{if(!$.trim())return;const se=$.toUpperCase();e(ce=>{const He=ce.workerCategories[F].map(Ct=>Ct===z?se:Ct),Ce={...ce.workerWages[F]};return z!==se&&delete Ce[z],Ce[se]=Number(Q)||0,{...ce,workerCategories:{...ce.workerCategories,[F]:He},workerWages:{...ce.workerWages,[F]:Ce}}}),u(null)},p=(F,z,$,Q)=>{!F.trim()||!z.trim()||(e(se=>({...se,users:[...se.users||[],{id:F.toUpperCase(),password:z,name:$||F,role:Q||"manager"}]})),f(!1))},y=(F,z)=>{e($=>({...$,users:$.users.map((Q,se)=>se===F?{...Q,...z}:Q)})),u(null),r("User updated successfully")},k=F=>{if(F==="NRZONE")return alert("Cannot delete Super Admin");confirm(`Delete user ${F}?`)&&e(z=>({...z,users:z.users.filter($=>$.id!==F)}))},C=(F,z,$,Q,se,ce,He)=>{F.trim()&&(e(Ce=>({...Ce,designs:[...Ce.designs,{name:F,sewingRate:Number(z)||0,stoneRate:Number($)||0,pataRate:Number(Q)||0,hijabRate:Number(se)||0,materialCost:Number(ce)||0,sellingPrice:Number(He)||0,image:A||""}]})),O(null),f(!1))},R=F=>{confirm("Delete this design?")&&e(z=>({...z,designs:z.designs.filter(($,Q)=>Q!==F)}))},_=({category:F,title:z,items:$,icon:Q})=>i.jsxs("div",{className:"space-y-10 animate-fade-up text-black",children:[i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-2xl flex justify-between items-center italic relative overflow-hidden group",children:[i.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[i.jsx("div",{className:"p-4 bg-black text-white rounded-3xl group-hover:rotate-6 transition-transform",children:Q?Cn.cloneElement(Q,{size:32}):i.jsx(Io,{size:32})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-4xl font-black uppercase tracking-tighter leading-none italic",children:z}),i.jsxs("p",{className:"text-[11px] text-slate-600 font-bold font-black uppercase tracking-[0.5em] mt-4 italic",children:[($==null?void 0:$.length)||0," NODES CONFIGURED"]})]})]}),i.jsx("button",{onClick:()=>f(F),className:"w-20 h-20 bg-black text-white rounded-2xl flex items-center justify-center hover:scale-110 transition-all shadow-2xl border-b-[12px] border-zinc-900 relative z-10",children:i.jsx(Pt,{size:36,strokeWidth:3})})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:$==null?void 0:$.map((se,ce)=>{const He=c===`${F}-${ce}`;return i.jsx("div",{className:"bg-white p-4 rounded-3xl border-4 border-slate-50 flex flex-col justify-between group hover:border-black transition-all italic shadow-2xl relative overflow-hidden h-64",children:He?i.jsxs("div",{className:"space-y-6 relative z-10 h-full flex flex-col",children:[i.jsx("input",{autoFocus:!0,id:`edit-${F}-${ce}`,className:"form-input bg-slate-50 border-slate-100 text-xl font-black text-center py-6 italic appearance-none",defaultValue:se}),i.jsx("button",{onClick:()=>L(F,ce,document.getElementById(`edit-${F}-${ce}`).value),className:"w-full bg-black text-white py-4 rounded-full font-black uppercase text-xs font-bold tracking-widest shadow-2xl mt-auto",children:"SAVE"})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"font-black text-2xl uppercase tracking-tighter leading-none mb-5 relative z-10 italic",children:se}),i.jsxs("div",{className:"flex gap-3 opacity-10 group-hover:opacity-100 transition-all relative z-10",children:[i.jsx("button",{onClick:()=>u(`${F}-${ce}`),className:"flex-1 h-12 rounded-2xl bg-slate-50 flex items-center justify-center text-slate-400 font-bold hover:text-black transition-all",children:i.jsx(ud,{size:16})}),i.jsx("button",{onClick:()=>j(F,index),className:"flex-1 h-12 rounded-2xl bg-slate-50 flex items-center justify-center text-slate-400 font-bold hover:text-rose-500 transition-all",children:i.jsx(zn,{size:16})})]})]})},ce)})})]});return i.jsxs("div",{className:"space-y-12 pb-24 animate-fade-up px-2 italic text-black font-outfit",children:[i.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>s("Overview"),className:"p-4 bg-white text-black rounded-2xl border border-slate-100 shadow-sm hover:bg-black hover:text-white transition-all group",children:i.jsx(yt,{size:20,className:"group-hover:-translate-x-1 transition-transform"})}),i.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 rounded-3xl border-4 border-slate-50 shadow-2xl",children:[i.jsx("div",{className:"p-4 bg-black text-white rounded-xl shadow-2xl rotate-3",children:i.jsx(zi,{size:36,strokeWidth:3})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-4xl font-black uppercase italic tracking-tighter leading-none",children:["System ",i.jsx("span",{className:"text-slate-100",children:"Config"})]}),i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.4em] mt-3 italic",children:"Infrastructure Archive"})]})]})]})}),i.jsx("div",{className:"flex bg-slate-50 p-3 rounded-2xl border border-slate-100 shadow-inner overflow-x-auto no-scrollbar",children:[{id:"profile",label:"MY PROFILE",icon:i.jsx(Wy,{size:20})},{id:"users",label:"IDENTITY",icon:i.jsx(W_,{size:20})},{id:"workers",label:"WORKERS",icon:i.jsx(Wf,{size:20})},{id:"designs",label:"DESIGNS",icon:i.jsx(po,{size:20})},{id:"colors",label:"COLORS",icon:i.jsx(Pt,{size:20})},{id:"sizes",label:"SIZES",icon:i.jsx(gs,{size:20})},{id:"pata",label:"PATA",icon:i.jsx(gs,{size:20})}].map(F=>F.id==="users"&&(n==null?void 0:n.role)!=="admin"&&(n==null?void 0:n.id)!=="NRZONE"?null:i.jsxs("button",{onClick:()=>o(F.id),className:`flex-1 min-w-[150px] py-10 rounded-2xl font-black text-[12px] uppercase tracking-[0.3em] transition-all italic flex flex-col items-center gap-3 ${a===F.id?"bg-black text-white shadow-2xl":"text-slate-600 font-bold"}`,children:[F.icon,i.jsx("span",{children:F.label})]},F.id))}),i.jsxs("div",{className:"space-y-12",children:[a==="workers"&&i.jsx("div",{className:"space-y-12",children:["sewing","stone","pata","cutting","finishing","logistics","monthly"].map(F=>{var z;return i.jsxs("div",{className:"bg-white rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden italic text-black",children:[i.jsxs("div",{className:"p-12 border-b-2 border-slate-50 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-3xl font-black uppercase tracking-tighter italic flex items-center gap-3",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-black animate-pulse"}),F==="monthly"?"OFFICE STAFF":F==="logistics"?"OUTSIDE / LOGISTICS":`${F.toUpperCase()} DEPT`]}),i.jsx("button",{onClick:()=>{b(F),f("worker")},className:"p-4 bg-black text-white rounded-3xl shadow-xl hover:rotate-12 transition-transform",children:i.jsx(Pt,{size:24})})]}),i.jsx("div",{className:"p-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:(z=t.workerCategories[F])==null?void 0:z.map(($,Q)=>{var He,Ce;const se=((Ce=(He=t.workerWages)==null?void 0:He[F])==null?void 0:Ce[$])||0,ce=c===`${F}-${$}`;return i.jsx("div",{className:"bg-slate-50 p-4 rounded-3xl group hover:bg-black hover:text-white transition-all relative overflow-hidden h-64 flex flex-col justify-between shadow-inner",children:ce?i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{id:`name-${F}-${Q}`,className:"form-input bg-white border-slate-100 py-4 italic font-black uppercase text-sm text-black",defaultValue:$}),i.jsx("input",{id:`wage-${F}-${$}`,type:"number",className:"form-input bg-white border-slate-100 py-4 italic font-black text-center text-xl text-black",defaultValue:se}),i.jsx("button",{onClick:()=>g(F,$,document.getElementById(`name-${F}-${Q}`).value,document.getElementById(`wage-${F}-${$}`).value),className:"w-full bg-black text-white py-4 rounded-full font-black text-xs font-bold uppercase shadow-2xl",children:"SAVE"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-black text-2xl uppercase tracking-tighter italic leading-none",children:$}),i.jsx("p",{className:"text-xs font-bold text-slate-600 font-bold mt-2",children:se>0?F==="monthly"?`${se.toLocaleString()} / FIXED SALARY`:`${se.toLocaleString()} / PER PIECE`:"FOLLOWS DESIGN RATE"})]}),i.jsxs("div",{className:"flex gap-3 opacity-0 group-hover:opacity-100 transition-all self-end",children:[i.jsx("button",{onClick:()=>u(`${F}-${$}`),className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center text-white",children:i.jsx(ud,{size:14})}),i.jsx("button",{onClick:()=>T(F,$),className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center text-white",children:i.jsx(zn,{size:14})})]})]})},Q)})})]},F)})}),a==="designs"&&i.jsxs("div",{className:"bg-white rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden italic text-black",children:[i.jsxs("div",{className:"p-12 border-b-2 border-slate-50 flex justify-between items-center",children:[i.jsx("h3",{className:"text-3xl font-black uppercase tracking-tighter italic",children:"STYLE REPOSITORY"}),i.jsx("button",{onClick:()=>f("design"),className:"p-4 bg-black text-white rounded-2xl shadow-2xl border-b-[12px] border-zinc-800 font-black text-sm uppercase tracking-widest",children:"ADD NEW STYLE"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold uppercase font-black text-xs font-bold tracking-widest",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-12 py-8",children:"PREVIEW"}),i.jsx("th",{className:"px-6 py-8",children:"IDENTITY"}),i.jsx("th",{className:"px-6 py-8 text-center",children:"SEWING "}),i.jsx("th",{className:"px-6 py-8 text-center",children:"HIJAB "}),i.jsx("th",{className:"px-6 py-8 text-center",children:"STONE "}),i.jsx("th",{className:"px-6 py-8 text-center",children:"PATA "}),i.jsx("th",{className:"px-6 py-8 text-center",children:"SELL "}),i.jsx("th",{className:"px-12 py-8 text-right",children:"ACTION"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-50",children:t.designs.map((F,z)=>i.jsxs("tr",{className:"hover:bg-slate-50 transition-all group",children:[i.jsx("td",{className:"px-12 py-6",children:i.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-3xl overflow-hidden border-2 border-slate-200",children:F.image?i.jsx("img",{src:F.image,alt:F.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 font-bold",children:i.jsx(U_,{size:24})})})}),i.jsx("td",{className:"px-6 py-6",children:i.jsx("p",{className:"font-black text-2xl uppercase tracking-tighter italic",children:F.name})}),i.jsxs("td",{className:"px-6 py-10 text-center font-black text-xl italic",children:["",F.sewingRate]}),i.jsxs("td",{className:"px-6 py-10 text-center font-black text-xl italic",children:["",F.hijabRate]}),i.jsxs("td",{className:"px-6 py-10 text-center font-black text-xl italic",children:["",F.stoneRate]}),i.jsxs("td",{className:"px-6 py-10 text-center font-black text-xl italic",children:["",F.pataRate||0]}),i.jsxs("td",{className:"px-6 py-10 text-center font-black text-xl italic text-emerald-500",children:["",F.sellingPrice]}),i.jsx("td",{className:"px-12 py-10 text-right",children:i.jsx("button",{onClick:()=>R(z),className:"w-12 h-12 rounded-2xl bg-slate-100 flex items-center justify-center text-slate-400 font-bold hover:text-rose-500 mx-auto transition-all",children:i.jsx(zn,{size:20})})})]},z))})]})})]}),a==="profile"&&i.jsxs("div",{className:"bg-white rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden italic text-black",children:[i.jsx("div",{className:"p-12 border-b-2 border-slate-50 flex justify-between items-center",children:i.jsx("h3",{className:"text-3xl font-black uppercase tracking-tighter italic",children:"Personal Security"})}),i.jsxs("div",{className:"p-12 max-w-2xl mx-auto space-y-10",children:[i.jsxs("div",{className:"bg-slate-50 p-4 rounded-3xl border-2 border-slate-100 flex items-center gap-3",children:[i.jsx("div",{className:"w-20 h-20 bg-black text-white rounded-xl flex items-center justify-center font-black text-4xl italic shadow-xl",children:(ae=n==null?void 0:n.id)==null?void 0:ae[0]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-3xl font-black uppercase tracking-tighter italic leading-none",children:n==null?void 0:n.name}),i.jsxs("p",{className:"text-[11px] font-black text-slate-500 font-bold uppercase tracking-widest mt-2",children:["ID: ",n==null?void 0:n.id,"  ROLE: ",n==null?void 0:n.role]})]})]}),i.jsxs("form",{onSubmit:F=>{F.preventDefault();const z=F.target.newPass.value,$=F.target.confirmPass.value;if(z!==$)return alert("Passwords do not match");const Q=t.users.findIndex(se=>se.id===n.id);y(Q,{password:z}),F.target.reset()},className:"space-y-8",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"bg-black text-white px-3 py-1 rounded-sm text-xs font-bold font-black uppercase italic tracking-widest inline-block mb-3 shadow-lg ml-5",children:"NEW PASSWORD"}),i.jsx("input",{name:"newPass",type:"password",className:"form-input text-2xl tracking-[0.6em] py-8 bg-slate-50 border-slate-100 focus:border-black text-black",placeholder:"",required:!0})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"bg-black text-white px-3 py-1 rounded-sm text-xs font-bold font-black uppercase italic tracking-widest inline-block mb-3 shadow-lg ml-5",children:"CONFIRM PASSWORD"}),i.jsx("input",{name:"confirmPass",type:"password",className:"form-input text-2xl tracking-[0.6em] py-8 bg-slate-50 border-slate-100 focus:border-black text-black",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",className:"w-full bg-black text-white py-8 rounded-2xl font-black uppercase text-xs tracking-[0.4em] shadow-xl border-b-8 border-zinc-900 transition-all hover:translate-y-[-4px]",children:"Update Security Settings"})]})]})]}),a==="users"&&i.jsxs("div",{className:"bg-white rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden italic text-black",children:[i.jsxs("div",{className:"p-12 border-b-2 border-slate-50 flex justify-between items-center",children:[i.jsx("h3",{className:"text-3xl font-black uppercase tracking-tighter italic",children:"User Directory"}),i.jsx("button",{onClick:()=>f("user"),className:"p-4 bg-black text-white rounded-3xl shadow-xl hover:rotate-12 transition-transform",children:i.jsx(Pt,{size:24})})]}),i.jsx("div",{className:"p-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:(Ge=t.users)==null?void 0:Ge.map((F,z)=>{const $=c===`user-${z}`;return i.jsx("div",{className:"bg-slate-50 p-4 rounded-3xl border-2 border-slate-100 italic relative group shadow-inner min-h-[300px] flex flex-col justify-between",children:$?i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{id:`edit-user-id-${z}`,className:"form-input py-4 text-xs font-black bg-white uppercase",defaultValue:F.id,placeholder:"USER ID"}),i.jsx("input",{id:`edit-user-name-${z}`,className:"form-input py-4 text-xs font-black bg-white",defaultValue:F.name,placeholder:"NAME"}),i.jsx("input",{id:`edit-user-pass-${z}`,className:"form-input py-4 text-xs font-black bg-white tracking-widest",defaultValue:F.password,placeholder:"PASSWORD"}),i.jsxs("select",{id:`edit-user-role-${z}`,className:"form-input py-4 text-xs font-black bg-white",defaultValue:F.role,children:[i.jsx("option",{value:"manager",children:"MANAGER"}),i.jsx("option",{value:"admin",children:"ADMIN"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>u(null),className:"flex-1 bg-white text-slate-600 font-bold py-3 rounded-2xl font-black text-xs font-bold uppercase",children:"Cancel"}),i.jsx("button",{onClick:()=>y(z,{id:document.getElementById(`edit-user-id-${z}`).value.toUpperCase(),name:document.getElementById(`edit-user-name-${z}`).value,password:document.getElementById(`edit-user-pass-${z}`).value,role:document.getElementById(`edit-user-role-${z}`).value}),className:"flex-[2] bg-black text-white py-3 rounded-2xl font-black text-xs font-bold uppercase",children:"Save Changes"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsx("span",{className:`px-4 py-1.5 rounded-full text-[11px] font-bold font-black uppercase tracking-widest ${F.role==="admin"?"bg-black text-white":"bg-white text-slate-600 font-bold"}`,children:F.role}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>u(`user-${z}`),className:"opacity-0 group-hover:opacity-100 p-2 text-slate-500 font-bold hover:text-black transition-all",children:i.jsx(ud,{size:16})}),F.id!=="NRZONE"&&i.jsx("button",{onClick:()=>k(F.id),className:"opacity-0 group-hover:opacity-100 p-2 text-rose-300 hover:text-rose-500 transition-all",children:i.jsx(zn,{size:16})})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h4",{className:"text-3xl font-black uppercase tracking-tighter italic leading-none",children:F.name}),i.jsx("p",{className:"text-[11px] font-black text-slate-500 font-bold uppercase tracking-widest mt-2",children:F.id})]}),i.jsx("div",{className:"mt-5 pt-6 border-t border-slate-200/50 flex justify-between items-center",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-[8px] font-black text-slate-500 font-bold uppercase tracking-widest",children:"ACCESS KEY"}),i.jsx("p",{className:"font-black tracking-[0.3em] text-slate-600 font-bold",children:""})]})})]})},z)})})]}),a==="colors"&&i.jsx(_,{category:"colors",title:"COLOR PALETTE",items:t.colors,icon:i.jsx(gs,{})}),a==="sizes"&&i.jsx(_,{category:"sizes",title:"SIZE REPOSITORY",items:t.sizes,icon:i.jsx(gs,{})}),a==="pata"&&i.jsxs("div",{className:"space-y-12",children:[i.jsxs("div",{className:"bg-white rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden italic text-black",children:[i.jsxs("div",{className:"p-12 border-b-2 border-slate-50 flex items-center justify-between",children:[i.jsx("h3",{className:"text-3xl font-black uppercase tracking-tighter italic",children:"Pata Rate Matrix"}),i.jsx("p",{className:"text-xs font-bold text-slate-600 font-bold uppercase tracking-widest italic",children:"PRICING ARCHIVE"})]}),i.jsx("div",{className:"p-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:(wt=t.pataTypes)==null?void 0:wt.map(F=>{var z;return i.jsxs("div",{className:"bg-slate-50 p-4 rounded-3xl flex flex-col justify-between shadow-inner h-64",children:[i.jsx("p",{className:"font-black text-2xl uppercase tracking-tighter mb-5 italic",children:F}),i.jsxs("div",{className:"flex items-end gap-3 pt-8 border-t-2 border-slate-100",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-xs font-bold opacity-20 font-black italic uppercase mb-2",children:"YIELD RATE"}),i.jsx("input",{type:"number",defaultValue:((z=t.pataRates)==null?void 0:z[F])||0,className:"bg-transparent text-5xl font-black text-black text-left w-full outline-none italic leading-none",onBlur:$=>{e(Q=>({...Q,pataRates:{...Q.pataRates,[F]:Number($.target.value)||0}}))}})]}),i.jsx("div",{className:"text-3xl font-black opacity-10 italic",children:""})]})]},F)})})]}),i.jsx(_,{category:"pataTypes",title:"Pata Taxonomy",items:t.pataTypes,icon:i.jsx(gs,{})})]})]}),d==="user"&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-3xl z-[200] flex items-center justify-center p-4 text-black",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden p-16 space-y-12",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-4xl font-black uppercase italic mb-2",children:" "}),i.jsx("p",{className:"text-xl font-black tracking-widest text-slate-400 font-bold italic",children:"Identity Provisioning"})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx("input",{id:"new-user-id",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100 uppercase",placeholder:"USER ID"}),i.jsx("input",{id:"new-user-pass",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100",placeholder:"PASSWORD"}),i.jsx("input",{id:"new-user-name",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100 uppercase",placeholder:"DISPLAY NAME"}),i.jsxs("select",{id:"new-user-role",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100",children:[i.jsx("option",{value:"manager",children:"MANAGER"}),i.jsx("option",{value:"admin",children:"ADMIN"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-10 rounded-full font-black text-sm uppercase bg-slate-50 text-slate-600 font-bold",children:"Cancel"}),i.jsx("button",{onClick:()=>p(document.getElementById("new-user-id").value,document.getElementById("new-user-pass").value,document.getElementById("new-user-name").value,document.getElementById("new-user-role").value),className:"flex-[2] py-10 rounded-full font-black text-sm uppercase bg-black text-white shadow-2xl border-b-[12px] border-zinc-900",children:"Confirm"})]})]})]})}),d&&!["user","worker","design"].includes(d)&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-3xl z-[200] flex items-center justify-center p-4 text-black italic",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden p-16 space-y-12 animate-fade-up",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("h3",{className:"text-4xl font-black uppercase italic mb-2",children:["ADD ",d.toUpperCase()]}),i.jsx("p",{className:"text-xl font-black tracking-widest text-slate-400 font-bold italic",children:"Core configuration"})]}),i.jsxs("div",{className:"space-y-8 uppercase",children:[i.jsx("input",{id:"new-list-item-value",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100 italic",placeholder:"ENTER VALUE...",autoFocus:!0}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-10 rounded-full font-black text-sm uppercase bg-slate-50 text-slate-600 font-bold",children:"Cancel"}),i.jsx("button",{onClick:()=>v(d,document.getElementById("new-list-item-value").value),className:"flex-[2] py-10 rounded-full font-black text-sm uppercase bg-black text-white shadow-2xl border-b-[12px] border-zinc-900",children:"Confirm Creation"})]})]})]})}),d==="worker"&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-3xl z-[200] flex items-center justify-center p-4 text-black",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden p-16 space-y-12",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-4xl font-black uppercase italic mb-2",children:" "}),i.jsx("p",{className:"text-xl font-black tracking-widest text-slate-400 font-bold italic",children:"User Deployment"})]}),i.jsxs("div",{className:"space-y-8 uppercase",children:[i.jsxs("select",{id:"new-worker-dept",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100",value:x,onChange:F=>b(F.target.value),children:[i.jsx("option",{value:"sewing",children:"Sewing Dept"}),i.jsx("option",{value:"stone",children:"Stone Dept"}),i.jsx("option",{value:"pata",children:"Pata Dept"}),i.jsx("option",{value:"logistics",children:"Outside / Logistics"}),i.jsx("option",{value:"monthly",children:"Monthly Staff"})]}),i.jsx("input",{id:"new-worker-name",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100",placeholder:"NAME"}),i.jsx("input",{id:"new-worker-wage",type:"number",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100",placeholder:x==="monthly"?"SALARY ()":"SPECIFIC RATE ( - OPTIONAL)"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-10 rounded-full font-black text-sm uppercase bg-slate-50 text-slate-600 font-bold",children:"Cancel"}),i.jsx("button",{onClick:()=>{var F;return S(x,document.getElementById("new-worker-name").value,((F=document.getElementById("new-worker-wage"))==null?void 0:F.value)||0)},className:"flex-[2] py-10 rounded-full font-black text-sm uppercase bg-black text-white shadow-2xl border-b-[12px] border-zinc-900",children:"Confirm"})]})]})]})}),d==="design"&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-3xl z-[200] flex items-center justify-center p-4 text-black italic",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden p-16 space-y-10 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-4xl font-black uppercase italic mb-2",children:" "}),i.jsx("p",{className:"text-xl font-black tracking-widest text-slate-400 font-bold italic",children:"Product Development"})]}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("label",{className:"w-40 h-40 bg-slate-50 rounded-2xl border-4 border-dashed border-slate-200 flex flex-col items-center justify-center cursor-pointer hover:bg-slate-100 transition-all relative overflow-hidden group",children:[A?i.jsx("img",{src:A,alt:"Preview",className:"w-full h-full object-cover"}):i.jsxs(i.Fragment,{children:[E?i.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-black border-t-transparent rounded-full"}):i.jsx(G_,{size:32,className:"text-slate-500 font-bold group-hover:text-black transition-colors"}),i.jsx("span",{className:"text-[11px] font-bold font-black uppercase tracking-widest text-slate-500 font-bold mt-2",children:"Upload Photo"})]}),i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:async F=>{if(F.target.files[0]){const z=await N(F.target.files[0]);z&&O(z)}}})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("label",{className:"bg-black text-white px-4 py-2 rounded-sm text-xs font-black uppercase italic tracking-[0.2em] shadow-2xl",children:"Design Name"})}),i.jsx("input",{id:"new-design-name",className:"form-input py-6 text-xl font-black bg-white border-slate-100 uppercase text-center",placeholder:"DESIGN NAME",autoFocus:!0}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsx("label",{className:"bg-black text-white px-2 py-1 rounded-sm text-[11px] font-bold font-black uppercase italic tracking-widest inline-block mb-2 shadow-lg",children:"Sewing Rate"}),i.jsx("input",{id:"new-design-sewing",type:"number",className:"form-input py-4 text-center font-black bg-white border-slate-100",placeholder:"0"})]}),i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsx("label",{className:"bg-black text-white px-2 py-1 rounded-sm text-[11px] font-bold font-black uppercase italic tracking-widest inline-block mb-2 shadow-lg",children:"Hijab Rate"}),i.jsx("input",{id:"new-design-hijab",type:"number",className:"form-input py-4 text-center font-black bg-white border-slate-100",placeholder:"0"})]}),i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsx("label",{className:"bg-black text-white px-2 py-1 rounded-sm text-[11px] font-bold font-black uppercase italic tracking-widest inline-block mb-2 shadow-lg",children:"Stone Rate"}),i.jsx("input",{id:"new-design-stone",type:"number",className:"form-input py-4 text-center font-black bg-white border-slate-100",placeholder:"0"})]}),i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsx("label",{className:"bg-black text-white px-2 py-1 rounded-sm text-[11px] font-bold font-black uppercase italic tracking-widest inline-block mb-2 shadow-lg",children:"Pata Rate"}),i.jsx("input",{id:"new-design-pata",type:"number",className:"form-input py-4 text-center font-black bg-white border-slate-100",placeholder:"0"})]}),i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsx("label",{className:"bg-black text-white px-2 py-1 rounded-sm text-[11px] font-bold font-black uppercase italic tracking-widest inline-block mb-2 shadow-lg",children:"Material Cost"}),i.jsx("input",{id:"new-design-cost",type:"number",className:"form-input py-4 text-center font-black bg-white border-slate-100 placeholder:text-slate-400 font-bold",placeholder:"0"})]}),i.jsxs("div",{className:"space-y-2 text-center",children:[i.jsx("label",{className:"bg-black text-white px-2 py-1 rounded-sm text-[11px] font-bold font-black uppercase italic tracking-widest inline-block mb-2 shadow-lg",children:"Selling Price"}),i.jsx("input",{id:"new-design-sell",type:"number",className:"form-input py-4 text-center font-black text-emerald-600 bg-white border-emerald-100 placeholder:text-emerald-200",placeholder:"0"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-10 rounded-full font-black text-sm uppercase bg-slate-50 text-slate-600 font-bold",children:"Cancel"}),i.jsx("button",{onClick:()=>C(document.getElementById("new-design-name").value,document.getElementById("new-design-sewing").value,document.getElementById("new-design-stone").value,document.getElementById("new-design-pata").value,document.getElementById("new-design-hijab").value,document.getElementById("new-design-cost").value,document.getElementById("new-design-sell").value),className:"flex-[2] py-10 rounded-full font-black text-sm uppercase bg-black text-white shadow-2xl border-b-[12px] border-zinc-900",children:"Confirm Creation"})]})]})]})}),i.jsx("div",{className:"pt-20 pb-10 flex justify-center",children:i.jsxs("button",{onClick:()=>s("Overview"),className:"group relative flex items-center gap-3 bg-white px-12 py-6 rounded-full border-4 border-slate-50 shadow-2xl hover:border-black transition-all duration-500",children:[i.jsx("div",{className:"p-3 bg-black text-white rounded-2xl group-hover:rotate-[-12deg] transition-transform",children:i.jsx(yt,{size:20,strokeWidth:3})}),i.jsx("span",{className:"text-lg font-black uppercase italic tracking-widest text-black",children:"  "}),i.jsx("div",{className:"absolute -inset-1 bg-black/5 blur-2xl rounded-full -z-10 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})},sj=({masterData:t,setMasterData:e,initialTab:n,showNotify:r,user:s,setActivePanel:a})=>{const o=(s==null?void 0:s.role)==="admin",[c,u]=G.useState("Tea/Snacks"),f=(()=>{const p=t.workerCategories||{},y=[...p.sewing||[],...p.stone||[],...p.pata||[],...p.monthly||[]];return[...new Set(y)]})(),[x,b]=G.useState(n||"daily"),[E,I]=G.useState(new Date().toISOString().split("T")[0]),A=t.expenses||[],O=t.cashEntries||[],N=O.reduce((p,y)=>p+Number(y.amount),0),v=A.reduce((p,y)=>p+Number(y.amount),0),j=N-v,L=A.filter(p=>p.date===E),S=L.reduce((p,y)=>p+Number(y.amount),0),T=p=>{p.preventDefault();const y=p.target,k=Number(y.amount.value);if(k<=0)return r("   !","error");const C={id:Date.now(),date:y.date.value,description:y.description.value,category:y.category.value,amount:k,type:"expense"};e(R=>({...R,expenses:[C,...R.expenses||[]]})),Ot({type:"EXPENSE_OUT",detail:`${C.category}: ${C.description}`,amount:C.amount}),y.reset(),r(`${k}   !`)},g=p=>{p.preventDefault();const y=p.target,k=Number(y.amount.value),C={id:Date.now(),date:y.date.value,source:y.source.value,amount:k,type:"cash_in"};e(R=>({...R,cashEntries:[C,...R.cashEntries||[]]})),Ot({type:"CASH_IN",detail:C.source,amount:C.amount}),y.reset(),r(`${k}    !`)};return i.jsxs("div",{className:"space-y-12 pb-24 animate-fade-up px-2 italic text-black font-outfit",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>a("Overview"),className:"p-4 bg-white text-black rounded-2xl border border-slate-100 shadow-sm hover:bg-black hover:text-white transition-all group",children:i.jsx(yt,{size:20,className:"group-hover:-translate-x-1 transition-transform"})}),i.jsxs("h2",{className:"text-3xl font-black uppercase italic tracking-tighter",children:["Finance ",i.jsx("span",{className:"text-slate-400 font-bold",children:"Vault"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-2xl relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-5 text-black",children:i.jsx(Yr,{size:80})}),i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest",children:"Cash Balance"}),i.jsx("button",{onClick:()=>b("cashIn"),className:"bg-emerald-500 text-white px-6 py-2 rounded-full font-black text-[11px] font-bold uppercase tracking-widest hover:scale-105 transition-all shadow-lg",children:"+ Deposit"})]}),i.jsxs("h3",{className:`text-6xl font-black italic tracking-tighter ${j>=0?"text-black":"text-rose-500"}`,children:["",j.toLocaleString()]})]}),i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-2xl",children:[i.jsx("p",{className:"text-xs font-bold font-black text-rose-500/40 uppercase tracking-widest mb-4",children:"Total Expenses"}),i.jsxs("h3",{className:"text-5xl font-black text-rose-500 italic tracking-tighter",children:["",v.toLocaleString()]})]}),i.jsxs("div",{className:"bg-black p-12 rounded-3xl text-white shadow-2xl border-4 border-zinc-900",children:[i.jsx("p",{className:"text-xs font-bold font-black text-white/40 uppercase tracking-widest mb-4",children:"Revenue Flow"}),i.jsxs("h3",{className:"text-5xl font-black italic tracking-tighter",children:["",N.toLocaleString()]})]})]}),i.jsx("div",{className:"flex bg-white p-3 rounded-2xl border border-slate-100 shadow-inner overflow-x-auto no-scrollbar",children:[{id:"daily",label:"Expenses"},{id:"cashIn",label:"Revenue"},{id:"worker",label:"Ledger"},{id:"invoice",label:"Payroll"},{id:"report",label:"Reports"}].map(p=>i.jsx("button",{onClick:()=>b(p.id),className:`px-10 py-8 rounded-2xl font-black uppercase text-xs tracking-widest transition-all whitespace-nowrap ${x===p.id?"bg-black text-white shadow-2xl":"text-slate-600 font-bold hover:text-black"}`,children:p.label},p.id))}),x==="daily"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[i.jsxs("div",{className:"lg:col-span-1 bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-2xl h-fit",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-4 bg-black text-white rounded-2xl shadow-xl",children:i.jsx(pc,{size:24})}),i.jsx("h3",{className:"text-3xl font-black uppercase italic text-black",children:"New Expense"})]}),i.jsxs("form",{onSubmit:T,className:"space-y-8 uppercase",children:[i.jsx("input",{name:"date",type:"date",className:"form-input py-6 text-lg font-black bg-slate-50 border-slate-100 text-black",defaultValue:new Date().toISOString().split("T")[0],required:!0}),i.jsxs("select",{name:"category",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100 text-black",value:c,onChange:p=>u(p.target.value),children:[i.jsx("option",{value:"Tea/Snacks",children:"Tea/Snacks"}),i.jsx("option",{value:"Transport",children:"Transport"}),i.jsx("option",{value:"Worker Payment",children:"Worker Payment"}),i.jsx("option",{value:"Factory Rent",children:"Factory Rent"}),i.jsx("option",{value:"Electric Bill",children:"Electric Bill"}),i.jsx("option",{value:"Chemicals",children:"Chemicals/Hardware"}),i.jsx("option",{value:"Other",children:"Other"})]}),c==="Worker Payment"?i.jsxs("select",{name:"description",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100 text-black",children:[i.jsx("option",{value:"",children:"Select Worker..."}),f.map(p=>i.jsx("option",{value:p,children:p},p))]}):i.jsx("input",{name:"description",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100 text-black",placeholder:"Description...",required:!0}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl text-center border border-slate-100 shadow-inner",children:[i.jsx("label",{className:"text-xs font-bold text-slate-600 font-bold block mb-4 uppercase italic",children:"Amount ()"}),i.jsx("input",{name:"amount",type:"number",className:"w-full text-center text-7xl font-black bg-transparent border-none text-black outline-none",placeholder:"0",required:!0})]}),i.jsx("button",{type:"submit",className:"w-full py-10 bg-black text-white rounded-full font-black text-xl uppercase tracking-widest border-b-[12px] border-zinc-900 hover:scale-[1.01] transition-all",children:"SAVE EXPENSE"})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-8 text-black",children:[i.jsxs("div",{className:"bg-white p-5 rounded-2xl border-4 border-slate-50 shadow-xl flex justify-between items-center px-12",children:[i.jsx("input",{type:"date",value:E,onChange:p=>I(p.target.value),className:"bg-transparent text-4xl font-black italic border-none outline-none leading-none h-auto text-black"}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-400 font-bold uppercase tracking-widest mb-1",children:"Daily Total"}),i.jsxs("p",{className:"text-4xl font-black italic",children:["",S.toLocaleString()]})]})]}),i.jsx("div",{className:"space-y-4",children:L.map(p=>i.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-50 flex justify-between items-center group hover:border-black transition-all shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-lg flex items-center justify-center font-black italic text-slate-400 font-bold border border-slate-100",children:p.category[0]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest",children:p.category}),i.jsx("p",{className:"text-2xl font-black italic uppercase tracking-tighter",children:p.description})]})]}),i.jsxs("div",{className:"text-right font-black flex items-center gap-3",children:[i.jsxs("p",{className:"text-3xl italic",children:["",p.amount]}),o&&i.jsx("button",{onClick:()=>{confirm("Delete expense?")&&e(y=>({...y,expenses:(y.expenses||[]).filter(k=>k.id!==p.id)}))},className:"p-4 text-rose-500 hover:bg-rose-50 rounded-2xl transition-all opacity-0 group-hover:opacity-100",children:i.jsx(zn,{size:18})})]})]},p.id))})]})]}),x==="cashIn"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 animate-fade-up",children:[i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-2xl h-fit",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-4 bg-emerald-500 text-white rounded-2xl shadow-xl",children:i.jsx(nu,{size:24})}),i.jsx("h3",{className:"text-3xl font-black uppercase italic text-black",children:"Deposit Revenue"})]}),i.jsxs("form",{onSubmit:g,className:"space-y-8 uppercase",children:[i.jsx("input",{name:"date",type:"date",className:"form-input py-6 text-lg font-black bg-slate-50 border-slate-100 text-black",defaultValue:new Date().toISOString().split("T")[0],required:!0}),i.jsx("input",{name:"source",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100 text-black",placeholder:"Source (e.g. Sales, Bank Transfer...)",required:!0}),i.jsxs("div",{className:"bg-emerald-50 p-4 rounded-2xl text-center border border-emerald-100 shadow-inner",children:[i.jsx("label",{className:"text-xs font-bold text-emerald-400 block mb-4 uppercase italic",children:"Amount ()"}),i.jsx("input",{name:"amount",type:"number",className:"w-full text-center text-7xl font-black bg-transparent border-none text-emerald-600 outline-none placeholder-emerald-100",placeholder:"0",required:!0})]}),i.jsx("button",{type:"submit",className:"w-full py-10 bg-emerald-500 text-white rounded-full font-black text-xl uppercase tracking-widest border-b-[12px] border-emerald-700 hover:scale-[1.01] transition-all italic",children:"CONFIRM DEPOSIT"})]})]}),i.jsx("div",{className:"space-y-8",children:i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-2xl",children:[i.jsx("h4",{className:"text-2xl font-black uppercase italic mb-5",children:"Recent Revenue"}),i.jsxs("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[O.map(p=>i.jsxs("div",{className:"bg-slate-50 p-5 rounded-2xl border border-white flex justify-between items-center group hover:border-emerald-500 transition-all shadow-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest",children:p.date}),i.jsx("p",{className:"text-2xl font-black italic uppercase tracking-tighter text-black",children:p.source})]}),i.jsxs("div",{className:"text-right font-black flex items-center gap-3",children:[i.jsxs("p",{className:"text-3xl italic text-emerald-600",children:["+",p.amount]}),o&&i.jsx("button",{onClick:()=>{confirm("Delete entry?")&&e(y=>({...y,cashEntries:(y.cashEntries||[]).filter(k=>k.id!==p.id)}))},className:"p-4 text-rose-500 hover:bg-rose-50 rounded-2xl transition-all opacity-0 group-hover:opacity-100",children:i.jsx(zn,{size:18})})]})]},p.id)),O.length===0&&i.jsx("div",{className:"py-20 text-center text-slate-400 font-bold italic font-black uppercase tracking-widest",children:"No entries yet"})]})]})})]}),x==="worker"&&i.jsx("div",{className:"p-4",children:i.jsx(Gy,{masterData:t})}),x==="invoice"&&i.jsxs("div",{className:"bg-white p-20 rounded-3xl border-4 border-slate-50 shadow-2xl text-center space-y-8",children:[i.jsx("div",{className:"w-24 h-24 bg-black text-white rounded-xl flex items-center justify-center mx-auto shadow-2xl",children:i.jsx(Hf,{size:48})}),i.jsx("h3",{className:"text-4xl font-black uppercase italic text-black",children:"Payroll Matrix"}),i.jsx("p",{className:"text-slate-600 font-bold font-black uppercase tracking-widest text-sm",children:"Automated payroll generation active."})]}),x==="report"&&i.jsxs("div",{className:"bg-white p-20 rounded-3xl border-4 border-slate-50 shadow-2xl text-center space-y-8",children:[i.jsx("div",{className:"w-24 h-24 bg-black text-white rounded-xl flex items-center justify-center mx-auto shadow-2xl",children:i.jsx(pc,{size:48})}),i.jsx("h3",{className:"text-4xl font-black uppercase italic text-black",children:"Financial Audit"}),i.jsx("p",{className:"text-slate-600 font-bold font-black uppercase tracking-widest text-sm",children:"Real-time financial analytics reports generated."})]}),i.jsx("div",{className:"pt-20 pb-10 flex justify-center",children:i.jsxs("button",{onClick:()=>a("Overview"),className:"group relative flex items-center gap-3 bg-white px-12 py-6 rounded-full border-4 border-slate-50 shadow-2xl hover:border-black transition-all duration-500",children:[i.jsx("div",{className:"p-3 bg-black text-white rounded-2xl group-hover:rotate-[-12deg] transition-transform",children:i.jsx(yt,{size:20,strokeWidth:3})}),i.jsx("span",{className:"text-lg font-black uppercase italic tracking-widest text-black",children:"  "}),i.jsx("div",{className:"absolute -inset-1 bg-black/5 blur-2xl rounded-full -z-10 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})},ij=({masterData:t,setMasterData:e,showNotify:n,setActivePanel:r})=>{var L;const[s,a]=G.useState(""),[o,c]=G.useState(!1),[u,d]=G.useState("in"),[f,x]=G.useState("overview"),[b,E]=G.useState(null),I=G.useMemo(()=>{const S=[];return t.designs.forEach(T=>{t.colors.forEach(g=>{t.sizes.forEach(p=>{const y=Q_(t,T.name,g,p);(y.borka>0||y.hijab>0)&&S.push({design:T.name,color:g,size:p,borka:y.borka,hijab:y.hijab})})})}),S},[t]),A=G.useMemo(()=>{const S={};return(t.cuttingStock||[]).forEach(T=>{const g=`${T.lotNo}|${T.design}|${T.color}`;S[g]||(S[g]={lotNo:T.lotNo,design:T.design,color:T.color,date:T.date,sizes:{}}),S[g].sizes[T.size]||(S[g].sizes[T.size]={cutB:0,cutH:0,issuedB:0,issuedH:0,receivedB:0,receivedH:0}),S[g].sizes[T.size].cutB+=Number(T.borka||0),S[g].sizes[T.size].cutH+=Number(T.hijab||0)}),(t.productions||[]).forEach(T=>{const g=`${T.lotNo}|${T.design}|${T.color}`;if(S[g]&&S[g].sizes[T.size]){const p=S[g].sizes[T.size];T.type==="sewing"&&(p.issuedB+=Number(T.issueBorka||0),p.issuedH+=Number(T.issueHijab||0),p.receivedB+=Number(T.receivedBorka||0),p.receivedH+=Number(T.receivedHijab||0))}}),Object.values(S).sort((T,g)=>g.lotNo.localeCompare(T.lotNo))},[t]),O=G.useMemo(()=>qy(t),[t]),v=G.useMemo(()=>{const S=t.rawInventory||[],T={};return S.forEach(g=>{const p=g.color?`${g.item} (${g.color})`:g.item;T[p]||(T[p]={name:g.item,color:g.color||null,qty:0,lastUpdated:g.date}),g.type==="in"?T[p].qty+=Number(g.qty):g.type==="out"&&(T[p].qty-=Number(g.qty))}),Object.values(T).sort((g,p)=>g.name.localeCompare(p.name))},[t.rawInventory]).filter(S=>S.name.toLowerCase().includes(s.toLowerCase())||S.color&&S.color.toLowerCase().includes(s.toLowerCase())),j=S=>{var C;S.preventDefault();const T=S.target,g=T.item.value,p=((C=T.color)==null?void 0:C.value)||"",y=Number(T.qty.value);if(!g||y<=0)return;const k={id:Date.now(),date:new Date().toLocaleDateString("en-GB"),item:g,color:p,qty:y,type:u,note:T.note.value};e(R=>({...R,rawInventory:[k,...R.rawInventory||[]]})),Ot({type:`STOCK_${u.toUpperCase()}`,detail:`${g}${p?` (${p})`:""}`,amount:y}),c(!1),n(` ${u==="in"?"":""} !`)};return i.jsxs("div",{className:"space-y-12 pb-24 animate-fade-up px-2 italic text-black font-outfit",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>r("Overview"),className:"p-4 bg-white text-black rounded-2xl border border-slate-100 shadow-sm hover:bg-black hover:text-white transition-all group",children:i.jsx(yt,{size:20,className:"group-hover:-translate-x-1 transition-transform"})}),i.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 premium-card rounded-3xl border-4 border-slate-50 shadow-xl w-full md:w-auto",children:[i.jsx("div",{className:"p-4 bg-black text-white rounded-2xl shadow-2xl rotate-3 transition-transform hover:rotate-0",children:i.jsx(po,{size:36,strokeWidth:3})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-4xl font-black uppercase italic tracking-tighter leading-none text-black",children:["Stock ",i.jsx("span",{className:"text-slate-100",children:"Matrix"})]}),i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.4em] mt-3 italic",children:"INVENTORY DIVISION"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl px-12 py-8 flex flex-col items-center md:items-end border-4 border-slate-50 shadow-xl min-w-[300px] w-full md:w-auto",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest mb-2",children:"FINISHED ASSETS"}),i.jsxs("p",{className:"text-5xl font-black italic tracking-tighter text-black",children:[(L=t.productions)==null?void 0:L.filter(S=>S.status==="Received").length.toLocaleString(),i.jsx("span",{className:"text-sm not-italic text-slate-400 font-bold ml-2",children:"BATCHES"})]})]})]}),i.jsx("div",{className:"flex bg-white p-3 rounded-2xl border border-slate-100 shadow-inner overflow-x-auto no-scrollbar gap-2",children:[{id:"overview",label:" "},{id:"lots",label:" "},{id:"pata",label:"pata  "},{id:"raw",label:""},{id:"add",label:" "}].map(S=>i.jsx("button",{onClick:()=>x(S.id),className:`flex-1 min-w-[120px] py-10 rounded-2xl font-black uppercase text-xs tracking-widest transition-all ${f===S.id?"bg-black text-white shadow-2xl":"text-slate-600 font-bold hover:text-black"}`,children:S.label},S.id))}),f==="overview"&&i.jsx("div",{className:"grid grid-cols-1 gap-3",children:i.jsxs("div",{className:"bg-white rounded-3xl border-4 border-slate-50 overflow-hidden shadow-2xl",children:[i.jsxs("div",{className:"p-12 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[i.jsx("h3",{className:"text-3xl font-black uppercase italic text-black",children:"Finished Goods Stock"}),i.jsxs("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest italic",children:[I.length," ITEMS"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left uppercase",children:[i.jsx("thead",{className:"bg-slate-50/50 text-slate-600 font-bold font-black text-xs font-bold tracking-[0.4em] italic border-b border-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-12 py-8",children:"DESIGN / COLOR"}),i.jsx("th",{className:"px-12 py-8",children:"SIZE"}),i.jsx("th",{className:"px-12 py-8 text-center",children:"BORKA"}),i.jsx("th",{className:"px-12 py-8 text-center",children:"HIJAB"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100",children:I.map((S,T)=>i.jsxs("tr",{className:"hover:bg-slate-50 transition-all group",children:[i.jsxs("td",{className:"px-12 py-10",children:[i.jsx("p",{className:"font-black text-2xl italic tracking-tighter text-black leading-none",children:S.design}),i.jsx("p",{className:"text-xs font-bold font-black text-slate-400 font-bold mt-2 tracking-widest",children:S.color})]}),i.jsx("td",{className:"px-12 py-10",children:i.jsx("span",{className:"bg-slate-50 text-slate-600 font-bold px-4 py-2 rounded-xl font-black border border-slate-100",children:S.size})}),i.jsx("td",{className:"px-12 py-10 text-center font-black text-4xl italic tracking-tighter text-black",children:S.borka}),i.jsx("td",{className:"px-12 py-10 text-center font-black text-4xl italic tracking-tighter text-black",children:S.hijab})]},T))})]})})]})}),f==="lots"&&i.jsxs("div",{className:"space-y-12 animate-fade-up",children:[i.jsxs("div",{className:"bg-white p-4 premium-card border-4 border-slate-50 shadow-xl rounded-2xl flex items-center gap-3",children:[i.jsx(ar,{size:32,className:"text-slate-100"}),i.jsx("input",{type:"text",placeholder:"Search Lot No / Design...",className:"flex-1 bg-transparent text-4xl font-black italic border-none outline-none leading-none h-auto placeholder:text-slate-100 text-black uppercase",value:s,onChange:S=>a(S.target.value)})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:A.filter(S=>S.lotNo.toUpperCase().includes(s.toUpperCase())||S.design.toUpperCase().includes(s.toUpperCase())).map((S,T)=>{const g=Object.values(S.sizes).reduce((R,_)=>R+_.cutB+_.cutH,0),p=Object.values(S.sizes).reduce((R,_)=>R+_.issuedB+_.issuedH,0),y=Object.values(S.sizes).reduce((R,_)=>R+_.receivedB+_.receivedH,0),k=g-p,C=p-y;return i.jsxs("div",{onClick:()=>E(S),className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-xl flex flex-col justify-between h-auto min-h-[400px] group hover:border-black transition-all cursor-pointer relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 p-5 opacity-5 text-black",children:i.jsx(po,{size:100})}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("span",{className:"bg-black text-white px-6 py-2 rounded-full font-black text-xs font-bold uppercase tracking-widest italic shadow-xl",children:["LOT: ",S.lotNo]}),i.jsx("span",{className:"text-xs font-bold font-black text-slate-500 font-bold uppercase italic",children:S.date})]}),i.jsx("h4",{className:"text-4xl font-black italic uppercase leading-none mb-3 text-black",children:S.design}),i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.4em] italic mb-5 border-b-2 border-slate-50 pb-4",children:S.color}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-3xl border border-white shadow-inner",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase italic",children:"Live In Cutting"}),i.jsxs("p",{className:"text-3xl font-black italic text-black",children:[k," PCS"]})]}),i.jsxs("div",{className:"flex justify-between items-center bg-blue-50/50 p-4 rounded-3xl border border-blue-50",children:[i.jsx("p",{className:"text-xs font-bold font-black text-blue-400 uppercase italic",children:"In Factory (Active)"}),i.jsxs("p",{className:"text-3xl font-black italic text-blue-600",children:[C," PCS"]})]}),i.jsxs("div",{className:"flex justify-between items-center bg-emerald-50 p-4 rounded-3xl border border-emerald-50",children:[i.jsx("p",{className:"text-xs font-bold font-black text-emerald-400 uppercase italic",children:"Completed Body"}),i.jsxs("p",{className:"text-3xl font-black italic text-emerald-600",children:[y," PCS"]})]})]})]}),i.jsx("button",{className:"mt-5 w-full py-4 bg-black text-white rounded-2xl font-black uppercase text-xs font-bold tracking-widest italic opacity-0 group-hover:opacity-100 transition-all",children:"View Details"})]},T)})})]}),f==="pata"&&i.jsx("div",{className:"space-y-12 animate-fade-up",children:i.jsxs("div",{className:"bg-white rounded-3xl border-4 border-slate-50 overflow-hidden shadow-2xl",children:[i.jsx("div",{className:"p-12 border-b border-slate-100 bg-slate-50",children:i.jsx("h3",{className:"text-3xl font-black uppercase italic text-black",children:"Pata Inventory Summary"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left uppercase",children:[i.jsx("thead",{className:"bg-slate-50/50 text-slate-600 font-bold font-black text-xs font-bold tracking-[0.4em] italic border-b border-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-12 py-8",children:"Style / Color"}),i.jsx("th",{className:"px-12 py-8",children:"Pata Type"}),i.jsx("th",{className:"px-12 py-8 text-center",children:"Applied (Spent)"}),i.jsx("th",{className:"px-12 py-8 text-right",children:"Available Stock"})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-100",children:[O.map((S,T)=>i.jsxs("tr",{className:"hover:bg-slate-50 transition-all",children:[i.jsxs("td",{className:"px-12 py-10",children:[i.jsx("p",{className:"font-black text-2xl italic tracking-tighter text-black leading-none",children:S.design}),i.jsx("p",{className:"text-xs font-bold font-black text-slate-400 font-bold mt-2 tracking-widest",children:S.color})]}),i.jsx("td",{className:"px-12 py-10 font-black italic text-slate-600 font-bold",children:S.type}),i.jsx("td",{className:"px-12 py-10 text-center font-black text-2xl italic text-slate-400 font-bold",children:S.spent}),i.jsxs("td",{className:"px-12 py-10 text-right font-black text-5xl italic tracking-tighter text-black",children:[S.balance," ",i.jsx("span",{className:"text-xs font-bold not-italic text-slate-500 font-bold",children:"PCS"})]})]},T)),O.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:"4",className:"py-20 text-center text-slate-400 font-bold font-black uppercase tracking-[0.5em] italic",children:"No Pata Stock Data"})})]})]})})]})}),f==="raw"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white p-4 balanced-card border-4 border-slate-50 shadow-xl rounded-2xl flex items-center gap-3",children:[i.jsx(ar,{size:32,className:"text-slate-100"}),i.jsx("input",{type:"text",placeholder:"Search Materials...",className:"flex-1 bg-transparent text-4xl font-black italic border-none outline-none leading-none h-auto placeholder:text-slate-100 text-black",value:s,onChange:S=>a(S.target.value)})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:v.map((S,T)=>i.jsxs("div",{className:"bg-white p-12 rounded-3xl border-4 border-slate-50 shadow-xl flex flex-col justify-between h-80 group hover:border-black transition-all",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-4xl font-black italic uppercase leading-none mb-3 text-black",children:S.name}),i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest",children:S.color||"STANDARD"})]}),i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsx("p",{className:`text-6xl font-black italic tracking-tighter ${S.qty<=5?"text-rose-500":"text-black"}`,children:S.qty}),i.jsx("p",{className:"text-xs font-bold font-black text-slate-400 font-bold uppercase tracking-widest mb-1 italic",children:"PACKETS / UNITS"})]})]},T))})]}),f==="add"&&i.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center gap-3",children:[i.jsx("button",{onClick:()=>{d("out"),c(!0)},className:"px-10 py-6 rounded-2xl font-black uppercase text-xs tracking-widest bg-rose-50 text-rose-500 hover:bg-rose-500 hover:text-white transition-all w-full md:w-auto",children:"Deduct Stock"}),i.jsx("button",{onClick:()=>{d("in"),c(!0)},className:"px-12 py-6 rounded-2xl bg-black text-white font-black uppercase text-xs tracking-widest shadow-2xl border-b-[12px] border-zinc-900 w-full md:w-auto",children:"Add Stock"})]}),b&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-3xl z-[300] flex items-center justify-center p-4 text-black",children:i.jsxs("div",{className:"bg-white rounded-[5rem] w-full max-w-4xl border-4 border-slate-50 shadow-3xl p-16 space-y-12 animate-fade-up max-h-[90vh] overflow-y-auto italic",children:[i.jsxs("div",{className:"flex justify-between items-center pb-8 border-b-2 border-slate-50",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-5xl font-black uppercase italic tracking-tighter leading-none mb-4",children:["LOT: ",b.lotNo]}),i.jsxs("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.4em] italic",children:[b.design,"  ",b.color]})]}),i.jsx("button",{onClick:()=>E(null),className:"p-4 bg-slate-50 rounded-full hover:bg-black hover:text-white transition-all",children:i.jsx(Bt,{size:32})})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left uppercase",children:[i.jsx("thead",{className:"text-xs font-bold font-black text-slate-500 font-bold tracking-[0.3em] italic border-b-2 border-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-6",children:"Size"}),i.jsx("th",{className:"py-6 text-center",children:"Cut (B/H)"}),i.jsx("th",{className:"py-6 text-center",children:"In Factory (Active)"}),i.jsx("th",{className:"py-6 text-right",children:"Received (Live)"})]})}),i.jsx("tbody",{className:"divide-y-2 divide-slate-50",children:Object.entries(b.sizes).map(([S,T])=>{T.cutB+T.cutH-(T.issuedB+T.issuedH);const g=T.issuedB+T.issuedH-(T.receivedB+T.receivedH);return i.jsxs("tr",{className:"hover:bg-slate-50 transition-all",children:[i.jsx("td",{className:"py-8",children:i.jsx("span",{className:"bg-black text-white px-6 py-2 rounded-xl text-xl font-black italic shadow-lg",children:S})}),i.jsxs("td",{className:"py-8 text-center",children:[i.jsx("p",{className:"font-black text-3xl italic text-slate-500 font-bold leading-none",children:T.cutB+T.cutH}),i.jsxs("p",{className:"text-[11px] font-bold font-black text-slate-400 font-bold mt-2",children:["B:",T.cutB," H:",T.cutH]})]}),i.jsxs("td",{className:"py-8 text-center",children:[i.jsx("p",{className:`font-black text-3xl italic leading-none ${g>0?"text-blue-500":"text-slate-100"}`,children:g}),g>0&&i.jsx("p",{className:"text-[11px] font-bold font-black text-blue-200 mt-2 uppercase tracking-widest",children:"In Process"})]}),i.jsxs("td",{className:"py-8 text-right",children:[i.jsx("p",{className:"font-black text-5xl italic tracking-tighter text-emerald-600 leading-none",children:T.receivedB+T.receivedH}),i.jsx("p",{className:"text-[11px] font-bold font-black text-emerald-400 mt-2 uppercase tracking-widest",children:"Live Body"})]})]},S)})})]})})]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-3xl z-[200] flex items-center justify-center p-4 text-black",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[5rem] border-4 border-slate-50 shadow-2xl overflow-hidden p-16 space-y-12 animate-fade-up",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("h3",{className:"text-4xl font-black uppercase italic mb-2 text-black",children:[" ",u==="in"?"":""]}),i.jsx("p",{className:"text-xl font-black tracking-widest text-slate-600 font-bold italic",children:"Inventory Adjustment"})]}),i.jsxs("form",{onSubmit:j,className:"space-y-8 uppercase",children:[i.jsx("input",{name:"item",list:"items-list",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100 text-black placeholder:text-slate-400 font-bold",placeholder:"Material Name...",required:!0}),i.jsx("input",{name:"color",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100 text-black placeholder:text-slate-400 font-bold",placeholder:"Color (optional)"}),i.jsxs("div",{className:"bg-white border border-slate-100 p-12 rounded-3xl text-center shadow-inner",children:[i.jsx("label",{className:"bg-black text-white px-3 py-1 rounded-sm text-xs font-bold font-black uppercase italic tracking-widest inline-block mb-4 shadow-lg",children:"Quantity"}),i.jsx("input",{name:"qty",type:"number",className:"w-full text-center text-[10rem] font-black bg-transparent border-none text-black outline-none leading-none h-44",autoFocus:!0})]}),i.jsx("input",{name:"note",className:"form-input py-6 text-sm font-black bg-slate-50 border-slate-100 text-black placeholder:text-slate-400 font-bold",placeholder:"Reference Note..."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 py-10 rounded-full font-black text-sm uppercase bg-slate-100 text-black hover:bg-slate-200 transition-all",children:"Cancel"}),i.jsx("button",{type:"submit",className:"flex-[2] py-10 rounded-full font-black text-sm uppercase bg-black text-white shadow-2xl border-b-[12px] border-zinc-900",children:"Update Stock"})]})]})]})}),i.jsx("div",{className:"pt-20 pb-10 flex justify-center",children:i.jsxs("button",{onClick:()=>r("Overview"),className:"group relative flex items-center gap-3 bg-white px-12 py-6 rounded-full border-4 border-slate-50 shadow-2xl hover:border-black transition-all duration-500",children:[i.jsx("div",{className:"p-3 bg-black text-white rounded-2xl group-hover:rotate-[-12deg] transition-transform",children:i.jsx(yt,{size:20,strokeWidth:3})}),i.jsx("span",{className:"text-lg font-black uppercase italic tracking-widest text-black",children:"  "}),i.jsx("div",{className:"absolute -inset-1 bg-black/5 blur-2xl rounded-full -z-10 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})},aj=({masterData:t,setMasterData:e,showNotify:n,user:r,setActivePanel:s})=>{const[a,o]=G.useState(!1),[c,u]=G.useState("active"),[d,f]=G.useState(""),[x,b]=G.useState(null),[E,I]=G.useState(""),A=(r==null?void 0:r.role)==="admin",[O,N]=G.useState({worker:"",task:"",borkaQty:"",hijabQty:"",rate:"",note:""}),v=()=>{if(!O.worker||!O.task||!O.borkaQty&&!O.hijabQty)return n(",    !","error");const y={id:Date.now(),date:new Date().toLocaleDateString("en-GB"),worker:O.worker,task:O.task,borkaQty:Number(O.borkaQty||0),hijabQty:Number(O.hijabQty||0),rate:Number(O.rate||0),note:O.note,status:"Pending",receivedDate:null,totalAmount:0,paidAmount:0};e(k=>({...k,outsideWorkEntries:[y,...k.outsideWorkEntries||[]]})),Ot({type:"OUTSIDE_ISSUE",worker:y.worker,detail:`${y.task} - B:${y.borkaQty} H:${y.hijabQty}`,amount:0}),o(!1),N({worker:"",task:"",borkaQty:"",hijabQty:"",rate:"",note:""}),n("    !")},j=y=>{if(!window.confirm(`${y.worker}-    ?`))return;const k=(Number(y.borkaQty)+Number(y.hijabQty))*Number(y.rate);e(C=>({...C,outsideWorkEntries:C.outsideWorkEntries.map(R=>R.id===y.id?{...R,status:"Received",receivedDate:new Date().toLocaleDateString("en-GB"),totalAmount:k}:R)})),Ot({type:"OUTSIDE_RECEIVE",worker:y.worker,detail:`${y.task} Received - Total: ${k}`,amount:k}),n("       !")},L=()=>{!E||Number(E)<=0||(e(y=>({...y,outsideWorkEntries:y.outsideWorkEntries.map(k=>k.id===x.id?{...k,paidAmount:Number(k.paidAmount||0)+Number(E)}:k)})),Ot({type:"OUTSIDE_PAYMENT",worker:x.worker,detail:`Payment for ${x.task}`,amount:Number(E)}),b(null),I(""),n("   !"))},S=y=>{if(!A)return n("    !","error");window.confirm("  ?")&&(e(k=>({...k,outsideWorkEntries:(k.outsideWorkEntries||[]).filter(C=>C.id!==y)})),n("   !"))},T=(t.outsideWorkEntries||[]).filter(y=>y.worker.toLowerCase().includes(d.toLowerCase())||y.task.toLowerCase().includes(d.toLowerCase())),g=T.filter(y=>y.status==="Pending"),p=T.filter(y=>y.status==="Received");return i.jsxs("div",{className:"space-y-12 pb-24 animate-fade-up px-2 italic text-black font-outfit",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>s("Overview"),className:"p-4 bg-white text-black rounded-2xl border border-slate-100 shadow-sm hover:bg-black hover:text-white transition-all group",children:i.jsx(yt,{size:20,className:"group-hover:-translate-x-1 transition-transform"})}),i.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 premium-card rounded-3xl border-4 border-slate-50 shadow-xl w-full md:w-auto",children:[i.jsx("div",{className:"p-4 bg-rose-500 text-white rounded-xl shadow-2xl rotate-3 transition-transform hover:rotate-0",children:i.jsx(F_,{size:36,strokeWidth:3})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-4xl font-black uppercase italic tracking-tighter leading-none text-black",children:["Outside ",i.jsx("span",{className:"text-slate-100",children:"Work"})]}),i.jsx("p",{className:"text-[11px] font-black text-slate-600 font-bold uppercase tracking-[0.4em] mt-3 italic",children:"Baire Deoya Kaj"})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center w-full md:w-auto",children:[i.jsxs("div",{className:"relative group flex-1 md:w-64",children:[i.jsx(ar,{className:"absolute left-8 top-1/2 -translate-y-1/2 text-slate-500 font-bold group-focus-within:text-black transition-colors",size:20}),i.jsx("input",{type:"text",placeholder:"SEARCH WORKER/TASK...",className:"w-full bg-white pl-20 pr-8 py-8 rounded-full border-4 border-slate-50 shadow-xl font-black italic text-xs uppercase focus:border-black outline-none transition-all",value:d,onChange:y=>f(y.target.value)})]}),i.jsxs("button",{onClick:()=>o(!0),className:"bg-black text-white px-12 py-8 rounded-2xl font-black uppercase tracking-[0.2em] shadow-2xl hover:scale-105 active:scale-95 transition-all text-xl flex items-center gap-3 border-b-[12px] border-zinc-900",children:[i.jsx(Pt,{size:24,strokeWidth:3})," ISSUE WORK"]})]})]}),i.jsx("div",{className:"flex bg-slate-50 p-3 rounded-2xl border border-slate-100 shadow-inner",children:["active","history"].map(y=>i.jsx("button",{onClick:()=>u(y),className:`flex-1 py-10 rounded-2xl font-black uppercase text-sm tracking-widest transition-all ${c===y?"bg-black text-white shadow-2xl":"text-slate-600 font-bold hover:text-black"}`,children:y==="active"?" (Pending)":"  (History)"},y))}),i.jsxs("div",{className:"bg-white rounded-3xl border-4 border-slate-50 overflow-hidden shadow-2xl",children:[i.jsx("div",{className:"p-12 border-b-2 border-slate-50 flex justify-between items-center bg-slate-50",children:i.jsx("h3",{className:"text-3xl font-black uppercase italic text-black leading-none",children:c==="active"?"  ":" "})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left uppercase",children:[i.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold font-black text-xs font-bold tracking-[0.4em] italic border-b border-slate-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-12 py-8",children:"WORKER / DATE"}),i.jsx("th",{className:"px-12 py-8",children:"TASK / DETAILS"}),i.jsx("th",{className:"px-12 py-8 text-center",children:"QUANTITY"}),i.jsx("th",{className:"px-12 py-8 text-right",children:"FINANCE / ACTION"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 font-bold",children:(c==="active"?g:p).map((y,k)=>i.jsxs("tr",{className:"hover:bg-slate-50 transition-all group italic",children:[i.jsxs("td",{className:"px-12 py-10",children:[i.jsx("p",{className:"font-black text-2xl tracking-tighter text-black",children:y.worker}),i.jsx("p",{className:"text-xs font-bold font-black text-slate-400 font-bold mt-2 tracking-widest",children:y.date})]}),i.jsxs("td",{className:"px-12 py-10",children:[i.jsx("p",{className:"font-black text-2xl italic tracking-tighter text-rose-500",children:y.task}),i.jsxs("p",{className:"text-xs font-bold font-black text-slate-600 font-bold mt-2 tracking-widest",children:["RATE: ",y.rate,"  ",y.note||"NO NOTE"]}),y.receivedDate&&i.jsxs("p",{className:"text-xs font-bold font-black text-emerald-500 mt-1 uppercase",children:["Received: ",y.receivedDate]})]}),i.jsx("td",{className:"px-12 py-10 text-center",children:i.jsx("div",{className:"flex flex-col items-center",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[11px] font-bold text-slate-500 font-bold",children:"BORKA"}),i.jsx("p",{className:"text-3xl font-black",children:y.borkaQty})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[11px] font-bold text-slate-500 font-bold",children:"HIJAB"}),i.jsx("p",{className:"text-3xl font-black",children:y.hijabQty})]})]})})}),i.jsx("td",{className:"px-12 py-10 text-right",children:i.jsx("div",{className:"flex flex-col items-end gap-3",children:y.status==="Pending"?i.jsx("button",{onClick:()=>j(y),className:"px-8 py-4 bg-black text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl hover:scale-105 active:scale-95 transition-all",children:" "}):i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase",children:"Balance"}),i.jsxs("p",{className:"text-3xl font-black text-black",children:["",(y.totalAmount-(y.paidAmount||0)).toLocaleString()]}),i.jsxs("div",{className:"flex gap-3 justify-end mt-2",children:[i.jsx("button",{onClick:()=>b(y),className:"p-4 bg-emerald-500 text-white rounded-xl shadow-lg hover:scale-110 transition-all",children:i.jsx(Yr,{size:16})}),A&&i.jsx("button",{onClick:()=>S(y.id),className:"p-4 bg-rose-500 text-white rounded-xl shadow-lg hover:scale-110 transition-all",children:i.jsx(zn,{size:16})})]})]})})})]},k))})]})})]}),a&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-3xl z-[200] flex items-center justify-center p-4 italic",children:i.jsxs("div",{className:"bg-white rounded-[5rem] w-full max-w-4xl border-4 border-black shadow-3xl animate-fade-up overflow-hidden max-h-[90vh] flex flex-col text-black",children:[i.jsxs("div",{className:"p-4 border-b-2 border-slate-100 flex justify-between items-center bg-gray-50",children:[i.jsx("h3",{className:"font-black uppercase text-4xl tracking-tighter",children:"Baire Kaj Deoya (Issue)"}),i.jsx("button",{onClick:()=>o(!1),className:"p-4 bg-white border-2 border-slate-100 rounded-full hover:bg-black hover:text-white transition-all shadow-sm",children:i.jsx(Bt,{size:24})})]}),i.jsxs("div",{className:"p-12 space-y-8 overflow-y-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-black text-slate-600 font-bold uppercase tracking-widest ml-4",children:"Worker / Karigor"}),i.jsxs("select",{className:"form-input text-xl font-black border-2 border-slate-100 rounded-xl bg-gray-50 h-16 w-full px-6",value:O.worker,onChange:y=>N(k=>({...k,worker:y.target.value})),children:[i.jsx("option",{value:"",children:"Select Worker"}),(t.outsideWorkers||[]).map(y=>i.jsx("option",{value:y,children:y},y))]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-black text-slate-600 font-bold uppercase tracking-widest ml-4",children:"Work / Task Type"}),i.jsxs("select",{className:"form-input text-xl font-black border-2 border-slate-100 rounded-xl bg-gray-50 h-16 w-full px-6",value:O.task,onChange:y=>N(k=>({...k,task:y.target.value})),children:[i.jsx("option",{value:"",children:"Select Task"}),(t.outsideTasks||[]).map(y=>i.jsx("option",{value:y,children:y},y))]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-slate-50 p-5 rounded-2xl border-2 border-slate-100",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase block mb-2",children:"Borka (PCS)"}),i.jsx("input",{type:"number",className:"w-full bg-transparent text-4xl font-black outline-none italic",placeholder:"0",value:O.borkaQty,onChange:y=>N(k=>({...k,borkaQty:y.target.value}))})]}),i.jsxs("div",{className:"bg-slate-50 p-5 rounded-2xl border-2 border-slate-100",children:[i.jsx("label",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase block mb-2",children:"Hijab (PCS)"}),i.jsx("input",{type:"number",className:"w-full bg-transparent text-4xl font-black outline-none italic",placeholder:"0",value:O.hijabQty,onChange:y=>N(k=>({...k,hijabQty:y.target.value}))})]}),i.jsxs("div",{className:"bg-black p-5 rounded-2xl shadow-2xl",children:[i.jsx("label",{className:"text-xs font-bold font-black text-white/40 uppercase block mb-2",children:"Rate (Per PCS)"}),i.jsx("input",{type:"number",className:"w-full bg-transparent text-4xl font-black text-white outline-none italic",placeholder:"0",value:O.rate,onChange:y=>N(k=>({...k,rate:y.target.value}))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("label",{className:"text-xs font-black text-slate-600 font-bold uppercase tracking-widest ml-4",children:"Note (Optional)"}),i.jsx("input",{type:"text",className:"form-input text-xl font-black border-2 border-slate-100 rounded-xl bg-gray-50 h-16 w-full px-8",placeholder:"Enter notes...",value:O.note,onChange:y=>N(k=>({...k,note:y.target.value}))})]})]}),i.jsx("div",{className:"p-12 bg-gray-50 flex gap-3",children:i.jsx("button",{onClick:v,className:"flex-1 py-10 bg-rose-500 text-white rounded-full font-black text-2xl uppercase tracking-[0.2em] shadow-2xl border-b-[12px] border-rose-900 active:translate-y-2 transition-all",children:"CONFIRM ISSUE"})})]})}),x&&i.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-3xl z-[300] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md p-12 text-center space-y-8 animate-pulse-once",children:[i.jsx("div",{className:"w-20 h-20 bg-emerald-500 text-white rounded-3xl flex items-center justify-center mx-auto shadow-2xl rotate-12",children:i.jsx(Yr,{size:40})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-3xl font-black uppercase italic tracking-tighter",children:["Pay ",x.worker]}),i.jsxs("p",{className:"text-xs font-bold font-black text-slate-600 font-bold uppercase tracking-widest mt-2",children:[x.task," Bill"]})]}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[i.jsx("p",{className:"text-xs font-bold font-black text-slate-500 font-bold uppercase mb-2",children:"Enter Amount"}),i.jsx("input",{type:"number",autoFocus:!0,className:"w-full text-center text-6xl font-black bg-transparent border-none outline-none tracking-tighter",placeholder:"0",value:E,onChange:y=>I(y.target.value)})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>b(null),className:"flex-1 py-6 bg-slate-100 rounded-2xl font-black uppercase text-xs",children:"Cancel"}),i.jsx("button",{onClick:L,className:"flex-1 py-6 bg-black text-white rounded-2xl font-black uppercase text-xs shadow-xl",children:"Confirm Pay"})]})]})}),i.jsx("div",{className:"pt-20 pb-10 flex justify-center",children:i.jsxs("button",{onClick:()=>s("Overview"),className:"group relative flex items-center gap-3 bg-white px-12 py-6 rounded-full border-4 border-slate-50 shadow-2xl hover:border-black transition-all duration-500",children:[i.jsx("div",{className:"p-3 bg-black text-white rounded-2xl group-hover:rotate-[-12deg] transition-transform",children:i.jsx(yt,{size:20,strokeWidth:3})}),i.jsx("span",{className:"text-lg font-black uppercase italic tracking-widest text-black",children:"  "}),i.jsx("div",{className:"absolute -inset-1 bg-black/5 blur-2xl rounded-full -z-10 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})},oj=()=>{};var Mx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},lj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Qy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=a>>2,x=(a&3)<<4|c>>4;let b=(c&15)<<2|d>>6,E=d&63;u||(E=64,o||(b=64)),r.push(n[f],n[x],n[b],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ky(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const x=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||d==null||x==null)throw new cj;const b=a<<2|c>>4;if(r.push(b),d!==64){const E=c<<4&240|d>>2;if(r.push(E),x!==64){const I=d<<6&192|x;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uj=function(t){const e=Ky(t);return Qy.encodeByteArray(e,!0)},mc=function(t){return uj(t).replace(/\./g,"")},Yy=function(t){try{return Qy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=()=>dj().__FIREBASE_DEFAULTS__,fj=()=>{if(typeof process>"u"||typeof Mx>"u")return;const t=Mx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Yy(t[1]);return e&&JSON.parse(e)},ru=()=>{try{return oj()||hj()||fj()||pj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jy=t=>{var e,n;return(n=(e=ru())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Xy=t=>{const e=Jy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zy=()=>{var t;return(t=ru())==null?void 0:t.config},ev=t=>{var e;return(e=ru())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[mc(JSON.stringify(n)),mc(JSON.stringify(o)),""].join(".")}const $a={};function xj(){const t={prod:[],emulator:[]};for(const e of Object.keys($a))$a[e]?t.emulator.push(e):t.prod.push(e);return t}function gj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let zx=!1;function Gf(t,e){if(typeof window>"u"||typeof document>"u"||!Us(window.location.host)||$a[t]===e||$a[t]||zx)return;$a[t]=e;function n(b){return`__firebase__banner__${b}`}const r="__firebase__banner",a=xj().prod.length>0;function o(){const b=document.getElementById(r);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function u(b,E){b.setAttribute("width","24"),b.setAttribute("id",E),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function d(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{zx=!0,o()},b}function f(b,E){b.setAttribute("id",E),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function x(){const b=gj(r),E=n("text"),I=document.getElementById(E)||document.createElement("span"),A=n("learnmore"),O=document.getElementById(A)||document.createElement("a"),N=n("preprendIcon"),v=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const j=b.element;c(j),f(O,A);const L=d();u(v,N),j.append(v,I,O,L),document.body.appendChild(j)}a?(I.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function yj(){var e;const t=(e=ru())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nv(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kj(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nj(){return!yj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rv(){try{return typeof indexedDB=="object"}catch{return!1}}function sv(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}function _j(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="FirebaseError";class bn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jj,Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bs.prototype.create)}}class Bs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?Ej(a,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new bn(s,c,r)}}function Ej(t,e){return t.replace(Tj,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Tj=/\{\$([^}]+)}/g;function Sj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(Fx(a)&&Fx(o)){if(!Jr(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Fx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ij(t,e){const n=new Cj(t,e);return n.subscribe.bind(n)}class Cj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Aj(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dd),s.error===void 0&&(s.error=dd),s.complete===void 0&&(s.complete=dd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Aj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=1e3,Pj=2,Oj=4*60*60*1e3,Dj=.5;function Ux(t,e=Rj,n=Pj){const r=e*Math.pow(n,t),s=Math.round(Dj*r*(Math.random()-.5)*2);return Math.min(Oj,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class gn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Mj(e))try{this.getOrInitializeService({instanceIdentifier:xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xs){return this.instances.has(e)}getOptions(e=xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Vj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xs){return this.component?this.component.multipleInstances?e:xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vj(t){return t===xs?void 0:t}function Mj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Lj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const Fj={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},Uj=we.INFO,Bj={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},$j=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Bj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class su{constructor(e){this.name=e,this._logLevel=Uj,this._logHandler=$j,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const Hj=(t,e)=>e.some(n=>t instanceof n);let Bx,$x;function Wj(){return Bx||(Bx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qj(){return $x||($x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iv=new WeakMap,Nh=new WeakMap,av=new WeakMap,hd=new WeakMap,Kf=new WeakMap;function Gj(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Wr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&iv.set(n,t)}).catch(()=>{}),Kf.set(e,t),e}function Kj(t){if(Nh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Nh.set(t,e)}let _h={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||av.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Qj(t){_h=t(_h)}function Yj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fd(this),e,...n);return av.set(r,e.sort?e.sort():[e]),Wr(r)}:qj().includes(t)?function(...e){return t.apply(fd(this),e),Wr(iv.get(this))}:function(...e){return Wr(t.apply(fd(this),e))}}function Jj(t){return typeof t=="function"?Yj(t):(t instanceof IDBTransaction&&Kj(t),Hj(t,Wj())?new Proxy(t,_h):t)}function Wr(t){if(t instanceof IDBRequest)return Gj(t);if(hd.has(t))return hd.get(t);const e=Jj(t);return e!==t&&(hd.set(t,e),Kf.set(e,t)),e}const fd=t=>Kf.get(t);function ov(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),c=Wr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Wr(o.result),u.oldVersion,u.newVersion,Wr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Xj=["get","getKey","getAll","getAllKeys","count"],Zj=["put","add","delete","clear"],pd=new Map;function Hx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pd.get(e))return pd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Zj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Xj.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return pd.set(e,a),a}Qj(t=>({...t,get:(e,n,r)=>Hx(e,n)||t.get(e,n,r),has:(e,n)=>!!Hx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(t2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function t2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jh="@firebase/app",Wx="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new su("@firebase/app"),n2="@firebase/app-compat",r2="@firebase/analytics-compat",s2="@firebase/analytics",i2="@firebase/app-check-compat",a2="@firebase/app-check",o2="@firebase/auth",l2="@firebase/auth-compat",c2="@firebase/database",u2="@firebase/data-connect",d2="@firebase/database-compat",h2="@firebase/functions",f2="@firebase/functions-compat",p2="@firebase/installations",m2="@firebase/installations-compat",x2="@firebase/messaging",g2="@firebase/messaging-compat",b2="@firebase/performance",y2="@firebase/performance-compat",v2="@firebase/remote-config",w2="@firebase/remote-config-compat",k2="@firebase/storage",N2="@firebase/storage-compat",_2="@firebase/firestore",j2="@firebase/ai",E2="@firebase/firestore-compat",T2="firebase",S2="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="[DEFAULT]",I2={[jh]:"fire-core",[n2]:"fire-core-compat",[s2]:"fire-analytics",[r2]:"fire-analytics-compat",[a2]:"fire-app-check",[i2]:"fire-app-check-compat",[o2]:"fire-auth",[l2]:"fire-auth-compat",[c2]:"fire-rtdb",[u2]:"fire-data-connect",[d2]:"fire-rtdb-compat",[h2]:"fire-fn",[f2]:"fire-fn-compat",[p2]:"fire-iid",[m2]:"fire-iid-compat",[x2]:"fire-fcm",[g2]:"fire-fcm-compat",[b2]:"fire-perf",[y2]:"fire-perf-compat",[v2]:"fire-rc",[w2]:"fire-rc-compat",[k2]:"fire-gcs",[N2]:"fire-gcs-compat",[_2]:"fire-fst",[E2]:"fire-fst-compat",[j2]:"fire-vertex","fire-js":"fire-js",[T2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Map,C2=new Map,Th=new Map;function qx(t,e){try{t.container.addComponent(e)}catch(n){hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rn(t){const e=t.name;if(Th.has(e))return hr.debug(`There were multiple attempts to register component ${e}.`),!1;Th.set(e,t);for(const n of xc.values())qx(n,t);for(const n of C2.values())qx(n,t);return!0}function os(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new Bs("app","Firebase",A2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=S2;function lv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Eh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw qr.create("bad-app-name",{appName:String(s)});if(n||(n=Zy()),!n)throw qr.create("no-options");const a=xc.get(s);if(a){if(Jr(n,a.options)&&Jr(r,a.config))return a;throw qr.create("duplicate-app",{appName:s})}const o=new zj(s);for(const u of Th.values())o.addComponent(u);const c=new R2(n,r,o);return xc.set(s,c),c}function iu(t=Eh){const e=xc.get(t);if(!e&&t===Eh&&Zy())return lv();if(!e)throw qr.create("no-app",{appName:t});return e}function Gt(t,e,n){let r=I2[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hr.warn(o.join(" "));return}Rn(new gn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="firebase-heartbeat-database",O2=1,mo="firebase-heartbeat-store";let md=null;function cv(){return md||(md=ov(P2,O2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mo)}catch(n){console.warn(n)}}}}).catch(t=>{throw qr.create("idb-open",{originalErrorMessage:t.message})})),md}async function D2(t){try{const n=(await cv()).transaction(mo),r=await n.objectStore(mo).get(uv(t));return await n.done,r}catch(e){if(e instanceof bn)hr.warn(e.message);else{const n=qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hr.warn(n.message)}}}async function Gx(t,e){try{const r=(await cv()).transaction(mo,"readwrite");await r.objectStore(mo).put(e,uv(t)),await r.done}catch(n){if(n instanceof bn)hr.warn(n.message);else{const r=qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hr.warn(r.message)}}}function uv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=1024,V2=30;class M2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new F2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Kx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>V2){const o=U2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Kx(),{heartbeatsToSend:r,unsentEntries:s}=z2(this._heartbeatsCache.heartbeats),a=mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return hr.warn(n),""}}}function Kx(){return new Date().toISOString().substring(0,10)}function z2(t,e=L2){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),Qx(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Qx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class F2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rv()?sv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await D2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Gx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Gx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qx(t){return mc(JSON.stringify({version:2,heartbeats:t})).length}function U2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){Rn(new gn("platform-logger",e=>new e2(e),"PRIVATE")),Rn(new gn("heartbeat",e=>new M2(e),"PRIVATE")),Gt(jh,Wx,t),Gt(jh,Wx,"esm2020"),Gt("fire-js","")}B2("");var Yx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gr,dv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,p){function y(){}y.prototype=p.prototype,g.F=p.prototype,g.prototype=new y,g.prototype.constructor=g,g.D=function(k,C,R){for(var _=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)_[ae-2]=arguments[ae];return p.prototype[C].apply(k,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(g,p,y){y||(y=0);const k=Array(16);if(typeof p=="string")for(var C=0;C<16;++C)k[C]=p.charCodeAt(y++)|p.charCodeAt(y++)<<8|p.charCodeAt(y++)<<16|p.charCodeAt(y++)<<24;else for(C=0;C<16;++C)k[C]=p[y++]|p[y++]<<8|p[y++]<<16|p[y++]<<24;p=g.g[0],y=g.g[1],C=g.g[2];let R=g.g[3],_;_=p+(R^y&(C^R))+k[0]+3614090360&4294967295,p=y+(_<<7&4294967295|_>>>25),_=R+(C^p&(y^C))+k[1]+3905402710&4294967295,R=p+(_<<12&4294967295|_>>>20),_=C+(y^R&(p^y))+k[2]+606105819&4294967295,C=R+(_<<17&4294967295|_>>>15),_=y+(p^C&(R^p))+k[3]+3250441966&4294967295,y=C+(_<<22&4294967295|_>>>10),_=p+(R^y&(C^R))+k[4]+4118548399&4294967295,p=y+(_<<7&4294967295|_>>>25),_=R+(C^p&(y^C))+k[5]+1200080426&4294967295,R=p+(_<<12&4294967295|_>>>20),_=C+(y^R&(p^y))+k[6]+2821735955&4294967295,C=R+(_<<17&4294967295|_>>>15),_=y+(p^C&(R^p))+k[7]+4249261313&4294967295,y=C+(_<<22&4294967295|_>>>10),_=p+(R^y&(C^R))+k[8]+1770035416&4294967295,p=y+(_<<7&4294967295|_>>>25),_=R+(C^p&(y^C))+k[9]+2336552879&4294967295,R=p+(_<<12&4294967295|_>>>20),_=C+(y^R&(p^y))+k[10]+4294925233&4294967295,C=R+(_<<17&4294967295|_>>>15),_=y+(p^C&(R^p))+k[11]+2304563134&4294967295,y=C+(_<<22&4294967295|_>>>10),_=p+(R^y&(C^R))+k[12]+1804603682&4294967295,p=y+(_<<7&4294967295|_>>>25),_=R+(C^p&(y^C))+k[13]+4254626195&4294967295,R=p+(_<<12&4294967295|_>>>20),_=C+(y^R&(p^y))+k[14]+2792965006&4294967295,C=R+(_<<17&4294967295|_>>>15),_=y+(p^C&(R^p))+k[15]+1236535329&4294967295,y=C+(_<<22&4294967295|_>>>10),_=p+(C^R&(y^C))+k[1]+4129170786&4294967295,p=y+(_<<5&4294967295|_>>>27),_=R+(y^C&(p^y))+k[6]+3225465664&4294967295,R=p+(_<<9&4294967295|_>>>23),_=C+(p^y&(R^p))+k[11]+643717713&4294967295,C=R+(_<<14&4294967295|_>>>18),_=y+(R^p&(C^R))+k[0]+3921069994&4294967295,y=C+(_<<20&4294967295|_>>>12),_=p+(C^R&(y^C))+k[5]+3593408605&4294967295,p=y+(_<<5&4294967295|_>>>27),_=R+(y^C&(p^y))+k[10]+38016083&4294967295,R=p+(_<<9&4294967295|_>>>23),_=C+(p^y&(R^p))+k[15]+3634488961&4294967295,C=R+(_<<14&4294967295|_>>>18),_=y+(R^p&(C^R))+k[4]+3889429448&4294967295,y=C+(_<<20&4294967295|_>>>12),_=p+(C^R&(y^C))+k[9]+568446438&4294967295,p=y+(_<<5&4294967295|_>>>27),_=R+(y^C&(p^y))+k[14]+3275163606&4294967295,R=p+(_<<9&4294967295|_>>>23),_=C+(p^y&(R^p))+k[3]+4107603335&4294967295,C=R+(_<<14&4294967295|_>>>18),_=y+(R^p&(C^R))+k[8]+1163531501&4294967295,y=C+(_<<20&4294967295|_>>>12),_=p+(C^R&(y^C))+k[13]+2850285829&4294967295,p=y+(_<<5&4294967295|_>>>27),_=R+(y^C&(p^y))+k[2]+4243563512&4294967295,R=p+(_<<9&4294967295|_>>>23),_=C+(p^y&(R^p))+k[7]+1735328473&4294967295,C=R+(_<<14&4294967295|_>>>18),_=y+(R^p&(C^R))+k[12]+2368359562&4294967295,y=C+(_<<20&4294967295|_>>>12),_=p+(y^C^R)+k[5]+4294588738&4294967295,p=y+(_<<4&4294967295|_>>>28),_=R+(p^y^C)+k[8]+2272392833&4294967295,R=p+(_<<11&4294967295|_>>>21),_=C+(R^p^y)+k[11]+1839030562&4294967295,C=R+(_<<16&4294967295|_>>>16),_=y+(C^R^p)+k[14]+4259657740&4294967295,y=C+(_<<23&4294967295|_>>>9),_=p+(y^C^R)+k[1]+2763975236&4294967295,p=y+(_<<4&4294967295|_>>>28),_=R+(p^y^C)+k[4]+1272893353&4294967295,R=p+(_<<11&4294967295|_>>>21),_=C+(R^p^y)+k[7]+4139469664&4294967295,C=R+(_<<16&4294967295|_>>>16),_=y+(C^R^p)+k[10]+3200236656&4294967295,y=C+(_<<23&4294967295|_>>>9),_=p+(y^C^R)+k[13]+681279174&4294967295,p=y+(_<<4&4294967295|_>>>28),_=R+(p^y^C)+k[0]+3936430074&4294967295,R=p+(_<<11&4294967295|_>>>21),_=C+(R^p^y)+k[3]+3572445317&4294967295,C=R+(_<<16&4294967295|_>>>16),_=y+(C^R^p)+k[6]+76029189&4294967295,y=C+(_<<23&4294967295|_>>>9),_=p+(y^C^R)+k[9]+3654602809&4294967295,p=y+(_<<4&4294967295|_>>>28),_=R+(p^y^C)+k[12]+3873151461&4294967295,R=p+(_<<11&4294967295|_>>>21),_=C+(R^p^y)+k[15]+530742520&4294967295,C=R+(_<<16&4294967295|_>>>16),_=y+(C^R^p)+k[2]+3299628645&4294967295,y=C+(_<<23&4294967295|_>>>9),_=p+(C^(y|~R))+k[0]+4096336452&4294967295,p=y+(_<<6&4294967295|_>>>26),_=R+(y^(p|~C))+k[7]+1126891415&4294967295,R=p+(_<<10&4294967295|_>>>22),_=C+(p^(R|~y))+k[14]+2878612391&4294967295,C=R+(_<<15&4294967295|_>>>17),_=y+(R^(C|~p))+k[5]+4237533241&4294967295,y=C+(_<<21&4294967295|_>>>11),_=p+(C^(y|~R))+k[12]+1700485571&4294967295,p=y+(_<<6&4294967295|_>>>26),_=R+(y^(p|~C))+k[3]+2399980690&4294967295,R=p+(_<<10&4294967295|_>>>22),_=C+(p^(R|~y))+k[10]+4293915773&4294967295,C=R+(_<<15&4294967295|_>>>17),_=y+(R^(C|~p))+k[1]+2240044497&4294967295,y=C+(_<<21&4294967295|_>>>11),_=p+(C^(y|~R))+k[8]+1873313359&4294967295,p=y+(_<<6&4294967295|_>>>26),_=R+(y^(p|~C))+k[15]+4264355552&4294967295,R=p+(_<<10&4294967295|_>>>22),_=C+(p^(R|~y))+k[6]+2734768916&4294967295,C=R+(_<<15&4294967295|_>>>17),_=y+(R^(C|~p))+k[13]+1309151649&4294967295,y=C+(_<<21&4294967295|_>>>11),_=p+(C^(y|~R))+k[4]+4149444226&4294967295,p=y+(_<<6&4294967295|_>>>26),_=R+(y^(p|~C))+k[11]+3174756917&4294967295,R=p+(_<<10&4294967295|_>>>22),_=C+(p^(R|~y))+k[2]+718787259&4294967295,C=R+(_<<15&4294967295|_>>>17),_=y+(R^(C|~p))+k[9]+3951481745&4294967295,g.g[0]=g.g[0]+p&4294967295,g.g[1]=g.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,g.g[2]=g.g[2]+C&4294967295,g.g[3]=g.g[3]+R&4294967295}r.prototype.v=function(g,p){p===void 0&&(p=g.length);const y=p-this.blockSize,k=this.C;let C=this.h,R=0;for(;R<p;){if(C==0)for(;R<=y;)s(this,g,R),R+=this.blockSize;if(typeof g=="string"){for(;R<p;)if(k[C++]=g.charCodeAt(R++),C==this.blockSize){s(this,k),C=0;break}}else for(;R<p;)if(k[C++]=g[R++],C==this.blockSize){s(this,k),C=0;break}}this.h=C,this.o+=p},r.prototype.A=function(){var g=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);g[0]=128;for(var p=1;p<g.length-8;++p)g[p]=0;p=this.o*8;for(var y=g.length-8;y<g.length;++y)g[y]=p&255,p/=256;for(this.v(g),g=Array(16),p=0,y=0;y<4;++y)for(let k=0;k<32;k+=8)g[p++]=this.g[y]>>>k&255;return g};function a(g,p){var y=c;return Object.prototype.hasOwnProperty.call(y,g)?y[g]:y[g]=p(g)}function o(g,p){this.h=p;const y=[];let k=!0;for(let C=g.length-1;C>=0;C--){const R=g[C]|0;k&&R==p||(y[C]=R,k=!1)}this.g=y}var c={};function u(g){return-128<=g&&g<128?a(g,function(p){return new o([p|0],p<0?-1:0)}):new o([g|0],g<0?-1:0)}function d(g){if(isNaN(g)||!isFinite(g))return x;if(g<0)return O(d(-g));const p=[];let y=1;for(let k=0;g>=y;k++)p[k]=g/y|0,y*=4294967296;return new o(p,0)}function f(g,p){if(g.length==0)throw Error("number format error: empty string");if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(g.charAt(0)=="-")return O(f(g.substring(1),p));if(g.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=d(Math.pow(p,8));let k=x;for(let R=0;R<g.length;R+=8){var C=Math.min(8,g.length-R);const _=parseInt(g.substring(R,R+C),p);C<8?(C=d(Math.pow(p,C)),k=k.j(C).add(d(_))):(k=k.j(y),k=k.add(d(_)))}return k}var x=u(0),b=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-O(this).m();let g=0,p=1;for(let y=0;y<this.g.length;y++){const k=this.i(y);g+=(k>=0?k:4294967296+k)*p,p*=4294967296}return g},t.toString=function(g){if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(I(this))return"0";if(A(this))return"-"+O(this).toString(g);const p=d(Math.pow(g,6));var y=this;let k="";for(;;){const C=L(y,p).g;y=N(y,C.j(p));let R=((y.g.length>0?y.g[0]:y.h)>>>0).toString(g);if(y=C,I(y))return R+k;for(;R.length<6;)R="0"+R;k=R+k}},t.i=function(g){return g<0?0:g<this.g.length?this.g[g]:this.h};function I(g){if(g.h!=0)return!1;for(let p=0;p<g.g.length;p++)if(g.g[p]!=0)return!1;return!0}function A(g){return g.h==-1}t.l=function(g){return g=N(this,g),A(g)?-1:I(g)?0:1};function O(g){const p=g.g.length,y=[];for(let k=0;k<p;k++)y[k]=~g.g[k];return new o(y,~g.h).add(b)}t.abs=function(){return A(this)?O(this):this},t.add=function(g){const p=Math.max(this.g.length,g.g.length),y=[];let k=0;for(let C=0;C<=p;C++){let R=k+(this.i(C)&65535)+(g.i(C)&65535),_=(R>>>16)+(this.i(C)>>>16)+(g.i(C)>>>16);k=_>>>16,R&=65535,_&=65535,y[C]=_<<16|R}return new o(y,y[y.length-1]&-2147483648?-1:0)};function N(g,p){return g.add(O(p))}t.j=function(g){if(I(this)||I(g))return x;if(A(this))return A(g)?O(this).j(O(g)):O(O(this).j(g));if(A(g))return O(this.j(O(g)));if(this.l(E)<0&&g.l(E)<0)return d(this.m()*g.m());const p=this.g.length+g.g.length,y=[];for(var k=0;k<2*p;k++)y[k]=0;for(k=0;k<this.g.length;k++)for(let C=0;C<g.g.length;C++){const R=this.i(k)>>>16,_=this.i(k)&65535,ae=g.i(C)>>>16,Ge=g.i(C)&65535;y[2*k+2*C]+=_*Ge,v(y,2*k+2*C),y[2*k+2*C+1]+=R*Ge,v(y,2*k+2*C+1),y[2*k+2*C+1]+=_*ae,v(y,2*k+2*C+1),y[2*k+2*C+2]+=R*ae,v(y,2*k+2*C+2)}for(g=0;g<p;g++)y[g]=y[2*g+1]<<16|y[2*g];for(g=p;g<2*p;g++)y[g]=0;return new o(y,0)};function v(g,p){for(;(g[p]&65535)!=g[p];)g[p+1]+=g[p]>>>16,g[p]&=65535,p++}function j(g,p){this.g=g,this.h=p}function L(g,p){if(I(p))throw Error("division by zero");if(I(g))return new j(x,x);if(A(g))return p=L(O(g),p),new j(O(p.g),O(p.h));if(A(p))return p=L(g,O(p)),new j(O(p.g),p.h);if(g.g.length>30){if(A(g)||A(p))throw Error("slowDivide_ only works with positive integers.");for(var y=b,k=p;k.l(g)<=0;)y=S(y),k=S(k);var C=T(y,1),R=T(k,1);for(k=T(k,2),y=T(y,2);!I(k);){var _=R.add(k);_.l(g)<=0&&(C=C.add(y),R=_),k=T(k,1),y=T(y,1)}return p=N(g,C.j(p)),new j(C,p)}for(C=x;g.l(p)>=0;){for(y=Math.max(1,Math.floor(g.m()/p.m())),k=Math.ceil(Math.log(y)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),R=d(y),_=R.j(p);A(_)||_.l(g)>0;)y-=k,R=d(y),_=R.j(p);I(R)&&(R=b),C=C.add(R),g=N(g,_)}return new j(C,g)}t.B=function(g){return L(this,g).h},t.and=function(g){const p=Math.max(this.g.length,g.g.length),y=[];for(let k=0;k<p;k++)y[k]=this.i(k)&g.i(k);return new o(y,this.h&g.h)},t.or=function(g){const p=Math.max(this.g.length,g.g.length),y=[];for(let k=0;k<p;k++)y[k]=this.i(k)|g.i(k);return new o(y,this.h|g.h)},t.xor=function(g){const p=Math.max(this.g.length,g.g.length),y=[];for(let k=0;k<p;k++)y[k]=this.i(k)^g.i(k);return new o(y,this.h^g.h)};function S(g){const p=g.g.length+1,y=[];for(let k=0;k<p;k++)y[k]=g.i(k)<<1|g.i(k-1)>>>31;return new o(y,g.h)}function T(g,p){const y=p>>5;p%=32;const k=g.g.length-y,C=[];for(let R=0;R<k;R++)C[R]=p>0?g.i(R+y)>>>p|g.i(R+y+1)<<32-p:g.i(R+y);return new o(C,g.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,dv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Gr=o}).apply(typeof Yx<"u"?Yx:typeof self<"u"?self:typeof window<"u"?window:{});var fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hv,Sa,fv,Pl,Sh,pv,mv,xv;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof fl=="object"&&fl];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var V=l[w];if(!(V in m))break e;m=m[V]}l=l[l.length-1],w=m[l],h=h(w),h!=w&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var m=[],w;for(w in h)Object.prototype.hasOwnProperty.call(h,w)&&m.push([w,h[w]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,m){return l.call.apply(l.bind,arguments)}function d(l,h,m){return d=u,d.apply(null,arguments)}function f(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function x(l,h){function m(){}m.prototype=h.prototype,l.Z=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Ob=function(w,V,M){for(var K=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)K[ge-2]=arguments[ge];return h.prototype[V].apply(w,K)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function E(l){const h=l.length;if(h>0){const m=Array(h);for(let w=0;w<h;w++)m[w]=l[w];return m}return[]}function I(l,h){for(let w=1;w<arguments.length;w++){const V=arguments[w];var m=typeof V;if(m=m!="object"?m:V?Array.isArray(V)?"array":m:"null",m=="array"||m=="object"&&typeof V.length=="number"){m=l.length||0;const M=V.length||0;l.length=m+M;for(let K=0;K<M;K++)l[m+K]=V[K]}else l.push(V)}}class A{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function O(l){o.setTimeout(()=>{throw l},0)}function N(){var l=g;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class v{constructor(){this.h=this.g=null}add(h,m){const w=j.get();w.set(h,m),this.h?this.h.next=w:this.g=w,this.h=w}}var j=new A(()=>new L,l=>l.reset());class L{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let S,T=!1,g=new v,p=()=>{const l=Promise.resolve(void 0);S=()=>{l.then(y)}};function y(){for(var l;l=N();){try{l.h.call(l.g)}catch(m){O(m)}var h=j;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}T=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};o.addEventListener("test",m,h),o.removeEventListener("test",m,h)}catch{}return l}();function _(l){return/^[\s\xa0]*$/.test(l)}function ae(l,h){C.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}x(ae,C),ae.prototype.init=function(l,h){const m=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ge="closure_listenable_"+(Math.random()*1e6|0),wt=0;function F(l,h,m,w,V){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!w,this.ha=V,this.key=++wt,this.da=this.fa=!1}function z(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function $(l,h,m){for(const w in l)h.call(m,l[w],w,l)}function Q(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function se(l){const h={};for(const m in l)h[m]=l[m];return h}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function He(l,h){let m,w;for(let V=1;V<arguments.length;V++){w=arguments[V];for(m in w)l[m]=w[m];for(let M=0;M<ce.length;M++)m=ce[M],Object.prototype.hasOwnProperty.call(w,m)&&(l[m]=w[m])}}function Ce(l){this.src=l,this.g={},this.h=0}Ce.prototype.add=function(l,h,m,w,V){const M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);const K=Ze(l,h,w,V);return K>-1?(h=l[K],m||(h.fa=!1)):(h=new F(h,this.src,M,!!w,V),h.fa=m,l.push(h)),h};function Ct(l,h){const m=h.type;if(m in l.g){var w=l.g[m],V=Array.prototype.indexOf.call(w,h,void 0),M;(M=V>=0)&&Array.prototype.splice.call(w,V,1),M&&(z(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Ze(l,h,m,w){for(let V=0;V<l.length;++V){const M=l[V];if(!M.da&&M.listener==h&&M.capture==!!m&&M.ha==w)return V}return-1}var Kt="closure_lm_"+(Math.random()*1e6|0),D={};function U(l,h,m,w,V){if(Array.isArray(h)){for(let M=0;M<h.length;M++)U(l,h[M],m,w,V);return null}return m=ea(m),l&&l[Ge]?l.J(h,m,c(w)?!!w.capture:!1,V):ve(l,h,m,!1,w,V)}function ve(l,h,m,w,V,M){if(!h)throw Error("Invalid event type");const K=c(V)?!!V.capture:!!V;let ge=Xn(l);if(ge||(l[Kt]=ge=new Ce(l)),m=ge.add(h,m,w,K,M),m.proxy)return m;if(w=Qt(),m.proxy=w,w.src=l,w.listener=m,l.addEventListener)R||(V=K),V===void 0&&(V=!1),l.addEventListener(h.toString(),w,V);else if(l.attachEvent)l.attachEvent(ls(h.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Qt(){function l(m){return h.call(l.src,l.listener,m)}const h=cs;return l}function Ve(l,h,m,w,V){if(Array.isArray(h))for(var M=0;M<h.length;M++)Ve(l,h[M],m,w,V);else w=c(w)?!!w.capture:!!w,m=ea(m),l&&l[Ge]?(l=l.i,M=String(h).toString(),M in l.g&&(h=l.g[M],m=Ze(h,m,w,V),m>-1&&(z(h[m]),Array.prototype.splice.call(h,m,1),h.length==0&&(delete l.g[M],l.h--)))):l&&(l=Xn(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ze(h,m,w,V)),(m=l>-1?h[l]:null)&&Jn(m))}function Jn(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Ge])Ct(h.i,l);else{var m=l.type,w=l.proxy;h.removeEventListener?h.removeEventListener(m,w,l.capture):h.detachEvent?h.detachEvent(ls(m),w):h.addListener&&h.removeListener&&h.removeListener(w),(m=Xn(h))?(Ct(m,l),m.h==0&&(m.src=null,h[Kt]=null)):z(l)}}}function ls(l){return l in D?D[l]:D[l]="on"+l}function cs(l,h){if(l.da)l=!0;else{h=new ae(h,this);const m=l.listener,w=l.ha||l.src;l.fa&&Jn(l),l=m.call(w,h)}return l}function Xn(l){return l=l[Kt],l instanceof Ce?l:null}var Ks="__closure_events_fn_"+(Math.random()*1e9>>>0);function ea(l){return typeof l=="function"?l:(l[Ks]||(l[Ks]=function(h){return l.handleEvent(h)}),l[Ks])}function et(){k.call(this),this.i=new Ce(this),this.M=this,this.G=null}x(et,k),et.prototype[Ge]=!0,et.prototype.removeEventListener=function(l,h,m,w){Ve(this,l,h,m,w)};function ot(l,h){var m,w=l.G;if(w)for(m=[];w;w=w.G)m.push(w);if(l=l.M,w=h.type||h,typeof h=="string")h=new C(h,l);else if(h instanceof C)h.target=h.target||l;else{var V=h;h=new C(w,l),He(h,V)}V=!0;let M,K;if(m)for(K=m.length-1;K>=0;K--)M=h.g=m[K],V=P(M,w,!0,h)&&V;if(M=h.g=l,V=P(M,w,!0,h)&&V,V=P(M,w,!1,h)&&V,m)for(K=0;K<m.length;K++)M=h.g=m[K],V=P(M,w,!1,h)&&V}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const m=l.g[h];for(let w=0;w<m.length;w++)z(m[w]);delete l.g[h],l.h--}}this.G=null},et.prototype.J=function(l,h,m,w){return this.i.add(String(l),h,!1,m,w)},et.prototype.K=function(l,h,m,w){return this.i.add(String(l),h,!0,m,w)};function P(l,h,m,w){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let V=!0;for(let M=0;M<h.length;++M){const K=h[M];if(K&&!K.da&&K.capture==m){const ge=K.listener,nt=K.ha||K.src;K.fa&&Ct(l.i,K),V=ge.call(nt,w)!==!1&&V}}return V&&!w.defaultPrevented}function X(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function Y(l){l.g=X(()=>{l.g=null,l.i&&(l.i=!1,Y(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class ne extends k{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Y(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function q(l){k.call(this),this.h=l,this.g={}}x(q,k);var Z=[];function je(l){$(l.g,function(h,m){this.g.hasOwnProperty(m)&&Jn(h)},l),l.g={}}q.prototype.N=function(){q.Z.N.call(this),je(this)},q.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var be=o.JSON.stringify,fe=o.JSON.parse,pe=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function ue(){}function xe(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ae(){C.call(this,"d")}x(Ae,C);function ln(){C.call(this,"c")}x(ln,C);var Jt={},tt=null;function Xt(){return tt=tt||new et}Jt.Ia="serverreachability";function ta(l){C.call(this,Jt.Ia,l)}x(ta,C);function J(l){const h=Xt();ot(h,new ta(h))}Jt.STAT_EVENT="statevent";function lt(l,h){C.call(this,Jt.STAT_EVENT,l),this.stat=h}x(lt,C);function At(l){const h=Xt();ot(h,new lt(h,l))}Jt.Ja="timingevent";function zp(l,h){C.call(this,Jt.Ja,l),this.size=h}x(zp,C);function na(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function ra(){this.g=!0}ra.prototype.ua=function(){this.g=!1};function Uk(l,h,m,w,V,M){l.info(function(){if(l.g)if(M){var K="",ge=M.split("&");for(let Ie=0;Ie<ge.length;Ie++){var nt=ge[Ie].split("=");if(nt.length>1){const ct=nt[0];nt=nt[1];const On=ct.split("_");K=On.length>=2&&On[1]=="type"?K+(ct+"="+nt+"&"):K+(ct+"=redacted&")}}}else K=null;else K=M;return"XMLHTTP REQ ("+w+") [attempt "+V+"]: "+h+`
`+m+`
`+K})}function Bk(l,h,m,w,V,M,K){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+V+"]: "+h+`
`+m+`
`+M+" "+K})}function Qs(l,h,m,w){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Hk(l,m)+(w?" "+w:"")})}function $k(l,h){l.info(function(){return"TIMEOUT: "+h})}ra.prototype.info=function(){};function Hk(l,h){if(!l.g)return h;if(!h)return null;try{const M=JSON.parse(h);if(M){for(l=0;l<M.length;l++)if(Array.isArray(M[l])){var m=M[l];if(!(m.length<2)){var w=m[1];if(Array.isArray(w)&&!(w.length<1)){var V=w[0];if(V!="noop"&&V!="stop"&&V!="close")for(let K=1;K<w.length;K++)w[K]=""}}}}return be(M)}catch{return h}}var zo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Up;function _u(){}x(_u,ue),_u.prototype.g=function(){return new XMLHttpRequest},Up=new _u;function sa(l){return encodeURIComponent(String(l))}function Wk(l){var h=1;l=l.split(":");const m=[];for(;h>0&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function br(l,h,m,w){this.j=l,this.i=h,this.l=m,this.S=w||1,this.V=new q(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bp}function Bp(){this.i=null,this.g="",this.h=!1}var $p={},ju={};function Eu(l,h,m){l.M=1,l.A=Uo(Pn(h)),l.u=m,l.R=!0,Hp(l,null)}function Hp(l,h){l.F=Date.now(),Fo(l),l.B=Pn(l.A);var m=l.B,w=l.S;Array.isArray(w)||(w=[String(w)]),rm(m.i,"t",w),l.C=0,m=l.j.L,l.h=new Bp,l.g=wm(l.j,m?h:null,!l.u),l.P>0&&(l.O=new ne(d(l.Y,l,l.g),l.P)),h=l.V,m=l.g,w=l.ba;var V="readystatechange";Array.isArray(V)||(V&&(Z[0]=V.toString()),V=Z);for(let M=0;M<V.length;M++){const K=U(m,V[M],w||h.handleEvent,!1,h.h||h);if(!K)break;h.g[K.key]=K}h=l.J?se(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),J(),Uk(l.i,l.v,l.B,l.l,l.S,l.u)}br.prototype.ba=function(l){l=l.target;const h=this.O;h&&wr(l)==3?h.j():this.Y(l)},br.prototype.Y=function(l){try{if(l==this.g)e:{const ge=wr(this.g),nt=this.g.ya(),Ie=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||um(this.g)))){this.K||ge!=4||nt==7||(nt==8||Ie<=0?J(3):J(2)),Tu(this);var h=this.g.ca();this.X=h;var m=qk(this);if(this.o=h==200,Bk(this.i,this.v,this.B,this.l,this.S,ge,h),this.o){if(this.U&&!this.L){t:{if(this.g){var w,V=this.g;if((w=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(w)){var M=w;break t}}M=null}if(l=M)Qs(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Su(this,l);else{this.o=!1,this.m=3,At(12),us(this),ia(this);break e}}if(this.R){l=!0;let ct;for(;!this.K&&this.C<m.length;)if(ct=Gk(this,m),ct==ju){ge==4&&(this.m=4,At(14),l=!1),Qs(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==$p){this.m=4,At(15),Qs(this.i,this.l,m,"[Invalid Chunk]"),l=!1;break}else Qs(this.i,this.l,ct,null),Su(this,ct);if(Wp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||m.length!=0||this.h.h||(this.m=1,At(16),l=!1),this.o=this.o&&l,!l)Qs(this.i,this.l,m,"[Invalid Chunked Response]"),us(this),ia(this);else if(m.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Lu(K),K.P=!0,At(11))}}else Qs(this.i,this.l,m,null),Su(this,m);ge==4&&us(this),this.o&&!this.K&&(ge==4?gm(this.j,this):(this.o=!1,Fo(this)))}else o1(this.g),h==400&&m.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),us(this),ia(this)}}}catch{}finally{}};function qk(l){if(!Wp(l))return l.g.la();const h=um(l.g);if(h==="")return"";let m="";const w=h.length,V=wr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return us(l),ia(l),"";l.h.i=new o.TextDecoder}for(let M=0;M<w;M++)l.h.h=!0,m+=l.h.i.decode(h[M],{stream:!(V&&M==w-1)});return h.length=0,l.h.g+=m,l.C=0,l.h.g}function Wp(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Gk(l,h){var m=l.C,w=h.indexOf(`
`,m);return w==-1?ju:(m=Number(h.substring(m,w)),isNaN(m)?$p:(w+=1,w+m>h.length?ju:(h=h.slice(w,w+m),l.C=w+m,h)))}br.prototype.cancel=function(){this.K=!0,us(this)};function Fo(l){l.T=Date.now()+l.H,qp(l,l.H)}function qp(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=na(d(l.aa,l),h)}function Tu(l){l.D&&(o.clearTimeout(l.D),l.D=null)}br.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?($k(this.i,this.B),this.M!=2&&(J(),At(17)),us(this),this.m=2,ia(this)):qp(this,this.T-l)};function ia(l){l.j.I==0||l.K||gm(l.j,l)}function us(l){Tu(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,je(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function Su(l,h){try{var m=l.j;if(m.I!=0&&(m.g==l||Iu(m.h,l))){if(!l.L&&Iu(m.h,l)&&m.I==3){try{var w=m.Ba.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var V=w;if(V[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<l.F)qo(m),Ho(m);else break e;Du(m),At(18)}}else m.xa=V[1],0<m.xa-m.K&&V[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=na(d(m.Va,m),6e3));Qp(m.h)<=1&&m.ta&&(m.ta=void 0)}else hs(m,11)}else if((l.L||m.g==l)&&qo(m),!_(h))for(V=m.Ba.g.parse(h),h=0;h<V.length;h++){let Ie=V[h];const ct=Ie[0];if(!(ct<=m.K))if(m.K=ct,Ie=Ie[1],m.I==2)if(Ie[0]=="c"){m.M=Ie[1],m.ba=Ie[2];const On=Ie[3];On!=null&&(m.ka=On,m.j.info("VER="+m.ka));const fs=Ie[4];fs!=null&&(m.za=fs,m.j.info("SVER="+m.za));const kr=Ie[5];kr!=null&&typeof kr=="number"&&kr>0&&(w=1.5*kr,m.O=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const Nr=l.g;if(Nr){const Ko=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ko){var M=w.h;M.g||Ko.indexOf("spdy")==-1&&Ko.indexOf("quic")==-1&&Ko.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Cu(M,M.h),M.h=null))}if(w.G){const Vu=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Vu&&(w.wa=Vu,Pe(w.J,w.G,Vu))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-l.F,m.j.info("Handshake RTT: "+m.T+"ms")),w=m;var K=l;if(w.na=vm(w,w.L?w.ba:null,w.W),K.L){Yp(w.h,K);var ge=K,nt=w.O;nt&&(ge.H=nt),ge.D&&(Tu(ge),Fo(ge)),w.g=K}else mm(w);m.i.length>0&&Wo(m)}else Ie[0]!="stop"&&Ie[0]!="close"||hs(m,7);else m.I==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?hs(m,7):Ou(m):Ie[0]!="noop"&&m.l&&m.l.qa(Ie),m.A=0)}}J(4)}catch{}}var Kk=class{constructor(l,h){this.g=l,this.map=h}};function Gp(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Kp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Qp(l){return l.h?1:l.g?l.g.size:0}function Iu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Cu(l,h){l.g?l.g.add(h):l.h=h}function Yp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Gp.prototype.cancel=function(){if(this.i=Jp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Jp(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.G);return h}return E(l.i)}var Xp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qk(l,h){if(l){l=l.split("&");for(let m=0;m<l.length;m++){const w=l[m].indexOf("=");let V,M=null;w>=0?(V=l[m].substring(0,w),M=l[m].substring(w+1)):V=l[m],h(V,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function yr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof yr?(this.l=l.l,aa(this,l.j),this.o=l.o,this.g=l.g,oa(this,l.u),this.h=l.h,Au(this,sm(l.i)),this.m=l.m):l&&(h=String(l).match(Xp))?(this.l=!1,aa(this,h[1]||"",!0),this.o=la(h[2]||""),this.g=la(h[3]||"",!0),oa(this,h[4]),this.h=la(h[5]||"",!0),Au(this,h[6]||"",!0),this.m=la(h[7]||"")):(this.l=!1,this.i=new ua(null,this.l))}yr.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(ca(h,Zp,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ca(h,Zp,!0),"@"),l.push(sa(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&l.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(ca(m,m.charAt(0)=="/"?Xk:Jk,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",ca(m,e1)),l.join("")},yr.prototype.resolve=function(l){const h=Pn(this);let m=!!l.j;m?aa(h,l.j):m=!!l.o,m?h.o=l.o:m=!!l.g,m?h.g=l.g:m=l.u!=null;var w=l.h;if(m)oa(h,l.u);else if(m=!!l.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var V=h.h.lastIndexOf("/");V!=-1&&(w=h.h.slice(0,V+1)+w)}if(V=w,V==".."||V==".")w="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){w=V.lastIndexOf("/",0)==0,V=V.split("/");const M=[];for(let K=0;K<V.length;){const ge=V[K++];ge=="."?w&&K==V.length&&M.push(""):ge==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),w&&K==V.length&&M.push("")):(M.push(ge),w=!0)}w=M.join("/")}else w=V}return m?h.h=w:m=l.i.toString()!=="",m?Au(h,sm(l.i)):m=!!l.m,m&&(h.m=l.m),h};function Pn(l){return new yr(l)}function aa(l,h,m){l.j=m?la(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function oa(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function Au(l,h,m){h instanceof ua?(l.i=h,t1(l.i,l.l)):(m||(h=ca(h,Zk)),l.i=new ua(h,l.l))}function Pe(l,h,m){l.i.set(h,m)}function Uo(l){return Pe(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function la(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ca(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,Yk),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Yk(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Zp=/[#\/\?@]/g,Jk=/[#\?:]/g,Xk=/[#\?]/g,Zk=/[#\?@]/g,e1=/#/g;function ua(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function ds(l){l.g||(l.g=new Map,l.h=0,l.i&&Qk(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=ua.prototype,t.add=function(l,h){ds(this),this.i=null,l=Ys(this,l);let m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function em(l,h){ds(l),h=Ys(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function tm(l,h){return ds(l),h=Ys(l,h),l.g.has(h)}t.forEach=function(l,h){ds(this),this.g.forEach(function(m,w){m.forEach(function(V){l.call(h,V,w,this)},this)},this)};function nm(l,h){ds(l);let m=[];if(typeof h=="string")tm(l,h)&&(m=m.concat(l.g.get(Ys(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)m=m.concat(l[h]);return m}t.set=function(l,h){return ds(this),this.i=null,l=Ys(this,l),tm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=nm(this,l),l.length>0?String(l[0]):h):h};function rm(l,h,m){em(l,h),m.length>0&&(l.i=null,l.g.set(Ys(l,h),E(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let w=0;w<h.length;w++){var m=h[w];const V=sa(m);m=nm(this,m);for(let M=0;M<m.length;M++){let K=V;m[M]!==""&&(K+="="+sa(m[M])),l.push(K)}}return this.i=l.join("&")};function sm(l){const h=new ua;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Ys(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function t1(l,h){h&&!l.j&&(ds(l),l.i=null,l.g.forEach(function(m,w){const V=w.toLowerCase();w!=V&&(em(this,w),rm(this,V,m))},l)),l.j=h}function n1(l,h){const m=new ra;if(o.Image){const w=new Image;w.onload=f(vr,m,"TestLoadImage: loaded",!0,h,w),w.onerror=f(vr,m,"TestLoadImage: error",!1,h,w),w.onabort=f(vr,m,"TestLoadImage: abort",!1,h,w),w.ontimeout=f(vr,m,"TestLoadImage: timeout",!1,h,w),o.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else h(!1)}function r1(l,h){const m=new ra,w=new AbortController,V=setTimeout(()=>{w.abort(),vr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:w.signal}).then(M=>{clearTimeout(V),M.ok?vr(m,"TestPingServer: ok",!0,h):vr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),vr(m,"TestPingServer: error",!1,h)})}function vr(l,h,m,w,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),w(m)}catch{}}function s1(){this.g=new pe}function Ru(l){this.i=l.Sb||null,this.h=l.ab||!1}x(Ru,ue),Ru.prototype.g=function(){return new Bo(this.i,this.h)};function Bo(l,h){et.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Bo,et),t=Bo.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,ha(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,da(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ha(this)),this.g&&(this.readyState=3,ha(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;im(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function im(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?da(this):ha(this),this.readyState==3&&im(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,da(this))},t.Na=function(l){this.g&&(this.response=l,da(this))},t.ga=function(){this.g&&da(this)};function da(l){l.readyState=4,l.l=null,l.j=null,l.B=null,ha(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function ha(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function am(l){let h="";return $(l,function(m,w){h+=w,h+=":",h+=m,h+=`\r
`}),h}function Pu(l,h,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=am(m),typeof l=="string"?m!=null&&sa(m):Pe(l,h,m))}function We(l){et.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(We,et);var i1=/^https?$/i,a1=["POST","PUT"];t=We.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Up.g(),this.g.onreadystatechange=b(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){om(this,M);return}if(l=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var V in w)m.set(V,w[V]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const M of w.keys())m.set(M,w.get(M));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),V=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(a1,h,void 0)>=0)||w||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,K]of m)this.g.setRequestHeader(M,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(M){om(this,M)}};function om(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,lm(l),$o(l)}function lm(l){l.A||(l.A=!0,ot(l,"complete"),ot(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ot(this,"complete"),ot(this,"abort"),$o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$o(this,!0)),We.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?cm(this):this.Xa())},t.Xa=function(){cm(this)};function cm(l){if(l.h&&typeof a<"u"){if(l.v&&wr(l)==4)setTimeout(l.Ca.bind(l),0);else if(ot(l,"readystatechange"),wr(l)==4){l.h=!1;try{const M=l.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var w;if(w=M===0){let K=String(l.D).match(Xp)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),w=!i1.test(K?K.toLowerCase():"")}m=w}if(m)ot(l,"complete"),ot(l,"success");else{l.o=6;try{var V=wr(l)>2?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.ca()+"]",lm(l)}}finally{$o(l)}}}}function $o(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const m=l.g;l.g=null,h||ot(l,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function wr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return wr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),fe(h)}};function um(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function o1(l){const h={};l=(l.g&&wr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(_(l[w]))continue;var m=Wk(l[w]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=h[V]||[];h[V]=M,M.push(m)}Q(h,function(w){return w.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function dm(l){this.za=0,this.i=[],this.j=new ra,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fa("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fa("baseRetryDelayMs",5e3,l),this.Za=fa("retryDelaySeedMs",1e4,l),this.Ta=fa("forwardChannelMaxRetries",2,l),this.va=fa("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Gp(l&&l.concurrentRequestLimit),this.Ba=new s1,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=dm.prototype,t.ka=8,t.I=1,t.connect=function(l,h,m,w){At(0),this.W=l,this.H=h||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.J=vm(this,null,this.W),Wo(this)};function Ou(l){if(hm(l),l.I==3){var h=l.V++,m=Pn(l.J);if(Pe(m,"SID",l.M),Pe(m,"RID",h),Pe(m,"TYPE","terminate"),pa(l,m),h=new br(l,l.j,h),h.M=2,h.A=Uo(Pn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=h.A,m=!0),m||(h.g=wm(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Fo(h)}ym(l)}function Ho(l){l.g&&(Lu(l),l.g.cancel(),l.g=null)}function hm(l){Ho(l),l.v&&(o.clearTimeout(l.v),l.v=null),qo(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Wo(l){if(!Kp(l.h)&&!l.m){l.m=!0;var h=l.Ea;S||p(),T||(S(),T=!0),g.add(h,l),l.D=0}}function l1(l,h){return Qp(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=na(d(l.Ea,l,h),bm(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const V=new br(this,this.j,l);let M=this.o;if(this.U&&(M?(M=se(M),He(M,this.U)):M=this.U),this.u!==null||this.R||(V.J=M,M=null),this.S)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,h>4096){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=pm(this,V,h),m=Pn(this.J),Pe(m,"RID",l),Pe(m,"CVER",22),this.G&&Pe(m,"X-HTTP-Session-Id",this.G),pa(this,m),M&&(this.R?h="headers="+sa(am(M))+"&"+h:this.u&&Pu(m,this.u,M)),Cu(this.h,V),this.Ra&&Pe(m,"TYPE","init"),this.S?(Pe(m,"$req",h),Pe(m,"SID","null"),V.U=!0,Eu(V,m,null)):Eu(V,m,h),this.I=2}}else this.I==3&&(l?fm(this,l):this.i.length==0||Kp(this.h)||fm(this))};function fm(l,h){var m;h?m=h.l:m=l.V++;const w=Pn(l.J);Pe(w,"SID",l.M),Pe(w,"RID",m),Pe(w,"AID",l.K),pa(l,w),l.u&&l.o&&Pu(w,l.u,l.o),m=new br(l,l.j,m,l.D+1),l.u===null&&(m.J=l.o),h&&(l.i=h.G.concat(l.i)),h=pm(l,m,1e3),m.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Cu(l.h,m),Eu(m,w,h)}function pa(l,h){l.H&&$(l.H,function(m,w){Pe(h,w,m)}),l.l&&$({},function(m,w){Pe(h,w,m)})}function pm(l,h,m){m=Math.min(l.i.length,m);const w=l.l?d(l.l.Ka,l.l,l):null;e:{var V=l.i;let ge=-1;for(;;){const nt=["count="+m];ge==-1?m>0?(ge=V[0].g,nt.push("ofs="+ge)):ge=0:nt.push("ofs="+ge);let Ie=!0;for(let ct=0;ct<m;ct++){var M=V[ct].g;const On=V[ct].map;if(M-=ge,M<0)ge=Math.max(0,V[ct].g-100),Ie=!1;else try{M="req"+M+"_"||"";try{var K=On instanceof Map?On:Object.entries(On);for(const[fs,kr]of K){let Nr=kr;c(kr)&&(Nr=be(kr)),nt.push(M+fs+"="+encodeURIComponent(Nr))}}catch(fs){throw nt.push(M+"type="+encodeURIComponent("_badmap")),fs}}catch{w&&w(On)}}if(Ie){K=nt.join("&");break e}}K=void 0}return l=l.i.splice(0,m),h.G=l,K}function mm(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;S||p(),T||(S(),T=!0),g.add(h,l),l.A=0}}function Du(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=na(d(l.Da,l),bm(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,xm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=na(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Ho(this),xm(this))};function Lu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function xm(l){l.g=new br(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=Pn(l.na);Pe(h,"RID","rpc"),Pe(h,"SID",l.M),Pe(h,"AID",l.K),Pe(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&Pe(h,"TO",l.ia),Pe(h,"TYPE","xmlhttp"),pa(l,h),l.u&&l.o&&Pu(h,l.u,l.o),l.O&&(l.g.H=l.O);var m=l.g;l=l.ba,m.M=1,m.A=Uo(Pn(h)),m.u=null,m.R=!0,Hp(m,l)}t.Va=function(){this.C!=null&&(this.C=null,Ho(this),Du(this),At(19))};function qo(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function gm(l,h){var m=null;if(l.g==h){qo(l),Lu(l),l.g=null;var w=2}else if(Iu(l.h,h))m=h.G,Yp(l.h,h),w=1;else return;if(l.I!=0){if(h.o)if(w==1){m=h.u?h.u.length:0,h=Date.now()-h.F;var V=l.D;w=Xt(),ot(w,new zp(w,m)),Wo(l)}else mm(l);else if(V=h.m,V==3||V==0&&h.X>0||!(w==1&&l1(l,h)||w==2&&Du(l)))switch(m&&m.length>0&&(h=l.h,h.i=h.i.concat(m)),V){case 1:hs(l,5);break;case 4:hs(l,10);break;case 3:hs(l,6);break;default:hs(l,2)}}}function bm(l,h){let m=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(m*=2),m*h}function hs(l,h){if(l.j.info("Error code "+h),h==2){var m=d(l.bb,l),w=l.Ua;const V=!w;w=new yr(w||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||aa(w,"https"),Uo(w),V?n1(w.toString(),m):r1(w.toString(),m)}else At(2);l.I=0,l.l&&l.l.pa(h),ym(l),hm(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function ym(l){if(l.I=0,l.ja=[],l.l){const h=Jp(l.h);(h.length!=0||l.i.length!=0)&&(I(l.ja,h),I(l.ja,l.i),l.h.i.length=0,E(l.i),l.i.length=0),l.l.oa()}}function vm(l,h,m){var w=m instanceof yr?Pn(m):new yr(m);if(w.g!="")h&&(w.g=h+"."+w.g),oa(w,w.u);else{var V=o.location;w=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;const M=new yr(null);w&&aa(M,w),h&&(M.g=h),V&&oa(M,V),m&&(M.h=m),w=M}return m=l.G,h=l.wa,m&&h&&Pe(w,m,h),Pe(w,"VER",l.ka),pa(l,w),w}function wm(l,h,m){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new We(new Ru({ab:m})):new We(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function km(){}t=km.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Go(){}Go.prototype.g=function(l,h){return new Zt(l,h)};function Zt(l,h){et.call(this),this.g=new dm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!_(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Js(this)}x(Zt,et),Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Ou(this.g)},Zt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.v&&(m={},m.__data__=be(l),l=m);h.i.push(new Kk(h.Ya++,l)),h.I==3&&Wo(h)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Ou(this.g),delete this.g,Zt.Z.N.call(this)};function Nm(l){Ae.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}x(Nm,Ae);function _m(){ln.call(this),this.status=1}x(_m,ln);function Js(l){this.g=l}x(Js,km),Js.prototype.ra=function(){ot(this.g,"a")},Js.prototype.qa=function(l){ot(this.g,new Nm(l))},Js.prototype.pa=function(l){ot(this.g,new _m)},Js.prototype.oa=function(){ot(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,xv=function(){return new Go},mv=function(){return Xt()},pv=Jt,Sh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,Pl=zo,Fp.COMPLETE="complete",fv=Fp,xe.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",et.prototype.listen=et.prototype.J,Sa=xe,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,hv=We}).apply(typeof fl<"u"?fl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qi="12.9.0";function $2(t){Qi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new su("@firebase/firestore");function Zs(){return Ps.logLevel}function ee(t,...e){if(Ps.logLevel<=we.DEBUG){const n=e.map(Qf);Ps.debug(`Firestore (${Qi}): ${t}`,...n)}}function fr(t,...e){if(Ps.logLevel<=we.ERROR){const n=e.map(Qf);Ps.error(`Firestore (${Qi}): ${t}`,...n)}}function Os(t,...e){if(Ps.logLevel<=we.WARN){const n=e.map(Qf);Ps.warn(`Firestore (${Qi}): ${t}`,...n)}}function Qf(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,gv(t,r,n)}function gv(t,e,n){let r=`FIRESTORE (${Qi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fr(r),new Error(r)}function Te(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||gv(e,s,r)}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends bn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class H2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jt.UNAUTHENTICATED))}shutdown(){}}class W2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class q2{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new js;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new js,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new js)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class G2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class K2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new G2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Te(this.o===void 0,3512);const r=a=>{a.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Y2(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function Ih(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return xd(s)===xd(a)?ke(s,a):xd(s)?1:-1}return ke(t.length,e.length)}const J2=55296,X2=57343;function xd(t){const e=t.charCodeAt(0);return e>=J2&&e<=X2}function Fi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="__name__";class Vn{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Vn.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return ke(e.length,n.length)}static compareSegments(e,n){const r=Vn.isNumericId(e),s=Vn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Vn.extractNumericId(e).compare(Vn.extractNumericId(n)):Ih(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gr.fromString(e.substring(4,e.length-2))}}class Fe extends Vn{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const Z2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends Vn{construct(e,n,r){return new xt(e,n,r)}static isValidIdentifier(e){return Z2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xx}static keyField(){return new xt([Xx])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new re(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new re(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(a(),s++)}if(a(),o)throw new re(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Fe.fromString(e))}static fromName(e){return new ie(Fe.fromString(e).popFirst(5))}static empty(){return new ie(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e,n){if(!n)throw new re(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tE(t,e,n,r){if(e===!0&&r===!0)throw new re(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zx(t){if(!ie.isDocumentKey(t))throw new re(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Jf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe(12329,{type:typeof t})}function ki(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jf(t);throw new re(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ao(t,e){if(!yv(t))throw new re(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new re(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-62135596800,tg=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tg);return new De(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<eg)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tg}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ao(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:Xe("string",De._jsonSchemaVersion),seconds:Xe("number"),nanoseconds:Xe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new De(0,0))}static max(){return new de(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=-1;function nE(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new Xr(s,ie.empty(),e)}function rE(t){return new Xr(t.readTime,t.key,xo)}class Xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xr(de.min(),ie.empty(),xo)}static max(){return new Xr(de.max(),ie.empty(),xo)}}function sE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==iE)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,a=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===a&&r(o)},f=>s(f))}})}static doWhile(e,n){return new B((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function oE(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ji(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}au.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=-1;function ou(t){return t==null}function gc(t){return t===0&&1/t==-1/0}function lE(t){return typeof t=="number"&&Number.isInteger(t)&&!gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="";function cE(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ng(e)),e=uE(t.get(n),e);return ng(e)}function uE(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case vv:n+="";break;default:n+=a}}return n}function ng(t){return t+vv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pl(this.root,e,this.comparator,!1)}getReverseIterator(){return new pl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pl(this.root,e,this.comparator,!0)}}class pl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??mt.RED,this.left=s??mt.EMPTY,this.right=a??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new mt(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return mt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sg(this.data.getIterator())}getIteratorFrom(e){return new sg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new at(this.comparator);return n.data=e,n}}class sg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new _n([])}unionWith(e){let n=new at(xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new kv("Invalid base64 string: "+a):a}}(e);return new vt(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const dE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(t){if(Te(!!t,39018),typeof t=="string"){let e=0;const n=dE.exec(t);if(Te(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function es(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="server_timestamp",_v="__type__",jv="__previous_value__",Ev="__local_write_time__";function Zf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_v])==null?void 0:r.stringValue)===Nv}function lu(t){const e=t.mapValue.fields[jv];return Zf(e)?lu(e):e}function go(t){const e=Zr(t.mapValue.fields[Ev].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n,r,s,a,o,c,u,d,f,x){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f,this.apiKey=x}}const bc="(default)";class bo{constructor(e,n){this.projectId=e,this.database=n||bc}static empty(){return new bo("","")}get isDefaultDatabase(){return this.database===bc}isEqual(e){return e instanceof bo&&e.projectId===this.projectId&&e.database===this.database}}function fE(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new re(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bo(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="__type__",pE="__max__",ml={mapValue:{}},Sv="__vector__",yc="value";function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zf(t)?4:xE(t)?9007199254740991:mE(t)?10:11:oe(28295,{value:t})}function Gn(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return go(t).isEqual(go(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Zr(s.timestampValue),c=Zr(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return es(s.bytesValue).isEqual(es(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Ke(s.geoPointValue.latitude)===Ke(a.geoPointValue.latitude)&&Ke(s.geoPointValue.longitude)===Ke(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ke(s.integerValue)===Ke(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Ke(s.doubleValue),c=Ke(a.doubleValue);return o===c?gc(o)===gc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Fi(t.arrayValue.values||[],e.arrayValue.values||[],Gn);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},c=a.mapValue.fields||{};if(rg(o)!==rg(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Gn(o[u],c[u])))return!1;return!0}(t,e);default:return oe(52216,{left:t})}}function yo(t,e){return(t.values||[]).find(n=>Gn(n,e))!==void 0}function Ui(t,e){if(t===e)return 0;const n=ts(t),r=ts(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=Ke(a.integerValue||a.doubleValue),u=Ke(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return ig(t.timestampValue,e.timestampValue);case 4:return ig(go(t),go(e));case 5:return Ih(t.stringValue,e.stringValue);case 6:return function(a,o){const c=es(a),u=es(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ke(c[d],u[d]);if(f!==0)return f}return ke(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=ke(Ke(a.latitude),Ke(o.latitude));return c!==0?c:ke(Ke(a.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ag(t.arrayValue,e.arrayValue);case 10:return function(a,o){var b,E,I,A;const c=a.fields||{},u=o.fields||{},d=(b=c[yc])==null?void 0:b.arrayValue,f=(E=u[yc])==null?void 0:E.arrayValue,x=ke(((I=d==null?void 0:d.values)==null?void 0:I.length)||0,((A=f==null?void 0:f.values)==null?void 0:A.length)||0);return x!==0?x:ag(d,f)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===ml.mapValue&&o===ml.mapValue)return 0;if(a===ml.mapValue)return 1;if(o===ml.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let x=0;x<u.length&&x<f.length;++x){const b=Ih(u[x],f[x]);if(b!==0)return b;const E=Ui(c[u[x]],d[f[x]]);if(E!==0)return E}return ke(u.length,f.length)}(t.mapValue,e.mapValue);default:throw oe(23264,{he:n})}}function ig(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=Zr(t),r=Zr(e),s=ke(n.seconds,r.seconds);return s!==0?s:ke(n.nanos,r.nanos)}function ag(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Ui(n[s],r[s]);if(a)return a}return ke(n.length,r.length)}function Bi(t){return Ch(t)}function Ch(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Ch(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${Ch(n.fields[o])}`;return s+"}"}(t.mapValue):oe(61005,{value:t})}function Ol(t){switch(ts(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lu(t);return e?16+Ol(e):16;case 5:return 2*t.stringValue.length;case 6:return es(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Ol(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Hs(r.fields,(a,o)=>{s+=a.length+Ol(o)}),s}(t.mapValue);default:throw oe(13486,{value:t})}}function Ah(t){return!!t&&"integerValue"in t}function ep(t){return!!t&&"arrayValue"in t}function og(t){return!!t&&"nullValue"in t}function lg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dl(t){return!!t&&"mapValue"in t}function mE(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Tv])==null?void 0:r.stringValue)===Sv}function Ha(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ha(t.arrayValue.values[n]);return e}return{...t}}function xE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(n)}setAll(e){let n=xt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Ha(o):s.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Dl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Dl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hs(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new dn(Ha(this.value))}}function Iv(t){const e=[];return Hs(t.fields,(n,r)=>{const s=new xt([n]);if(Dl(r)){const a=Iv(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,s,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Tt(e,0,de.min(),de.min(),de.min(),dn.empty(),0)}static newFoundDocument(e,n,r,s){return new Tt(e,1,n,de.min(),r,s,0)}static newNoDocument(e,n){return new Tt(e,2,n,de.min(),de.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,de.min(),de.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.position=e,this.inclusive=n}}function cg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=Ui(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function ug(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function gE(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{}class st extends Cv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yE(e,n,r):n==="array-contains"?new kE(e,r):n==="in"?new NE(e,r):n==="not-in"?new _E(e,r):n==="array-contains-any"?new jE(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vE(e,r):new wE(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ui(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(Ui(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends Cv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Kn(e,n)}matches(e){return Av(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Av(t){return t.op==="and"}function Rv(t){return bE(t)&&Av(t)}function bE(t){for(const e of t.filters)if(e instanceof Kn)return!1;return!0}function Rh(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Bi(t.value);if(Rv(t))return t.filters.map(e=>Rh(e)).join(",");{const e=t.filters.map(n=>Rh(n)).join(",");return`${t.op}(${e})`}}function Pv(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&Gn(r.value,s.value)}(t,e):t instanceof Kn?function(r,s){return s instanceof Kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,c)=>a&&Pv(o,s.filters[c]),!0):!1}(t,e):void oe(19439)}function Ov(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Bi(n.value)}`}(t):t instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(Ov).join(" ,")+"}"}(t):"Filter"}class yE extends st{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class vE extends st{constructor(e,n){super(e,"in",n),this.keys=Dv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wE extends st{constructor(e,n){super(e,"not-in",n),this.keys=Dv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Dv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class kE extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ep(n)&&yo(n.arrayValue,this.value)}}class NE extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yo(this.value.arrayValue,n)}}class _E extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yo(this.value.arrayValue,n)}}class jE extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ep(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n=null,r=[],s=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function dg(t,e=null,n=[],r=[],s=null,a=null,o=null){return new EE(t,e,n,r,s,a,o)}function tp(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),ou(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bi(r)).join(",")),e.Te=n}return e.Te}function np(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gE(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Pv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ug(t.startAt,e.startAt)&&ug(t.endAt,e.endAt)}function Ph(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n=null,r=[],s=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function TE(t,e,n,r,s,a,o,c){return new cu(t,e,n,r,s,a,o,c)}function rp(t){return new cu(t)}function hg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function SE(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function IE(t){return t.collectionGroup!==null}function Wa(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new at(xt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new wc(a,r))}),n.has(xt.keyField().canonicalString())||e.Ie.push(new wc(xt.keyField(),r))}return e.Ie}function Bn(t){const e=he(t);return e.Ee||(e.Ee=CE(e,Wa(t))),e.Ee}function CE(t,e){if(t.limitType==="F")return dg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new wc(s.field,a)});const n=t.endAt?new vc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vc(t.startAt.position,t.startAt.inclusive):null;return dg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Oh(t,e,n){return new cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uu(t,e){return np(Bn(t),Bn(e))&&t.limitType===e.limitType}function Lv(t){return`${tp(Bn(t))}|lt:${t.limitType}`}function ei(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Ov(s)).join(", ")}]`),ou(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Bi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Bi(s)).join(",")),`Target(${r})`}(Bn(t))}; limitType=${t.limitType})`}function du(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ie.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Wa(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=cg(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Wa(r),s)||r.endAt&&!function(o,c,u){const d=cg(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Wa(r),s))}(t,e)}function AE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Vv(t){return(e,n)=>{let r=!1;for(const s of Wa(t)){const a=RE(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function RE(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?Ui(u,d):oe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hs(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return wv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=new $e(ie.comparator);function pr(){return PE}const Mv=new $e(ie.comparator);function Ia(...t){let e=Mv;for(const n of t)e=e.insert(n.key,n);return e}function zv(t){let e=Mv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ws(){return qa()}function Fv(){return qa()}function qa(){return new Ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const OE=new $e(ie.comparator),DE=new at(ie.comparator);function Ne(...t){let e=DE;for(const n of t)e=e.add(n);return e}const LE=new at(ke);function VE(){return LE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function Uv(t){return{integerValue:""+t}}function ME(t,e){return lE(e)?Uv(e):sp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this._=void 0}}function zE(t,e,n){return t instanceof kc?function(s,a){const o={fields:{[_v]:{stringValue:Nv},[Ev]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Zf(a)&&(a=lu(a)),a&&(o.fields[jv]=a),{mapValue:o}}(n,e):t instanceof vo?$v(t,e):t instanceof wo?Hv(t,e):function(s,a){const o=Bv(s,a),c=fg(o)+fg(s.Ae);return Ah(o)&&Ah(s.Ae)?Uv(c):sp(s.serializer,c)}(t,e)}function FE(t,e,n){return t instanceof vo?$v(t,e):t instanceof wo?Hv(t,e):n}function Bv(t,e){return t instanceof Nc?function(r){return Ah(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class kc extends hu{}class vo extends hu{constructor(e){super(),this.elements=e}}function $v(t,e){const n=Wv(e);for(const r of t.elements)n.some(s=>Gn(s,r))||n.push(r);return{arrayValue:{values:n}}}class wo extends hu{constructor(e){super(),this.elements=e}}function Hv(t,e){let n=Wv(e);for(const r of t.elements)n=n.filter(s=>!Gn(s,r));return{arrayValue:{values:n}}}class Nc extends hu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fg(t){return Ke(t.integerValue||t.doubleValue)}function Wv(t){return ep(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function UE(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof vo&&s instanceof vo||r instanceof wo&&s instanceof wo?Fi(r.elements,s.elements,Gn):r instanceof Nc&&s instanceof Nc?Gn(r.Ae,s.Ae):r instanceof kc&&s instanceof kc}(t.transform,e.transform)}class BE{constructor(e,n){this.version=e,this.transformResults=n}}class or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ll(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fu{}function qv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kv(t.key,or.none()):new Ro(t.key,t.data,or.none());{const n=t.data,r=dn.empty();let s=new at(xt.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new qs(t.key,r,new _n(s.toArray()),or.none())}}function $E(t,e,n){t instanceof Ro?function(s,a,o){const c=s.value.clone(),u=mg(s.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof qs?function(s,a,o){if(!Ll(s.precondition,a))return void a.convertToUnknownDocument(o.version);const c=mg(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(Gv(s)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ga(t,e,n,r){return t instanceof Ro?function(a,o,c,u){if(!Ll(a.precondition,o))return c;const d=a.value.clone(),f=xg(a.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof qs?function(a,o,c,u){if(!Ll(a.precondition,o))return c;const d=xg(a.fieldTransforms,u,o),f=o.data;return f.setAll(Gv(a)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(t,e,n,r):function(a,o,c){return Ll(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function HE(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=Bv(r.transform,s||null);a!=null&&(n===null&&(n=dn.empty()),n.set(r.field,a))}return n||null}function pg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Fi(r,s,(a,o)=>UE(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ro extends fu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qs extends fu{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Gv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mg(t,e,n){const r=new Map;Te(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,c=e.data.field(a.field);r.set(a.field,FE(o,c,n[s]))}return r}function xg(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,zE(a,o,e))}return r}class Kv extends fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WE extends fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&$E(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ga(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ga(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Fv();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(s.key)?null:c;const u=qv(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Fi(this.mutations,e.mutations,(n,r)=>pg(n,r))&&Fi(this.baseMutations,e.baseMutations,(n,r)=>pg(n,r))}}class ip{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return OE}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new ip(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,_e;function QE(t){switch(t){case H.OK:return oe(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return oe(15467,{code:t})}}function Qv(t){if(t===void 0)return fr("GRPC error has no .code"),H.UNKNOWN;switch(t){case Ye.OK:return H.OK;case Ye.CANCELLED:return H.CANCELLED;case Ye.UNKNOWN:return H.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return H.INTERNAL;case Ye.UNAVAILABLE:return H.UNAVAILABLE;case Ye.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Ye.NOT_FOUND:return H.NOT_FOUND;case Ye.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Ye.ABORTED:return H.ABORTED;case Ye.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Ye.DATA_LOSS:return H.DATA_LOSS;default:return oe(39323,{code:t})}}(_e=Ye||(Ye={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=new Gr([4294967295,4294967295],0);function gg(t){const e=YE().encode(t),n=new dv;return n.update(e),new Uint8Array(n.digest())}function bg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Gr([n,r],0),new Gr([s,a],0)]}class ap{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ca(`Invalid padding: ${n}`);if(r<0)throw new Ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Gr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Gr.fromNumber(r)));return s.compare(JE)===1&&(s=new Gr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gg(e),[r,s]=bg(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new ap(a,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=gg(e),[r,s]=bg(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Po.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pu(de.min(),s,new $e(ke),pr(),Ne())}}class Po{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Po(r,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Yv{constructor(e,n){this.targetId=e,this.Ce=n}}class Jv{constructor(e,n,r=vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class yg{constructor(){this.ve=0,this.Fe=vg(),this.Me=vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),n=Ne(),r=Ne();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe(38017,{changeType:a})}}),new Po(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=vg()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class XE{constructor(e){this.Ge=e,this.ze=new Map,this.je=pr(),this.He=xl(),this.Je=xl(),this.Ze=new $e(ke)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:oe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(Ph(a))if(r===0){const o=new ie(a.path);this.et(n,o,Tt.newNoDocument(o,de.min()))}else Te(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,c;try{o=es(r).toUint8Array()}catch(u){if(u instanceof kv)return Os("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ap(o,s,a)}catch(u){return Os(u instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Ph(c.target)){const u=new ie(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Tt.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.Ke())}});let r=Ne();this.Je.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new pu(e,n,this.Ze,this.je,r);return this.je=pr(),this.He=xl(),this.Je=xl(),this.Ze=new $e(ke),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new yg,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new at(ke),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new at(ke),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xl(){return new $e(ie.comparator)}function vg(){return new $e(ie.comparator)}const ZE={asc:"ASCENDING",desc:"DESCENDING"},eT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tT={and:"AND",or:"OR"};class nT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dh(t,e){return t.useProto3Json||ou(e)?e:{value:e}}function _c(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rT(t,e){return _c(t,e.toTimestamp())}function $n(t){return Te(!!t,49232),de.fromTimestamp(function(n){const r=Zr(n);return new De(r.seconds,r.nanos)}(t))}function op(t,e){return Lh(t,e).canonicalString()}function Lh(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Zv(t){const e=Fe.fromString(t);return Te(sw(e),10190,{key:e.toString()}),e}function Vh(t,e){return op(t.databaseId,e.path)}function gd(t,e){const n=Zv(e);if(n.get(1)!==t.databaseId.projectId)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(tw(n))}function ew(t,e){return op(t.databaseId,e)}function sT(t){const e=Zv(t);return e.length===4?Fe.emptyPath():tw(e)}function Mh(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tw(t){return Te(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function wg(t,e,n){return{name:Vh(t,e),fields:n.value.mapValue.fields}}function iT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:oe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(Te(f===void 0||typeof f=="string",58123),vt.fromBase64String(f||"")):(Te(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),vt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?H.UNKNOWN:Qv(d.code);return new re(f,d.message||"")}(o);n=new Jv(r,s,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=gd(t,r.document.name),a=$n(r.document.updateTime),o=r.document.createTime?$n(r.document.createTime):de.min(),c=new dn({mapValue:{fields:r.document.fields}}),u=Tt.newFoundDocument(s,a,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Vl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=gd(t,r.document),a=r.readTime?$n(r.readTime):de.min(),o=Tt.newNoDocument(s,a),c=r.removedTargetIds||[];n=new Vl([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=gd(t,r.document),a=r.removedTargetIds||[];n=new Vl([],a,s,null)}else{if(!("filter"in e))return oe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new KE(s,a),c=r.targetId;n=new Yv(c,o)}}return n}function aT(t,e){let n;if(e instanceof Ro)n={update:wg(t,e.key,e.value)};else if(e instanceof Kv)n={delete:Vh(t,e.key)};else if(e instanceof qs)n={update:wg(t,e.key,e.data),updateMask:mT(e.fieldMask)};else{if(!(e instanceof WE))return oe(16599,{dt:e.type});n={verify:Vh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof kc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof wo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Nc)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw oe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:rT(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:oe(27497)}(t,e.precondition)),n}function oT(t,e){return t&&t.length>0?(Te(e!==void 0,14353),t.map(n=>function(s,a){let o=s.updateTime?$n(s.updateTime):$n(a);return o.isEqual(de.min())&&(o=$n(a)),new BE(o,s.transformResults||[])}(n,e))):[]}function lT(t,e){return{documents:[ew(t,e.path)]}}function cT(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ew(t,s);const a=function(d){if(d.length!==0)return rw(Kn.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(f=>function(b){return{field:ti(b.field),direction:hT(b.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Dh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function uT(t){let e=sT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Te(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(x){const b=nw(x);return b instanceof Kn&&Rv(b)?b.getFilters():[b]}(n.where));let o=[];n.orderBy&&(o=function(x){return x.map(b=>function(I){return new wc(ni(I.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(b))}(n.orderBy));let c=null;n.limit&&(c=function(x){let b;return b=typeof x=="object"?x.value:x,ou(b)?null:b}(n.limit));let u=null;n.startAt&&(u=function(x){const b=!!x.before,E=x.values||[];return new vc(E,b)}(n.startAt));let d=null;return n.endAt&&(d=function(x){const b=!x.before,E=x.values||[];return new vc(E,b)}(n.endAt)),TE(e,s,o,a,c,"F",u,d)}function dT(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ni(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ni(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ni(n.unaryFilter.field);return st.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ni(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}}(t):t.fieldFilter!==void 0?function(n){return st.create(ni(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kn.create(n.compositeFilter.filters.map(r=>nw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe(1026)}}(n.compositeFilter.op))}(t):oe(30097,{filter:t})}function hT(t){return ZE[t]}function fT(t){return eT[t]}function pT(t){return tT[t]}function ti(t){return{fieldPath:t.canonicalString()}}function ni(t){return xt.fromServerFormat(t.fieldPath)}function rw(t){return t instanceof st?function(n){if(n.op==="=="){if(lg(n.value))return{unaryFilter:{field:ti(n.field),op:"IS_NAN"}};if(og(n.value))return{unaryFilter:{field:ti(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lg(n.value))return{unaryFilter:{field:ti(n.field),op:"IS_NOT_NAN"}};if(og(n.value))return{unaryFilter:{field:ti(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ti(n.field),op:fT(n.op),value:n.value}}}(t):t instanceof Kn?function(n){const r=n.getFilters().map(s=>rw(s));return r.length===1?r[0]:{compositeFilter:{op:pT(n.op),filters:r}}}(t):oe(54877,{filter:t})}function mT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function iw(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,r,s,a=de.min(),o=de.min(),c=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.yt=e}}function gT(t){const e=uT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Oh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.Sn=new yT}addToCollectionParentIndex(e,n){return this.Sn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Xr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class yT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new at(Fe.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new at(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aw=41943040;class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(aw,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new $i(0)}static ar(){return new $i(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="LruGarbageCollector",vT=1048576;function _g([t,e],[n,r]){const s=ke(t,n);return s===0?ke(e,r):s}class wT{constructor(e){this.Pr=e,this.buffer=new at(_g),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_g(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kT{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ee(Ng,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ji(n)?ee(Ng,"Ignoring IndexedDB error during garbage collection: ",n):await Yi(n)}await this.Ar(3e5)})}}class NT{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(au.ce);const r=new wT(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(kg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kg):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,a,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,o=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(r=x,c=Date.now(),this.removeTargets(e,r,n))).next(x=>(a=x,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(d=Date.now(),Zs()<=we.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${x} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:x})))}}function _T(t,e){return new NT(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ga(r.mutation,s,_n.empty(),De.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ne()){const s=ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=Ia();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let a=pr();const o=qa(),c=function(){return qa()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof qs)?a=a.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Ga(f.mutation,d,f.mutation.getFieldMask(),De.now())):o.set(d.key,_n.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>c.set(d,new ET(f,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=qa();let s=new $e((o,c)=>o-c),a=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||_n.empty();f=c.applyToLocalView(d,f),r.set(u,f);const x=(s.get(c.batchId)||Ne()).add(u);s=s.insert(c.batchId,x)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,x=Fv();f.forEach(b=>{if(!a.has(b)){const E=qv(n.get(b),r.get(b));E!==null&&x.set(b,E),a=a.add(b)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,x))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return SE(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):IE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):B.resolve(ws());let c=xo,u=a;return o.next(d=>B.forEach(d,(f,x)=>(c<x.largestBatchId&&(c=x.largestBatchId),a.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next(b=>{u=u.insert(f,b)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,Ne())).next(f=>({batchId:c,changes:zv(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=Ia();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=Ia();return this.indexManager.getCollectionParents(e,a).next(c=>B.forEach(c,u=>{const d=function(x,b){return new cu(b,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((x,b)=>{o=o.insert(x,b)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Tt.newInvalidDocument(f)))});let c=Ia();return o.forEach((u,d)=>{const f=a.get(u);f!==void 0&&Ga(f.mutation,d,_n.empty(),De.now()),du(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return B.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:$n(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:gT(s.bundledQuery),readTime:$n(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.overlays=new $e(ie.comparator),this.Lr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ws();return B.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.bt(e,n,a)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Lr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ws(),a=n.length+1,o=new ie(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new $e((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=ws(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ws(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return B.resolve(c)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new GE(n,r));let a=this.Lr.get(n);a===void 0&&(a=Ne(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(){this.kr=new at(ut.Kr),this.qr=new at(ut.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new ut(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new ie(new Fe([])),r=new ut(n,e),s=new ut(n,e+1),a=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),a.push(o.key)}),a}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ie(new Fe([])),r=new ut(n,e),s=new ut(n,e+1);let a=Ne();return this.qr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new ut(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ie.comparator(e.key,n.key)||ke(e.Hr,n.Hr)}static Ur(e,n){return ke(e.Hr,n.Hr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new at(ut.Kr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qE(a,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Jr=this.Jr.add(new ut(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),a=s<0?0:s;return B.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Xf:this.Yn-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),s=new ut(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],o=>{const c=this.Zr(o.Hr);a.push(c)}),B.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(ke);return n.forEach(s=>{const a=new ut(s,0),o=new ut(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,o],c=>{r=r.add(c.Hr)})}),B.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;ie.isDocumentKey(a)||(a=a.child(""));const o=new ut(new ie(a),0);let c=new at(ke);return this.Jr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)},o),B.resolve(this.Yr(c))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Te(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return B.forEach(n.mutations,s=>{const a=new ut(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new ut(n,0),s=this.Jr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.ti=e,this.docs=function(){return new $e(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=pr();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Tt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=pr();const o=n.path,c=new ie(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||sE(rE(f),r)<=0||(s.has(f.key)||du(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return B.resolve(a)}getAllFromCollectionGroup(e,n,r,s){oe(9500)}ni(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PT(this)}getSize(e){return B.resolve(this.size)}}class PT extends jT{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.persistence=e,this.ri=new Ws(n=>tp(n),np),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.ii=0,this.si=new lp,this.targetCount=0,this.oi=$i._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),B.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new $i(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.lr(n),B.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.ri.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),B.waitFor(a).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n){this._i={},this.overlays={},this.ai=new au(0),this.ui=!1,this.ui=!0,this.ci=new CT,this.referenceDelegate=e(this),this.li=new OT(this),this.indexManager=new bT,this.remoteDocumentCache=function(s){return new RT(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new xT(n),this.Pi=new ST(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new AT(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new DT(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(a=>this.referenceDelegate.Ii(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,n){return B.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class DT extends aE{constructor(e){super(),this.currentSequenceNumber=e}}class cp{constructor(e){this.persistence=e,this.Ri=new lp,this.Ai=null}static Vi(e){return new cp(e)}get di(){if(this.Ai)return this.Ai;throw oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.di.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.di,r=>{const s=ie.fromPath(r);return this.mi(e,s).next(a=>{a||n.removeEntry(s,de.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class jc{constructor(e,n){this.persistence=e,this.fi=new Ws(r=>cE(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=_T(this,n)}static Vi(e,n){return new jc(e,n)}Ti(){}Ii(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return B.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(a=>a?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(c=>{c||(r++,a.removeEntry(o,de.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),B.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ol(e.data.value)),n}wr(e,n,r){return B.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=Ne(),s=Ne();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new up(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return Nj()?8:oE(It())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.gs(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ps(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new LT;return this.ys(e,n,o).next(c=>{if(a.result=c,this.As)return this.ws(e,n,o,c.size)})}).next(()=>a.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Zs()<=we.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",ei(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(Zs()<=we.DEBUG&&ee("QueryEngine","Query:",ei(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Zs()<=we.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",ei(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):B.resolve())}gs(e,n){if(hg(n))return B.resolve(null);let r=Bn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Oh(n,null,"F"),r=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Ne(...a);return this.fs.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ss(n,d,o,u.readTime)?this.gs(e,Oh(n,null,"F")):this.Ds(e,d,n,u)}))})))}ps(e,n,r,s){return hg(n)||s.isEqual(de.min())?B.resolve(null):this.fs.getDocuments(e,r).next(a=>{const o=this.bs(n,a);return this.Ss(n,o,r,s)?B.resolve(null):(Zs()<=we.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ei(n)),this.Ds(e,o,n,nE(s,xo)).next(c=>c))})}bs(e,n){let r=new at(Vv(e));return n.forEach((s,a)=>{du(e,a)&&(r=r.add(a))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,n,r){return Zs()<=we.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",ei(n)),this.fs.getDocumentsMatchingQuery(e,n,Xr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="LocalStore",MT=3e8;class zT{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new $e(ke),this.Fs=new Ws(a=>tp(a),np),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TT(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function FT(t,e,n,r){return new zT(t,e,n,r)}async function lw(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=Ne();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of a){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:c}))})})}function UT(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const x=d.batch,b=x.keys();let E=B.resolve();return b.forEach(I=>{E=E.next(()=>f.getEntry(u,I)).next(A=>{const O=d.docVersions.get(I);Te(O!==null,48541),A.version.compareTo(O)<0&&(x.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(u,x))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Ne();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function cw(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function BT(t,e){const n=he(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const c=[];e.targetChanges.forEach((f,x)=>{const b=s.get(x);if(!b)return;c.push(n.li.removeMatchingKeys(a,f.removedDocuments,x).next(()=>n.li.addMatchingKeys(a,f.addedDocuments,x)));let E=b.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(x)!==null?E=E.withResumeToken(vt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),s=s.insert(x,E),function(A,O,N){return A.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=MT?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(b,E,f)&&c.push(n.li.updateTargetData(a,E))});let u=pr(),d=Ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),c.push($T(a,o,e.documentUpdates).next(f=>{u=f.Bs,d=f.Ls})),!r.isEqual(de.min())){const f=n.li.getLastRemoteSnapshotVersion(a).next(x=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(f)}return B.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.vs=s,a))}function $T(t,e,n){let r=Ne(),s=Ne();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=pr();return n.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(de.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):ee(dp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Bs:o,Ls:s}})}function HT(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Xf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WT(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(a=>a?(s=a,B.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Lr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function zh(t,e,n){const r=he(t),s=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ji(o))throw o;ee(dp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function jg(t,e,n){const r=he(t);let s=de.min(),a=Ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const x=he(u),b=x.Fs.get(f);return b!==void 0?B.resolve(x.vs.get(b)):x.li.getTargetData(d,f)}(r,o,Bn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:de.min(),n?a:Ne())).next(c=>(qT(r,AE(e),c),{documents:c,ks:a})))}function qT(t,e,n){let r=t.Ms.get(e)||de.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Ms.set(e,r)}class Eg{constructor(){this.activeTargetIds=VE()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GT{constructor(){this.vo=new Eg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Eg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="ConnectivityMonitor";class Sg{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ee(Tg,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ee(Tg,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl=null;function Fh(){return gl===null?gl=function(){return 268435456+Math.round(2147483648*Math.random())}():gl++,"0x"+gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="RestConnection",QT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class YT{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===bc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,a){const o=Fh(),c=this.Qo(e,n.toUriEncodedString());ee(bd,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,a);const{host:d}=new URL(c),f=Us(d);return this.zo(e,c,u,r,f).then(x=>(ee(bd,`Received RPC '${e}' ${o}: `,x),x),x=>{throw Os(bd,`RPC '${e}' ${o} failed with error: `,x,"url: ",c,"request:",r),x})}jo(e,n,r,s,a,o){return this.Wo(e,n,r,s,a)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Qo(e,n){const r=QT[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection",Na=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class Ni extends YT{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ni.c_){const e=mv();Na(e,pv.STAT_EVENT,n=>{n.stat===Sh.PROXY?ee(_t,"STAT_EVENT: detected buffering proxy"):n.stat===Sh.NOPROXY&&ee(_t,"STAT_EVENT: detected no buffering proxy")}),Ni.c_=!0}}zo(e,n,r,s,a){const o=Fh();return new Promise((c,u)=>{const d=new hv;d.setWithCredentials(!0),d.listenOnce(fv.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Pl.NO_ERROR:const x=d.getResponseJson();ee(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(x)),c(x);break;case Pl.TIMEOUT:ee(_t,`RPC '${e}' ${o} timed out`),u(new re(H.DEADLINE_EXCEEDED,"Request time out"));break;case Pl.HTTP_ERROR:const b=d.getStatus();if(ee(_t,`RPC '${e}' ${o} failed with status:`,b,"response text:",d.getResponseText()),b>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E==null?void 0:E.error;if(I&&I.status&&I.message){const A=function(N){const v=N.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(v)>=0?v:H.UNKNOWN}(I.status);u(new re(A,I.message))}else u(new re(H.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new re(H.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ee(_t,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);ee(_t,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=Fh(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=a.join("");ee(_t,`Creating RPC '${e}' stream ${s}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let x=!1,b=!1;const E=new JT({Ho:I=>{b?ee(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(x||(ee(_t,`Opening RPC '${e}' stream ${s} transport.`),f.open(),x=!0),ee(_t,`RPC '${e}' stream ${s} sending:`,I),f.send(I))},Jo:()=>f.close()});return Na(f,Sa.EventType.OPEN,()=>{b||(ee(_t,`RPC '${e}' stream ${s} transport opened.`),E.i_())}),Na(f,Sa.EventType.CLOSE,()=>{b||(b=!0,ee(_t,`RPC '${e}' stream ${s} transport closed`),E.o_(),this.E_(f))}),Na(f,Sa.EventType.ERROR,I=>{b||(b=!0,Os(_t,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),E.o_(new re(H.UNAVAILABLE,"The operation could not be completed")))}),Na(f,Sa.EventType.MESSAGE,I=>{var A;if(!b){const O=I.data[0];Te(!!O,16349);const N=O,v=(N==null?void 0:N.error)||((A=N[0])==null?void 0:A.error);if(v){ee(_t,`RPC '${e}' stream ${s} received error:`,v);const j=v.status;let L=function(g){const p=Ye[g];if(p!==void 0)return Qv(p)}(j),S=v.message;j==="NOT_FOUND"&&S.includes("database")&&S.includes("does not exist")&&S.includes(this.databaseId.database)&&Os(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),L===void 0&&(L=H.INTERNAL,S="Unknown error status: "+j+" with message "+v.message),b=!0,E.o_(new re(L,S)),f.close()}else ee(_t,`RPC '${e}' stream ${s} received:`,O),E.__(O)}}),Ni.u_(),setTimeout(()=>{E.s_()},0),E}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return xv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t){return new Ni(t)}function yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){return new nT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni.c_=!1;class uw{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="PersistentStream";class dw{constructor(e,n,r,s,a,o,c,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(fr(n.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new re(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ee(Ig,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(ee(Ig,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZT extends dw{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iT(this.serializer,e),r=function(a){if(!("targetChange"in a))return de.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?$n(o.readTime):de.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Mh(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=Ph(u)?{documents:lT(a,u)}:{query:cT(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Xv(a,o.resumeToken);const d=Dh(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(de.min())>0){c.readTime=_c(a,o.snapshotVersion.toTimestamp());const d=Dh(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=dT(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Mh(this.serializer),n.removeTarget=e,this.K_(n)}}class eS extends dw{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=oT(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Mh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>aT(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{}class nS extends tS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Wo(e,Lh(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new re(H.UNKNOWN,a.toString())})}jo(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.jo(e,Lh(n,r),s,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(H.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function rS(t,e,n,r){return new nS(t,e,n,r)}class sS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fr(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="RemoteStore";class iS{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Gs(this)&&(ee(Ds,"Restarting streams for network reachability change."),await async function(u){const d=he(u);d.Ea.add(4),await Oo(d),d.Va.set("Unknown"),d.Ea.delete(4),await xu(d)}(this))})}),this.Va=new sS(r,s)}}async function xu(t){if(Gs(t))for(const e of t.Ra)await e(!0)}async function Oo(t){for(const e of t.Ra)await e(!1)}function hw(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),mp(n)?pp(n):Xi(n).O_()&&fp(n,e))}function hp(t,e){const n=he(t),r=Xi(n);n.Ia.delete(e),r.O_()&&fw(n,e),n.Ia.size===0&&(r.O_()?r.L_():Gs(n)&&n.Va.set("Unknown"))}function fp(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xi(t).Z_(e)}function fw(t,e){t.da.$e(e),Xi(t).X_(e)}function pp(t){t.da=new XE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xi(t).start(),t.Va.ua()}function mp(t){return Gs(t)&&!Xi(t).x_()&&t.Ia.size>0}function Gs(t){return he(t).Ea.size===0}function pw(t){t.da=void 0}async function aS(t){t.Va.set("Online")}async function oS(t){t.Ia.forEach((e,n)=>{fp(t,e)})}async function lS(t,e){pw(t),mp(t)?(t.Va.ha(e),pp(t)):t.Va.set("Unknown")}async function cS(t,e,n){if(t.Va.set("Online"),e instanceof Jv&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const c of a.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.da.removeTarget(c))}(t,e)}catch(r){ee(Ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ec(t,r)}else if(e instanceof Vl?t.da.Xe(e):e instanceof Yv?t.da.st(e):t.da.tt(e),!n.isEqual(de.min()))try{const r=await cw(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.da.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.Ia.get(d);f&&a.Ia.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=a.Ia.get(u);if(!f)return;a.Ia.set(u,f.withResumeToken(vt.EMPTY_BYTE_STRING,f.snapshotVersion)),fw(a,u);const x=new Lr(f.target,u,d,f.sequenceNumber);fp(a,x)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ee(Ds,"Failed to raise snapshot:",r),await Ec(t,r)}}async function Ec(t,e,n){if(!Ji(e))throw e;t.Ea.add(1),await Oo(t),t.Va.set("Offline"),n||(n=()=>cw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee(Ds,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xu(t)})}function mw(t,e){return e().catch(n=>Ec(t,n,e))}async function gu(t){const e=he(t),n=ns(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xf;for(;uS(e);)try{const s=await HT(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,dS(e,s)}catch(s){await Ec(e,s)}xw(e)&&gw(e)}function uS(t){return Gs(t)&&t.Ta.length<10}function dS(t,e){t.Ta.push(e);const n=ns(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function xw(t){return Gs(t)&&!ns(t).x_()&&t.Ta.length>0}function gw(t){ns(t).start()}async function hS(t){ns(t).ra()}async function fS(t){const e=ns(t);for(const n of t.Ta)e.ea(n.mutations)}async function pS(t,e,n){const r=t.Ta.shift(),s=ip.from(r,e,n);await mw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await gu(t)}async function mS(t,e){e&&ns(t).Y_&&await async function(r,s){if(function(o){return QE(o)&&o!==H.ABORTED}(s.code)){const a=r.Ta.shift();ns(r).B_(),await mw(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await gu(r)}}(t,e),xw(t)&&gw(t)}async function Cg(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),ee(Ds,"RemoteStore received new credentials");const r=Gs(n);n.Ea.add(3),await Oo(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xu(n)}async function xS(t,e){const n=he(t);e?(n.Ea.delete(2),await xu(n)):e||(n.Ea.add(2),await Oo(n),n.Va.set("Unknown"))}function Xi(t){return t.ma||(t.ma=function(n,r,s){const a=he(n);return a.sa(),new ZT(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:aS.bind(null,t),Yo:oS.bind(null,t),t_:lS.bind(null,t),J_:cS.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),mp(t)?pp(t):t.Va.set("Unknown")):(await t.ma.stop(),pw(t))})),t.ma}function ns(t){return t.fa||(t.fa=function(n,r,s){const a=he(n);return a.sa(),new eS(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:hS.bind(null,t),t_:mS.bind(null,t),ta:fS.bind(null,t),na:pS.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await gu(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(Ds,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,c=new xp(e,n,o,s,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gp(t,e){if(fr("AsyncQueue",`${e}: ${t}`),Ji(t))return new re(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{static emptySet(e){return new _i(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Ia(),this.sortedSet=new $e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _i)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _i;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this.ga=new $e(ie.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):oe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Hi{constructor(e,n,r,s,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Hi(e,n,_i.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class bS{constructor(){this.queries=Rg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),a=s.queries;s.queries=Rg(),a.forEach((o,c)=>{for(const u of c.ba)u.onError(r)})})(this,new re(H.ABORTED,"Firestore shutting down"))}}function Rg(){return new Ws(t=>Lv(t),uu)}async function yS(t,e){const n=he(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new gS,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=gp(o,`Initialization of query '${ei(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&bp(n)}async function vS(t,e){const n=he(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.ba.indexOf(e);o>=0&&(a.ba.splice(o,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wS(t,e){const n=he(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const c of o.ba)c.Fa(s)&&(r=!0);o.wa=s}}r&&bp(n)}function kS(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(n);r.queries.delete(e)}function bp(t){t.Ca.forEach(e=>{e.next()})}var Uh,Pg;(Pg=Uh||(Uh={})).Ma="default",Pg.Cache="cache";class NS{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Hi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Hi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Uh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.key=e}}class yw{constructor(e){this.key=e}}class _S{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ne(),this.mutatedKeys=Ne(),this.eu=Vv(e),this.tu=new _i(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Ag,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,x)=>{const b=s.get(f),E=du(this.query,x)?x:null,I=!!b&&this.mutatedKeys.has(b.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let O=!1;b&&E?b.data.isEqual(E.data)?I!==A&&(r.track({type:3,doc:E}),O=!0):this.su(b,E)||(r.track({type:2,doc:E}),O=!0,(u&&this.eu(E,u)>0||d&&this.eu(E,d)<0)&&(c=!0)):!b&&E?(r.track({type:0,doc:E}),O=!0):b&&!E&&(r.track({type:1,doc:b}),O=!0,(u||d)&&(c=!0)),O&&(E?(o=o.add(E),a=A?a.add(f):a.delete(f)):(o=o.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Ss:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,x)=>function(E,I){const A=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Vt:O})}};return A(E)-A(I)}(f.type,x.type)||this.eu(f.doc,x.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Xa;return this.Xa=u,o.length!==0||d?{snapshot:new Hi(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ag,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ne(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new yw(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new bw(r))}),n}cu(e){this.Za=e.ks,this.Ya=Ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Hi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const yp="SyncEngine";class jS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ES{constructor(e){this.key=e,this.hu=!1}}class TS{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ws(c=>Lv(c),uu),this.Iu=new Map,this.Eu=new Set,this.Ru=new $e(ie.comparator),this.Au=new Map,this.Vu=new lp,this.du={},this.mu=new Map,this.fu=$i.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SS(t,e,n=!0){const r=jw(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await vw(r,e,n,!0),s}async function IS(t,e){const n=jw(t);await vw(n,e,!0,!1)}async function vw(t,e,n,r){const s=await WT(t.localStore,Bn(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await CS(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&hw(t.remoteStore,s),c}async function CS(t,e,n,r,s){t.pu=(x,b,E)=>async function(A,O,N,v){let j=O.view.ru(N);j.Ss&&(j=await jg(A.localStore,O.query,!1).then(({documents:g})=>O.view.ru(g,j)));const L=v&&v.targetChanges.get(O.targetId),S=v&&v.targetMismatches.get(O.targetId)!=null,T=O.view.applyChanges(j,A.isPrimaryClient,L,S);return Dg(A,O.targetId,T.au),T.snapshot}(t,x,b,E);const a=await jg(t.localStore,e,!0),o=new _S(e,a.ks),c=o.ru(a.documents),u=Po.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Dg(t,n,d.au);const f=new jS(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function AS(t,e,n){const r=he(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(o=>!uu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await zh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&hp(r.remoteStore,s.targetId),Bh(r,s.targetId)}).catch(Yi)):(Bh(r,s.targetId),await zh(r.localStore,s.targetId,!0))}async function RS(t,e){const n=he(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hp(n.remoteStore,r.targetId))}async function PS(t,e,n){const r=FS(t);try{const s=await function(o,c){const u=he(o),d=De.now(),f=c.reduce((E,I)=>E.add(I.key),Ne());let x,b;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let I=pr(),A=Ne();return u.xs.getEntries(E,f).next(O=>{I=O,I.forEach((N,v)=>{v.isValidDocument()||(A=A.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,I)).next(O=>{x=O;const N=[];for(const v of c){const j=HE(v,x.get(v.key).overlayedDocument);j!=null&&N.push(new qs(v.key,j,Iv(j.value.mapValue),or.exists(!0)))}return u.mutationQueue.addMutationBatch(E,d,N,c)}).next(O=>{b=O;const N=O.applyToLocalDocumentSet(x,A);return u.documentOverlayCache.saveOverlays(E,O.batchId,N)})}).then(()=>({batchId:b.batchId,changes:zv(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.du[o.currentUser.toKey()];d||(d=new $e(ke)),d=d.insert(c,u),o.du[o.currentUser.toKey()]=d}(r,s.batchId,n),await Do(r,s.changes),await gu(r.remoteStore)}catch(s){const a=gp(s,"Failed to persist write");n.reject(a)}}async function ww(t,e){const n=he(t);try{const r=await BT(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Au.get(a);o&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Te(o.hu,14607):s.removedDocuments.size>0&&(Te(o.hu,42227),o.hu=!1))}),await Do(n,r,e)}catch(r){await Yi(r)}}function Og(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=he(o);u.onlineState=c;let d=!1;u.queries.forEach((f,x)=>{for(const b of x.ba)b.va(c)&&(d=!0)}),d&&bp(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function OS(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new $e(ie.comparator);o=o.insert(a,Tt.newNoDocument(a,de.min()));const c=Ne().add(a),u=new pu(de.min(),new Map,new $e(ke),o,c);await ww(r,u),r.Ru=r.Ru.remove(a),r.Au.delete(e),vp(r)}else await zh(r.localStore,e,!1).then(()=>Bh(r,e,n)).catch(Yi)}async function DS(t,e){const n=he(t),r=e.batch.batchId;try{const s=await UT(n.localStore,e);Nw(n,r,null),kw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Do(n,s)}catch(s){await Yi(s)}}async function LS(t,e,n){const r=he(t);try{const s=await function(o,c){const u=he(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(x=>(Te(x!==null,37113),f=x.keys(),u.mutationQueue.removeMutationBatch(d,x))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);Nw(r,e,n),kw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Do(r,s)}catch(s){await Yi(s)}}function kw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Nw(t,e,n){const r=he(t);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Bh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||_w(t,r)})}function _w(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(hp(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),vp(t))}function Dg(t,e,n){for(const r of n)r instanceof bw?(t.Vu.addReference(r.key,e),VS(t,r)):r instanceof yw?(ee(yp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||_w(t,r.key)):oe(19791,{wu:r})}function VS(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(ee(yp,"New document in limbo: "+n),t.Eu.add(r),vp(t))}function vp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ie(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new ES(n)),t.Ru=t.Ru.insert(n,r),hw(t.remoteStore,new Lr(Bn(rp(n.path)),r,"TargetPurposeLimboResolution",au.ce))}}async function Do(t,e,n){const r=he(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const x=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,x?"current":"not-current")}if(d){s.push(d);const x=up.Es(u.targetId,d);a.push(x)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(u,d){const f=he(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>B.forEach(d,b=>B.forEach(b.Ts,E=>f.persistence.referenceDelegate.addReference(x,b.targetId,E)).next(()=>B.forEach(b.Is,E=>f.persistence.referenceDelegate.removeReference(x,b.targetId,E)))))}catch(x){if(!Ji(x))throw x;ee(dp,"Failed to update sequence numbers: "+x)}for(const x of d){const b=x.targetId;if(!x.fromCache){const E=f.vs.get(b),I=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(I);f.vs=f.vs.insert(b,A)}}}(r.localStore,a))}async function MS(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){ee(yp,"User change. New user:",e.toKey());const r=await lw(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(c=>{c.forEach(u=>{u.reject(new re(H.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Do(n,r.Ns)}}function zS(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return Ne().add(r.key);{let s=Ne();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function jw(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ww.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OS.bind(null,e),e.Pu.J_=wS.bind(null,e.eventManager),e.Pu.yu=kS.bind(null,e.eventManager),e}function FS(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LS.bind(null,e),e}class Tc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return FT(this.persistence,new VT,e.initialUser,this.serializer)}Cu(e){return new ow(cp.Vi,this.serializer)}Du(e){return new GT}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tc.provider={build:()=>new Tc};class US extends Tc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Te(this.persistence.referenceDelegate instanceof jc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kT(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new ow(r=>jc.Vi(r,n),this.serializer)}}class $h{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Og(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MS.bind(null,this.syncEngine),await xS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bS}()}createDatastore(e){const n=mu(e.databaseInfo.databaseId),r=XT(e.databaseInfo);return rS(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,c){return new iS(r,s,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Og(this.syncEngine,n,0),function(){return Sg.v()?new Sg:new KT}())}createSyncEngine(e,n){return function(s,a,o,c,u,d,f){const x=new TS(s,a,o,c,u,d);return f&&(x.gu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=he(s);ee(Ds,"RemoteStore shutting down."),a.Ea.add(5),await Oo(a),a.Aa.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}$h.provider={build:()=>new $h};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="FirestoreClient";class $S{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=jt.UNAUTHENTICATED,this.clientId=Yf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{ee(rs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee(rs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vd(t,e){t.asyncQueue.verifyOperationInProgress(),ee(rs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await lw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Lg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await HS(t);ee(rs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Cg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Cg(e.remoteStore,s)),t._onlineComponents=e}async function HS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(rs,"Using user provided OfflineComponentProvider");try{await vd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Os("Error using user provided cache. Falling back to memory cache: "+n),await vd(t,new Tc)}}else ee(rs,"Using default OfflineComponentProvider"),await vd(t,new US(void 0));return t._offlineComponents}async function Ew(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(rs,"Using user provided OnlineComponentProvider"),await Lg(t,t._uninitializedComponentsProvider._online)):(ee(rs,"Using default OnlineComponentProvider"),await Lg(t,new $h))),t._onlineComponents}function WS(t){return Ew(t).then(e=>e.syncEngine)}async function Vg(t){const e=await Ew(t),n=e.eventManager;return n.onListen=SS.bind(null,e.syncEngine),n.onUnlisten=AS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RS.bind(null,e.syncEngine),n}function qS(t,e,n,r){const s=new BS(r),a=new NS(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>yS(await Vg(t),a)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>vS(await Vg(t),a))}}function GS(t,e){const n=new js;return t.asyncQueue.enqueueAndForget(async()=>PS(await WS(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="ComponentProvider",Mg=new Map;function QS(t,e,n,r,s){return new hE(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Tw(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="firestore.googleapis.com",zg=!0;class Fg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sw,this.ssl=zg}else this.host=e.host,this.ssl=e.ssl??zg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vT)throw new re(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new H2;switch(r.type){case"firstParty":return new K2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mg.get(n);r&&(ee(KS,"Removing Datastore"),Mg.delete(n),r.terminate())}(this),Promise.resolve()}}function YS(t,e,n,r={}){var d;t=ki(t,wp);const s=Us(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(qf(`https://${c}`),Gf("Firestore",!0)),a.host!==Sw&&a.host!==c&&Os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:s,emulatorOptions:r};if(!Jr(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,x;if(typeof r.mockUserToken=="string")f=r.mockUserToken,x=jt.MOCK_USER;else{f=tv(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new re(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new jt(b)}t._authCredentials=new W2(new bv(f,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bu(this.firestore,e,this._query)}}class ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ko(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ao(n,ht._jsonSchema))return new ht(e,r||null,new ie(Fe.fromString(n.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:Xe("string",ht._jsonSchemaVersion),referencePath:Xe("string")};class ko extends bu{constructor(e,n,r){super(e,n,rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new ie(e))}withConverter(e){return new ko(this.firestore,e,this._path)}}function Ug(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=Yf.newId()),eE("doc","path",e),t instanceof wp){const r=Fe.fromString(e,...n);return Zx(r),new ht(t,null,new ie(r))}{if(!(t instanceof ht||t instanceof ko))throw new re(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Zx(r),new ht(t.firestore,t instanceof ko?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="AsyncQueue";class $g{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uw(this,"async_queue_retry"),this._c=()=>{const r=yd();r&&ee(Bg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new js;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ji(e))throw e;ee(Bg,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,fr("INTERNAL UNHANDLED ERROR: ",Hg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=xp.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&oe(47125,{Pc:Hg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Hg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Sc extends wp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new $g,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $g(e),this._firestoreClient=void 0,await e}}}function JS(t,e){const n=typeof t=="object"?t:iu(),r=typeof t=="string"?t:bc,s=os(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=Xy("firestore");a&&YS(s,...a)}return s}function Iw(t){if(t._terminated)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XS(t),t._firestoreClient}function XS(t){var r,s,a,o;const e=t._freezeSettings(),n=QS(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new $S(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hn(vt.fromBase64String(e))}catch(n){throw new re(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hn(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ao(e,hn._jsonSchema))return hn.fromBase64String(e.bytes)}}hn._jsonSchemaVersion="firestore/bytes/1.0",hn._jsonSchema={type:Xe("string",hn._jsonSchemaVersion),bytes:Xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hn._jsonSchemaVersion}}static fromJSON(e){if(Ao(e,Hn._jsonSchema))return new Hn(e.latitude,e.longitude)}}Hn._jsonSchemaVersion="firestore/geoPoint/1.0",Hn._jsonSchema={type:Xe("string",Hn._jsonSchemaVersion),latitude:Xe("number"),longitude:Xe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:In._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ao(e,In._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new In(e.vectorValues);throw new re(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}In._jsonSchemaVersion="firestore/vectorValue/1.0",In._jsonSchema={type:Xe("string",In._jsonSchemaVersion),vectorValues:Xe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=/^__.*__$/;class eI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ro(e,this.data,n,this.fieldTransforms)}}function Rw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{dataSource:t})}}class kp{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new kp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ic(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Rw(this.dataSource)&&ZS.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class tI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mu(e)}createContext(e,n,r,s=!1){return new kp({dataSource:e,methodName:n,targetDoc:r,path:xt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nI(t){const e=t._freezeSettings(),n=mu(t._databaseId);return new tI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rI(t,e,n,r,s,a={}){const o=t.createContext(a.merge||a.mergeFields?2:0,e,n,s);Lw("Data must be an object, but it was:",o,r);const c=Ow(r,o);let u,d;if(a.merge)u=new _n(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const f=[];for(const x of a.mergeFields){const b=Np(e,x,n);if(!o.contains(b))throw new re(H.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);aI(f,b)||f.push(b)}u=new _n(f),d=o.fieldTransforms.filter(x=>u.covers(x.field))}else u=null,d=o.fieldTransforms;return new eI(new dn(c),u,d)}function Pw(t,e){if(Dw(t=Vt(t)))return Lw("Unsupported field value:",e,t),Ow(t,e);if(t instanceof Aw)return function(r,s){if(!Rw(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const c of r){let u=Pw(c,s.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ME(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=De.fromDate(r);return{timestampValue:_c(s.serializer,a)}}if(r instanceof De){const a=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_c(s.serializer,a)}}if(r instanceof Hn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hn)return{bytesValue:Xv(s.serializer,r._byteString)};if(r instanceof ht){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:op(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof In)return function(o,c){const u=o instanceof In?o.toArray():o;return{mapValue:{fields:{[Tv]:{stringValue:Sv},[yc]:{arrayValue:{values:u.map(f=>{if(typeof f!="number")throw c.createError("VectorValues must only contain numeric values.");return sp(c.serializer,f)})}}}}}}(r,s);if(iw(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Jf(r)}`)}(t,e)}function Ow(t,e){const n={};return wv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hs(t,(r,s)=>{const a=Pw(s,e.childContextForField(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function Dw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Hn||t instanceof hn||t instanceof ht||t instanceof Aw||t instanceof In||iw(t))}function Lw(t,e,n){if(!Dw(n)||!yv(n)){const r=Jf(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Np(t,e,n){if((e=Vt(e))instanceof Cw)return e._internalPath;if(typeof e=="string")return iI(t,e);throw Ic("Field path arguments must be of type string or ",t,!1,void 0,n)}const sI=new RegExp("[~\\*/\\[\\]]");function iI(t,e,n){if(e.search(sI)>=0)throw Ic(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cw(...e.split("."))._internalPath}catch{throw Ic(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ic(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new re(H.INVALID_ARGUMENT,c+t+u)}function aI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hs(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[yc].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>Ke(o.doubleValue));return new In(n)}convertGeoPoint(e){return new Hn(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(go(e));default:return null}}convertTimestamp(e){const n=Zr(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Te(sw(r),9688,{name:e});const s=new bo(r.get(1),r.get(3)),a=new ie(r.popFirst(5));return s.isEqual(n)||fr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw extends oI{constructor(e){super(),this.firestore=e}convertBytes(e){return new hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}const Wg="@firebase/firestore",qg="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Np("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lI extends Mw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function uI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Aa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Es extends Mw{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Np("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Es._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Es._jsonSchemaVersion="firestore/documentSnapshot/1.0",Es._jsonSchema={type:Xe("string",Es._jsonSchemaVersion),bundleSource:Xe("string","DocumentSnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class Ml extends Es{data(e={}){return super.data(e)}}class ji{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Aa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ml(this._firestore,this._userDataWriter,r.key,r,new Aa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Ml(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Aa(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Ml(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Aa(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:dI(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ji._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji._jsonSchemaVersion="firestore/querySnapshot/1.0",ji._jsonSchema={type:Xe("string",ji._jsonSchemaVersion),bundleSource:Xe("string","QuerySnapshot"),bundleName:Xe("string"),bundle:Xe("string")};function Kg(t,e,n){t=ki(t,ht);const r=ki(t.firestore,Sc),s=uI(t.converter,e),a=nI(r);return fI(r,[rI(a,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,or.none())])}function hI(t,...e){var d,f,x;t=Vt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Gg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Gg(e[r])){const b=e[r];e[r]=(d=b.next)==null?void 0:d.bind(b),e[r+1]=(f=b.error)==null?void 0:f.bind(b),e[r+2]=(x=b.complete)==null?void 0:x.bind(b)}let a,o,c;if(t instanceof ht)o=ki(t.firestore,Sc),c=rp(t._key.path),a={next:b=>{e[r]&&e[r](pI(o,t,b))},error:e[r+1],complete:e[r+2]};else{const b=ki(t,bu);o=ki(b.firestore,Sc),c=b._query;const E=new Vw(o);a={next:I=>{e[r]&&e[r](new ji(o,E,b,I))},error:e[r+1],complete:e[r+2]},cI(t._query)}const u=Iw(o);return qS(u,c,s,a)}function fI(t,e){const n=Iw(t);return GS(n,e)}function pI(t,e,n){const r=n.docs.get(e._key),s=new Vw(t);return new Es(t,s,e._key,r,new Aa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){$2($s),Rn(new gn("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new Sc(new q2(r.getProvider("auth-internal")),new Q2(o,r.getProvider("app-check-internal")),fE(o,s),o);return a={useFetchStreams:n,...a},c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Gt(Wg,qg,e),Gt(Wg,qg,"esm2020")})();var mI="firebase",xI="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt(mI,xI,"app");function zw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gI=zw,Fw=new Bs("auth","Firebase",zw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new su("@firebase/auth");function bI(t,...e){Cc.logLevel<=we.WARN&&Cc.warn(`Auth (${$s}): ${t}`,...e)}function zl(t,...e){Cc.logLevel<=we.ERROR&&Cc.error(`Auth (${$s}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,...e){throw _p(t,...e)}function Wn(t,...e){return _p(t,...e)}function Uw(t,e,n){const r={...gI(),[e]:n};return new Bs("auth","Firebase",r).create(e,{appName:t.name})}function Ts(t){return Uw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _p(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Fw.create(t,...e)}function le(t,e,...n){if(!t)throw _p(e,...n)}function rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zl(e),new Error(e)}function xr(t,e){t||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function yI(){return Qg()==="http:"||Qg()==="https:"}function Qg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yI()||nv()||"connection"in navigator)?navigator.onLine:!0}function wI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.shortDelay=e,this.longDelay=n,xr(n>e,"Short delay should be less than long delay!"),this.isMobile=bj()||wj()}get(){return vI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t,e){xr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_I=new Lo(3e4,6e4);function Ep(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Zi(t,e,n,r,s={}){return $w(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Co({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return vj()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Us(t.emulatorConfig.host)&&(d.credentials="include"),Bw.fetch()(await Hw(t,t.config.apiHost,n,c),d)})}async function $w(t,e,n){t._canInitEmulator=!1;const r={...kI,...e};try{const s=new EI(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw bl(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw bl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw bl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw bl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Uw(t,f,d);mr(t,f)}}catch(s){if(s instanceof bn)throw s;mr(t,"network-request-failed",{message:String(s)})}}async function jI(t,e,n,r,s={}){const a=await Zi(t,e,n,r,s);return"mfaPendingCredential"in a&&mr(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function Hw(t,e,n,r){const s=`${e}${n}?${r}`,a=t,o=a.config.emulator?jp(t.config,s):`${t.config.apiScheme}://${s}`;return NI.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}class EI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wn(this.auth,"network-request-failed")),_I.get())})}}function bl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Wn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TI(t,e){return Zi(t,"POST","/v1/accounts:delete",e)}async function Ac(t,e){return Zi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SI(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),s=Tp(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Ka(wd(s.auth_time)),issuedAtTime:Ka(wd(s.iat)),expirationTime:Ka(wd(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function wd(t){return Number(t)*1e3}function Tp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Yy(n);return s?JSON.parse(s):(zl("Failed to decode base64 JWT payload"),null)}catch(s){return zl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Yg(t){const e=Tp(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bn&&II(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function II({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){var x;const e=t.auth,n=await t.getIdToken(),r=await No(t,Ac(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(x=s.providerUserInfo)!=null&&x.length?Ww(s.providerUserInfo):[],o=RI(t.providerData,a),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Wh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function AI(t){const e=Vt(t);await Rc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ww(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(t,e){const n=await $w(t,{},async()=>{const r=Co({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=await Hw(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Us(t.emulatorConfig.host)&&(u.credentials="include"),Bw.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OI(t,e){return Zi(t,"POST","/v2/accounts:revokeToken",Ep(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Yg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await PI(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new Ei;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(le(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ei,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new CI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await No(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SI(this,e)}reload(){return AI(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await No(this,TI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:x,emailVerified:b,isAnonymous:E,providerData:I,stsTokenManager:A}=n;le(x&&A,e,"internal-error");const O=Ei.fromJSON(this.name,A);le(typeof x=="string",e,"internal-error"),jr(r,e.name),jr(s,e.name),le(typeof b=="boolean",e,"internal-error"),le(typeof E=="boolean",e,"internal-error"),jr(a,e.name),jr(o,e.name),jr(c,e.name),jr(u,e.name),jr(d,e.name),jr(f,e.name);const N=new jn({uid:x,auth:e,email:s,emailVerified:b,displayName:r,isAnonymous:E,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:O,createdAt:d,lastLoginAt:f});return I&&Array.isArray(I)&&(N.providerData=I.map(v=>({...v}))),u&&(N._redirectEventId=u),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ei;s.updateFromServerResponse(n);const a=new jn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Rc(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Ww(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new Ei;c.updateFromIdToken(r);const u=new jn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=new Map;function sr(t){xr(t instanceof Function,"Expected a class definition");let e=Jg.get(t);return e?(xr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Jg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qw.type="NONE";const Xg=qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ti{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Fl(this.userKey,s.apiKey,a),this.fullPersistenceKey=Fl("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ac(this.auth,{idToken:e}).catch(()=>{});return n?jn._fromGetAccountInfoResponse(this.auth,n,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ti(sr(Xg),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||sr(Xg);const o=Fl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){let x;if(typeof f=="string"){const b=await Ac(e,{idToken:f}).catch(()=>{});if(!b)break;x=await jn._fromGetAccountInfoResponse(e,b,f)}else x=jn._fromJSON(e,f);d!==a&&(c=x),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Ti(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Ti(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xw(e))return"Blackberry";if(Zw(e))return"Webos";if(Kw(e))return"Safari";if((e.includes("chrome/")||Qw(e))&&!e.includes("edge/"))return"Chrome";if(Jw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Gw(t=It()){return/firefox\//i.test(t)}function Kw(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qw(t=It()){return/crios\//i.test(t)}function Yw(t=It()){return/iemobile/i.test(t)}function Jw(t=It()){return/android/i.test(t)}function Xw(t=It()){return/blackberry/i.test(t)}function Zw(t=It()){return/webos/i.test(t)}function Sp(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DI(t=It()){var e;return Sp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function LI(){return kj()&&document.documentMode===10}function ek(t=It()){return Sp(t)||Jw(t)||Zw(t)||Xw(t)||/windows phone/i.test(t)||Yw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t,e=[]){let n;switch(t){case"Browser":n=Zg(It());break;case"Worker":n=`${Zg(It())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$s}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(t,e={}){return Zi(t,"GET","/v2/passwordPolicy",Ep(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=6;class FI{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eb(this),this.idTokenSubscription=new eb(this),this.beforeStateQueue=new VI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sr(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Ti.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ac(this,{idToken:e}),r=await jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(Ts(this));const n=e?Vt(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MI(this),n=new FI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Ti.create(this,[sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&bI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ip(t){return Vt(t)}class eb{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ij(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BI(t){Cp=t}function $I(t){return Cp.loadJS(t)}function HI(){return Cp.gapiScript}function WI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e){const n=os(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Jr(a,e??{}))return s;mr(s,"already-initialized")}return n.initialize({options:e})}function GI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KI(t,e,n){const r=Ip(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=nk(e),{host:o,port:c}=QI(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},f=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Jr(d,r.config.emulator)&&Jr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Us(o)?(qf(`${a}//${o}${u}`),Gf("Auth",!0)):YI()}function nk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QI(t){const e=nk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:tb(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:tb(o)}}}function tb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function YI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Si(t,e){return jI(t,"POST","/v1/accounts:signInWithIdp",Ep(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="http://localhost";class Ls extends rk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const o=new Ls(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Si(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Si(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Si(e,n)}buildRequest(){const e={requestUri:JI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Co(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends sk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Vo{constructor(){super("facebook.com")}static credential(e){return Ls._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Vo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ls._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Vo{constructor(){super("github.com")}static credential(e){return Ls._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Vo{constructor(){super("twitter.com")}static credential(e,n){return Ls._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pr.credential(n,r)}catch{return null}}}Pr.TWITTER_SIGN_IN_METHOD="twitter.com";Pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await jn._fromIdTokenResponse(e,r,s),o=nb(r);return new Wi({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=nb(r);return new Wi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function nb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends bn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Pc(e,n,r,s)}}function ik(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Pc._fromErrorAndOperation(t,a,e,r):a})}async function XI(t,e,n=!1){const r=await No(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(t,e,n=!1){const{auth:r}=t;if(Nn(r.app))return Promise.reject(Ts(r));const s="reauthenticate";try{const a=await No(t,ik(r,s,e,t),n);le(a.idToken,r,"internal-error");const o=Tp(a.idToken);le(o,r,"internal-error");const{sub:c}=o;return le(t.uid===c,r,"user-mismatch"),Wi._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&mr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(t,e,n=!1){if(Nn(t.app))return Promise.reject(Ts(t));const r="signIn",s=await ik(t,r,e),a=await Wi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}function tC(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function nC(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}const Oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oc,"1"),this.storage.removeItem(Oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=1e3,sC=10;class ok extends ak{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ek(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);LI()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,sC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ok.type="LOCAL";const iC=ok;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk extends ak{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lk.type="SESSION";const ck=lk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new yu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await aC(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=Ap("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(x){const b=x;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(b.data.response);break;default:clearTimeout(f),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return window}function lC(t){qn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(){return typeof qn().WorkerGlobalScope<"u"&&typeof qn().importScripts=="function"}async function cC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function dC(){return uk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="firebaseLocalStorageDb",hC=1,Dc="firebaseLocalStorage",hk="fbase_key";class Mo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vu(t,e){return t.transaction([Dc],e?"readwrite":"readonly").objectStore(Dc)}function fC(){const t=indexedDB.deleteDatabase(dk);return new Mo(t).toPromise()}function qh(){const t=indexedDB.open(dk,hC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dc,{keyPath:hk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dc)?e(r):(r.close(),await fC(),e(await qh()))})})}async function rb(t,e,n){const r=vu(t,!0).put({[hk]:e,value:n});return new Mo(r).toPromise()}async function pC(t,e){const n=vu(t,!1).get(e),r=await new Mo(n).toPromise();return r===void 0?null:r.value}function sb(t,e){const n=vu(t,!0).delete(e);return new Mo(n).toPromise()}const mC=800,xC=3;class fk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>xC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yu._getInstance(dC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await cC(),!this.activeServiceWorker)return;this.sender=new oC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qh();return await rb(e,Oc,"1"),await sb(e,Oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=vu(s,!1).getAll();return new Mo(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fk.type="LOCAL";const gC=fk;new Lo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t,e){return e?sr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp extends rk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Si(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Si(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Si(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yC(t){return eC(t.auth,new Rp(t),t.bypassAuthState)}function vC(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),ZI(n,new Rp(t),t.bypassAuthState)}async function wC(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),XI(n,new Rp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yC;case"linkViaPopup":case"linkViaRedirect":return wC;case"reauthViaPopup":case"reauthViaRedirect":return vC;default:mr(this.auth,"internal-error")}}resolve(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Lo(2e3,1e4);class mi extends pk{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,mi.currentPopupAction&&mi.currentPopupAction.cancel(),mi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){xr(this.filter.length===1,"Popup operations only handle one event");const e=Ap();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kC.get())};e()}}mi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="pendingRedirect",Ul=new Map;class _C extends pk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ul.get(this.auth._key());if(!e){try{const r=await jC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ul.set(this.auth._key(),e)}return this.bypassAuthState||Ul.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jC(t,e){const n=SC(e),r=TC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function EC(t,e){Ul.set(t._key(),e)}function TC(t){return sr(t._redirectPersistence)}function SC(t){return Fl(NC,t.config.apiKey,t.name)}async function IC(t,e,n=!1){if(Nn(t.app))return Promise.reject(Ts(t));const r=Ip(t),s=bC(r,e),o=await new _C(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=10*60*1e3;class AC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mk(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CC&&this.cachedEventUids.clear(),this.cachedEventUids.has(ib(e))}saveEventToCache(e){this.cachedEventUids.add(ib(e)),this.lastProcessedEventTime=Date.now()}}function ib(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(t,e={}){return Zi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DC=/^https?/;async function LC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await PC(t);for(const n of e)try{if(VC(n))return}catch{}mr(t,"unauthorized-domain")}function VC(t){const e=Hh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!DC.test(n))return!1;if(OC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new Lo(3e4,6e4);function ab(){const t=qn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zC(t){return new Promise((e,n)=>{var s,a,o;function r(){ab(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ab(),n(Wn(t,"network-request-failed"))},timeout:MC.get()})}if((a=(s=qn().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=qn().gapi)!=null&&o.load)r();else{const c=WI("iframefcb");return qn()[c]=()=>{gapi.load?r():n(Wn(t,"network-request-failed"))},$I(`${HI()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Bl=null,e})}let Bl=null;function FC(t){return Bl=Bl||zC(t),Bl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new Lo(5e3,15e3),BC="__/auth/iframe",$C="emulator/auth/iframe",HC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qC(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jp(e,$C):`https://${t.config.authDomain}/${BC}`,r={apiKey:e.apiKey,appName:t.name,v:$s},s=WC.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Co(r).slice(1)}`}async function GC(t){const e=await FC(t),n=qn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:qC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HC,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=Wn(t,"network-request-failed"),c=qn().setTimeout(()=>{a(o)},UC.get());function u(){qn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QC=500,YC=600,JC="_blank",XC="http://localhost";class ob{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZC(t,e,n,r=QC,s=YC){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...KC,width:r.toString(),height:s.toString(),top:a,left:o},d=It().toLowerCase();n&&(c=Qw(d)?JC:n),Gw(d)&&(e=e||XC,u.scrollbars="yes");const f=Object.entries(u).reduce((b,[E,I])=>`${b}${E}=${I},`,"");if(DI(d)&&c!=="_self")return e4(e||"",c),new ob(null);const x=window.open(e||"",c,f);le(x,t,"popup-blocked");try{x.focus()}catch{}return new ob(x)}function e4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4="__/auth/handler",n4="emulator/auth/handler",r4=encodeURIComponent("fac");async function lb(t,e,n,r,s,a){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$s,eventId:s};if(e instanceof sk){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Sj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,x]of Object.entries({}))o[f]=x}if(e instanceof Vo){const f=e.getScopes().filter(x=>x!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${r4}=${encodeURIComponent(u)}`:"";return`${s4(t)}?${Co(c).slice(1)}${d}`}function s4({config:t}){return t.emulator?jp(t,n4):`https://${t.authDomain}/${t4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="webStorageSupport";class i4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ck,this._completeRedirectFn=IC,this._overrideRedirectResult=EC}async _openPopup(e,n,r,s){var o;xr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await lb(e,n,r,Hh(),s);return ZC(e,a,Ap())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await lb(e,n,r,Hh(),s);return lC(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(xr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GC(e),r=new AC(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kd,{type:kd},s=>{var o;const a=(o=s==null?void 0:s[0])==null?void 0:o[kd];a!==void 0&&n(!!a),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ek()||Kw()||Sp()}}const a4=i4;var cb="@firebase/auth",ub="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c4(t){Rn(new gn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tk(t)},d=new UI(r,s,a,u);return GI(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rn(new gn("auth-internal",e=>{const n=Ip(e.getProvider("auth").getImmediate());return(r=>new o4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gt(cb,ub,l4(t)),Gt(cb,ub,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=5*60,d4=ev("authIdTokenMaxAge")||u4;let db=null;const h4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>d4)return;const s=n==null?void 0:n.token;db!==s&&(db=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function f4(t=iu()){const e=os(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qI(t,{popupRedirectResolver:a4,persistence:[gC,iC,ck]}),r=ev("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=h4(a.toString());nC(n,o,()=>o(n.currentUser)),tC(n,c=>o(c))}}const s=Jy("auth");return s&&KI(n,`http://${s}`),n}function p4(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}BI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Wn("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",p4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});c4("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="firebasestorage.googleapis.com",m4="storageBucket",x4=2*60*1e3,g4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends bn{constructor(e,n,r=0){super(Nd(e),`Firebase Storage: ${n} (${Nd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Nd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qn||(Qn={}));function Nd(t){return"storage/"+t}function b4(){const t="An unknown error occurred, please check the error payload for server response.";return new Yn(Qn.UNKNOWN,t)}function y4(){return new Yn(Qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v4(){return new Yn(Qn.CANCELED,"User canceled the upload/download.")}function w4(t){return new Yn(Qn.INVALID_URL,"Invalid URL '"+t+"'.")}function k4(t){return new Yn(Qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hb(t){return new Yn(Qn.INVALID_ARGUMENT,t)}function gk(){return new Yn(Qn.APP_DELETED,"The Firebase app was deleted.")}function N4(t){return new Yn(Qn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=En.makeFromUrl(e,n)}catch{return new En(e,"")}if(r.path==="")return r;throw k4(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(L){L.path_=decodeURIComponent(L.path)}const f="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",E=new RegExp(`^https?://${x}/${f}/b/${s}/o${b}`,"i"),I={bucket:1,path:3},A=n===xk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,O="([^?#]*)",N=new RegExp(`^https?://${A}/${s}/${O}`,"i"),j=[{regex:c,indices:u,postModify:a},{regex:E,indices:I,postModify:d},{regex:N,indices:{bucket:1,path:2},postModify:d}];for(let L=0;L<j.length;L++){const S=j[L],T=S.regex.exec(e);if(T){const g=T[S.indices.bucket];let p=T[S.indices.path];p||(p=""),r=new En(g,p),S.postModify(r);break}}if(r==null)throw w4(e);return r}}class _4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t,e,n){let r=1,s=null,a=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...O){d||(d=!0,e.apply(null,O))}function x(O){s=setTimeout(()=>{s=null,t(E,u())},O)}function b(){a&&clearTimeout(a)}function E(O,...N){if(d){b();return}if(O){b(),f.call(null,O,...N);return}if(u()||o){b(),f.call(null,O,...N);return}r<64&&(r*=2);let j;c===1?(c=2,j=0):j=(r+Math.random())*1e3,x(j)}let I=!1;function A(O){I||(I=!0,b(),!d&&(s!==null?(O||(c=2),clearTimeout(s),x(0)):O||(c=1)))}return x(0),a=setTimeout(()=>{o=!0,A(!0)},n),A}function E4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(t){return t!==void 0}function fb(t,e,n,r){if(r<e)throw hb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hb(`Invalid value for '${t}'. Expected ${n} or less.`)}function S4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Lc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Lc||(Lc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n,r,s,a,o,c,u,d,f,x,b=!0,E=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=x,this.retry=b,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,A)=>{this.resolve_=I,this.reject_=A,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new yl(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===Lc.NO_ERROR,u=a.getStatus();if(!c||I4(u,this.additionalRetryCodes_)&&this.retry){const f=a.getErrorCode()===Lc.ABORT;r(!1,new yl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new yl(d,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());T4(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=b4();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?gk():v4();o(u)}else{const u=y4();o(u)}};this.canceled_?n(!1,new yl(!1,null,!0)):this.backoffId_=j4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function A4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function R4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function P4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function O4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function D4(t,e,n,r,s,a,o=!0,c=!1){const u=S4(t.urlParams),d=t.url+u,f=Object.assign({},t.headers);return P4(f,e),A4(f,n),R4(f,a),O4(f,r),new C4(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function V4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this._service=e,n instanceof En?this._location=n:this._location=En.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Vc(e,n)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return V4(this._location.path)}get storage(){return this._service}get parent(){const e=L4(this._location.path);if(e===null)return null;const n=new En(this._location.bucket,e);return new Vc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw N4(e)}}function pb(t,e){const n=e==null?void 0:e[m4];return n==null?null:En.makeFromBucketSpec(n,t)}function M4(t,e,n,r={}){t.host=`${e}:${n}`;const s=Us(e);s&&(qf(`https://${t.host}/b`),Gf("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:tv(a,t.app.options.projectId))}class z4{constructor(e,n,r,s,a,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=xk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=x4,this._maxUploadRetryTime=g4,this._requests=new Set,s!=null?this._bucket=En.makeFromBucketSpec(s,this._host):this._bucket=pb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=pb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vc(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new _4(gk());{const o=D4(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const mb="@firebase/storage",xb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="storage";function F4(t=iu(),e){t=Vt(t);const r=os(t,bk).getImmediate({identifier:e}),s=Xy("storage");return s&&U4(r,...s),r}function U4(t,e,n,r={}){M4(t,e,n,r)}function B4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new z4(n,r,s,e,$s)}function $4(){Rn(new gn(bk,B4,"PUBLIC").setMultipleInstances(!0)),Gt(mb,xb,""),Gt(mb,xb,"esm2020")}$4();const yk="@firebase/installations",Pp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=1e4,wk=`w:${Pp}`,kk="FIS_v2",H4="https://firebaseinstallations.googleapis.com/v1",W4=60*60*1e3,q4="installations",G4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vs=new Bs(q4,G4,K4);function Nk(t){return t instanceof bn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k({projectId:t}){return`${H4}/projects/${t}/installations`}function jk(t){return{token:t.token,requestStatus:2,expiresIn:Y4(t.expiresIn),creationTime:Date.now()}}async function Ek(t,e){const r=(await e.json()).error;return Vs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Tk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Q4(t,{refreshToken:e}){const n=Tk(t);return n.append("Authorization",J4(e)),n}async function Sk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Y4(t){return Number(t.replace("s","000"))}function J4(t){return`${kk} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=_k(t),s=Tk(t),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:kk,appId:t.appId,sdkVersion:wk},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await Sk(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:jk(d.authToken)}}else throw await Ek("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=/^[cdef][\w-]{21}$/,Gh="";function tA(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=nA(t);return eA.test(n)?n:Gh}catch{return Gh}}function nA(t){return Z4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new Map;function Ak(t,e){const n=wu(t);Rk(n,e),rA(n,e)}function Rk(t,e){const n=Ck.get(t);if(n)for(const r of n)r(e)}function rA(t,e){const n=sA();n&&n.postMessage({key:t,fid:e}),iA()}let ks=null;function sA(){return!ks&&"BroadcastChannel"in self&&(ks=new BroadcastChannel("[Firebase] FID Change"),ks.onmessage=t=>{Rk(t.data.key,t.data.fid)}),ks}function iA(){Ck.size===0&&ks&&(ks.close(),ks=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="firebase-installations-database",oA=1,Ms="firebase-installations-store";let _d=null;function Op(){return _d||(_d=ov(aA,oA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ms)}}})),_d}async function Mc(t,e){const n=wu(t),s=(await Op()).transaction(Ms,"readwrite"),a=s.objectStore(Ms),o=await a.get(n);return await a.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Ak(t,e.fid),e}async function Pk(t){const e=wu(t),r=(await Op()).transaction(Ms,"readwrite");await r.objectStore(Ms).delete(e),await r.done}async function ku(t,e){const n=wu(t),s=(await Op()).transaction(Ms,"readwrite"),a=s.objectStore(Ms),o=await a.get(n),c=e(o);return c===void 0?await a.delete(n):await a.put(c,n),await s.done,c&&(!o||o.fid!==c.fid)&&Ak(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t){let e;const n=await ku(t.appConfig,r=>{const s=lA(r),a=cA(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===Gh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function lA(t){const e=t||{fid:tA(),registrationStatus:0};return Ok(e)}function cA(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Vs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=uA(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:dA(t)}:{installationEntry:e}}async function uA(t,e){try{const n=await X4(t,e);return Mc(t.appConfig,n)}catch(n){throw Nk(n)&&n.customData.serverCode===409?await Pk(t.appConfig):await Mc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function dA(t){let e=await gb(t.appConfig);for(;e.registrationStatus===1;)await Ik(100),e=await gb(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Dp(t);return r||n}return e}function gb(t){return ku(t,e=>{if(!e)throw Vs.create("installation-not-found");return Ok(e)})}function Ok(t){return hA(t)?{fid:t.fid,registrationStatus:0}:t}function hA(t){return t.registrationStatus===1&&t.registrationTime+vk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA({appConfig:t,heartbeatServiceProvider:e},n){const r=pA(t,n),s=Q4(t,n),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:wk,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await Sk(()=>fetch(r,c));if(u.ok){const d=await u.json();return jk(d)}else throw await Ek("Generate Auth Token",u)}function pA(t,{fid:e}){return`${_k(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lp(t,e=!1){let n;const r=await ku(t.appConfig,a=>{if(!Dk(a))throw Vs.create("not-registered");const o=a.authToken;if(!e&&gA(o))return a;if(o.requestStatus===1)return n=mA(t,e),a;{if(!navigator.onLine)throw Vs.create("app-offline");const c=yA(a);return n=xA(t,c),c}});return n?await n:r.authToken}async function mA(t,e){let n=await bb(t.appConfig);for(;n.authToken.requestStatus===1;)await Ik(100),n=await bb(t.appConfig);const r=n.authToken;return r.requestStatus===0?Lp(t,e):r}function bb(t){return ku(t,e=>{if(!Dk(e))throw Vs.create("not-registered");const n=e.authToken;return vA(n)?{...e,authToken:{requestStatus:0}}:e})}async function xA(t,e){try{const n=await fA(t,e),r={...e,authToken:n};return await Mc(t.appConfig,r),n}catch(n){if(Nk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Pk(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Mc(t.appConfig,r)}throw n}}function Dk(t){return t!==void 0&&t.registrationStatus===2}function gA(t){return t.requestStatus===2&&!bA(t)}function bA(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+W4}function yA(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function vA(t){return t.requestStatus===1&&t.requestTime+vk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t){const e=t,{installationEntry:n,registrationPromise:r}=await Dp(e);return r?r.catch(console.error):Lp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(t,e=!1){const n=t;return await NA(n),(await Lp(n,e)).token}async function NA(t){const{registrationPromise:e}=await Dp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){if(!t||!t.options)throw jd("App Configuration");if(!t.name)throw jd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw jd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function jd(t){return Vs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="installations",jA="installations-internal",EA=t=>{const e=t.getProvider("app").getImmediate(),n=_A(e),r=os(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},TA=t=>{const e=t.getProvider("app").getImmediate(),n=os(e,Lk).getImmediate();return{getId:()=>wA(n),getToken:s=>kA(n,s)}};function SA(){Rn(new gn(Lk,EA,"PUBLIC")),Rn(new gn(jA,TA,"PRIVATE"))}SA();Gt(yk,Pp);Gt(yk,Pp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="analytics",IA="firebase_id",CA="origin",AA=60*1e3,RA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt=new su("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},rn=new Bs("analytics","Analytics",PA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){if(!t.startsWith(Vp)){const e=rn.create("invalid-gtag-resource",{gtagURL:t});return Lt.warn(e.message),""}return t}function Vk(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function DA(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function LA(t,e){const n=DA("firebase-js-sdk-policy",{createScriptURL:OA}),r=document.createElement("script"),s=`${Vp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function VA(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function MA(t,e,n,r,s,a){const o=r[s];try{if(o)await e[o];else{const u=(await Vk(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){Lt.error(c)}t("config",s,a)}async function zA(t,e,n,r,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const c=await Vk(n);for(const u of o){const d=c.find(x=>x.measurementId===u),f=d&&e[d.appId];if(f)a.push(f);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,s||{})}catch(a){Lt.error(a)}}function FA(t,e,n,r){async function s(a,...o){try{if(a==="event"){const[c,u]=o;await zA(t,e,n,c,u)}else if(a==="config"){const[c,u]=o;await MA(t,e,n,r,c,u)}else if(a==="consent"){const[c,u]=o;t("consent",c,u)}else if(a==="get"){const[c,u,d]=o;t("get",c,u,d)}else if(a==="set"){const[c]=o;t("set",c)}else t(a,...o)}catch(c){Lt.error(c)}}return s}function UA(t,e,n,r,s){let a=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=FA(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}function BA(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Vp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=30,HA=1e3;class WA{constructor(e={},n=HA){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Mk=new WA;function qA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function GA(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:qA(n)},s=RA.replace("{app-id}",e),a=await fetch(s,r);if(a.status!==200&&a.status!==304){let c="";try{const u=await a.json();(o=u.error)!=null&&o.message&&(c=u.error.message)}catch{}throw rn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function KA(t,e=Mk,n){const{appId:r,apiKey:s,measurementId:a}=t.options;if(!r)throw rn.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw rn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new JA;return setTimeout(async()=>{c.abort()},AA),zk({appId:r,apiKey:s,measurementId:a},o,c,e)}async function zk(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Mk){var c;const{appId:a,measurementId:o}=t;try{await QA(r,e)}catch(u){if(o)return Lt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:o};throw u}try{const u=await GA(t);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!YA(d)){if(s.deleteThrottleMetadata(a),o)return Lt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:o};throw u}const f=Number((c=d==null?void 0:d.customData)==null?void 0:c.httpStatus)===503?Ux(n,s.intervalMillis,$A):Ux(n,s.intervalMillis),x={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,x),Lt.debug(`Calling attemptFetch again in ${f} millis`),zk(t,x,r,s)}}function QA(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(a),r(rn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function YA(t){if(!(t instanceof bn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class JA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function XA(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const a=await e,o={...r,send_to:a};t("event",n,o)}}async function ZA(t,e,n,r){if(r&&r.global){const s={};for(const a of Object.keys(n))s[`user_properties.${a}`]=n[a];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(){if(rv())try{await sv()}catch(t){return Lt.warn(rn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Lt.warn(rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function tR(t,e,n,r,s,a,o){const c=KA(t);c.then(b=>{n[b.measurementId]=b.appId,t.options.measurementId&&b.measurementId!==t.options.measurementId&&Lt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>Lt.error(b)),e.push(c);const u=eR().then(b=>{if(b)return r.getId()}),[d,f]=await Promise.all([c,u]);BA(a)||LA(a,d.measurementId),s("js",new Date);const x=(o==null?void 0:o.config)??{};return x[CA]="firebase",x.update=!0,f!=null&&(x[IA]=f),s("config",d.measurementId,x),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.app=e}_delete(){return delete Ii[this.app.options.appId],Promise.resolve()}}let Ii={},yb=[];const vb={};let Ed="dataLayer",rR="gtag",wb,Mp,kb=!1;function sR(){const t=[];if(nv()&&t.push("This is a browser extension environment."),_j()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=rn.create("invalid-analytics-context",{errorInfo:e});Lt.warn(n.message)}}function iR(t,e,n){sR();const r=t.options.appId;if(!r)throw rn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Lt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw rn.create("no-api-key");if(Ii[r]!=null)throw rn.create("already-exists",{id:r});if(!kb){VA(Ed);const{wrappedGtag:a,gtagCore:o}=UA(Ii,yb,vb,Ed,rR);Mp=a,wb=o,kb=!0}return Ii[r]=tR(t,yb,vb,e,wb,Ed,n),new nR(t)}function aR(t=iu()){t=Vt(t);const e=os(t,zc);return e.isInitialized()?e.getImmediate():oR(t)}function oR(t,e={}){const n=os(t,zc);if(n.isInitialized()){const s=n.getImmediate();if(Jr(e,n.getOptions()))return s;throw rn.create("already-initialized")}return n.initialize({options:e})}function lR(t,e,n){t=Vt(t),ZA(Mp,Ii[t.app.options.appId],e,n).catch(r=>Lt.error(r))}function cR(t,e,n,r){t=Vt(t),XA(Mp,Ii[t.app.options.appId],e,n,r).catch(s=>Lt.error(s))}const Nb="@firebase/analytics",_b="0.10.19";function uR(){Rn(new gn(zc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return iR(r,s,n)},"PUBLIC")),Rn(new gn("analytics-internal",t,"PRIVATE")),Gt(Nb,_b),Gt(Nb,_b,"esm2020");function t(e){try{const n=e.getProvider(zc).getImmediate();return{logEvent:(r,s,a)=>cR(n,r,s,a),setUserProperties:(r,s)=>lR(n,r,s)}}catch(n){throw rn.create("interop-component-reg-failed",{reason:n})}}}uR();const dR={apiKey:"AIzaSyCMtNtxvu_8IALTHCVJsGq-7LMU7WdyvhU",authDomain:"nrzone-a7415.firebaseapp.com",projectId:"nrzone-a7415",storageBucket:"nrzone-a7415.firebasestorage.app",messagingSenderId:"957480463047",appId:"1:957480463047:web:df19d823191a0712726ce2",measurementId:"G-3X8GP76N48"},Nu=lv(dR);f4(Nu);const jb=JS(Nu);F4(Nu);typeof window<"u"&&aR(Nu);const hR={workerCategories:{stone:["SABBIR","BILLALL","SOJIB","SONIA","SUMAIYA"],sewing:["JIHAN","RAJIB","IBRAHIM","KULSUM","SOBUJ"],pata:["ALAMIN","SABBIR","HASAN","KASHEM"],monthly:["UZZAL"]},workerWages:{sewing:{},stone:{},pata:{},monthly:{UZZAL:15e3}},designs:[{name:"",sewingRate:40,stoneRate:20,image:""},{name:"",sewingRate:40,stoneRate:40,image:""},{name:"",sewingRate:45,stoneRate:30,image:""}],pataRates:{Single:3,Double:5,Triple:10,Mix:8},stonePacketRate:450,rollPscRate:100,colors:["","","","","","","","","","","",""],sizes:["30","32","34","36","38","40","42","44","46","48","50","52","54","56","58"],pataTypes:["Single","Double","Triple","Mix"],pataStoneColors:["White","Golden","Black","Silver","Multi","Rainbow"],users:[{id:"NRZONE",password:"Irham@#",role:"admin",name:"Super Admin"},{id:"MANAGER",password:"456",role:"manager",name:"Operations Manager"}],cuttingStock:[],productions:[],pataEntries:[],pataStockTransfer:[],attendance:[],rawInventory:[],deliveries:[],outsideWorkEntries:[],outsideWorkers:["REPAIR MAN 1","BUTTON EXPERT"],outsideTasks:["BUTTON","CHAIN","REPAIR","KAZ","OTHERS"],adminNotes:[],cutters:["MEHEDI","SABBIR","HASAN"],adminNotes:[],cutters:["MEHEDI","SABBIR","HASAN"]},fR=()=>{const t=o=>{if(!o)return o;let c={...o};return c.users||(c.users=[]),[{id:"NRZONE",password:"Irham@#",role:"admin",name:"Super Admin"},{id:"MANAGER",password:"456",role:"manager",name:"Operations Manager"}].forEach(x=>{const b=c.users.findIndex(E=>E.id===x.id);b===-1?c.users.push(x):c.users[b].password=x.password}),delete c.customers,delete c.clientRates,delete c.clientEntries,c},[e,n]=G.useState(()=>{const o=localStorage.getItem("nrzone_data");let c=o?JSON.parse(o):hR;return t(c)}),[r,s]=G.useState(!0);G.useEffect(()=>{const o=Ug(jb,"system","masterData"),c=hI(o,u=>{if(u.exists()){const d=t(u.data());n(d),localStorage.setItem("nrzone_data",JSON.stringify(d))}else Kg(o,e).catch(console.error);s(!1)},u=>{console.error("Firebase snapshot error:",u),s(!1)});return()=>c()},[]);const a=G.useCallback(o=>{n(c=>{const u=typeof o=="function"?o(c):o,d=t(u);localStorage.setItem("nrzone_data",JSON.stringify(d));const f=Ug(jb,"system","masterData");return Kg(f,d).catch(x=>{console.error("Firebase sync error:",x)}),d})},[]);return{masterData:e,setMasterData:a,isLoading:r}},Eb=({message:t,type:e,onClose:n})=>{Cn.useEffect(()=>{if(n){const s=setTimeout(n,3e3);return()=>clearTimeout(s)}},[n]);const r={success:"bg-black text-white border-2 border-black shadow-2xl",error:"bg-rose-500 text-white shadow-[0_40px_80px_-20px_rgba(244,63,94,0.4)]",info:"bg-black text-white border-2 border-black shadow-2xl"};return i.jsxs("div",{className:`fixed bottom-12 left-1/2 -translate-x-1/2 z-[1000] px-14 py-8 rounded-full animate-fade-slide-up flex items-center gap-3 whitespace-nowrap italic backdrop-blur-3xl ${r[e]||r.info}`,children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-white animate-pulse shadow-[0_0_15px_white]"}),i.jsx("p",{className:"font-black uppercase text-sm tracking-[0.6em] leading-none text-white",children:t})]})},Tb=()=>i.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap');
        
        :root {
            --font-outfit: 'Outfit', sans-serif;
            --bg-main: #f8fafc;
            --bg-card: #ffffff; 
            --bg-surface: #ffffff;
            --border: rgba(0,0,0,0.06);
            --primary: #000000;
            --text-main: #0f172a;
            --text-muted: #64748b; 
        }

        body {
            font-family: var(--font-outfit);
            background-color: var(--bg-main);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0,0,0,0.01) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0,0,0,0.01) 0%, transparent 40%);
            background-attachment: fixed;
            font-weight: 500;
        }

        .animate-fade-up {
            animation: fadeUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .premium-card {
            background: var(--bg-card);
            border-radius: 2rem;
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.05);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .black-button {
            background: #000000;
            color: #ffffff;
            padding: 8px 20px;
            border-radius: 1rem;
            font-weight: 800;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .black-button:hover {
            transform: translateY(-2px);
            background: #18181b;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .form-input {
            width: 100%;
            background: #ffffff;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 1rem;
            padding: 0.8rem 1.2rem;
            color: #000000;
            font-weight: 600;
            transition: all 0.2s ease;
            outline: none;
        }

        .form-input::placeholder {
            color: #94a3b8;
            opacity: 0.5;
        }

        .form-input:focus {
            background: #ffffff;
            border-color: #000000;
            box-shadow: 0 0 0 4px rgba(0,0,0,0.02);
        }

        .stat-card-label {
            font-size: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            display: block;
        }

        .stat-card-value {
            font-size: 2.5rem;
            font-weight: 900;
            letter-spacing: -0.05em;
            color: #000000;
        }

        .nav-card-title {
            font-size: 0.9rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #000000;
        }

        .nav-card-sub {
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            color: #94a3b8;
            letter-spacing: 0.05em;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        `}});class pR extends Cn.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("Uncaught error:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?i.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center p-12 italic",children:[i.jsx("div",{className:"w-24 h-24 bg-rose-900/20 text-rose-500 rounded-2xl flex items-center justify-center mb-5 border border-rose-500/20",children:i.jsx(fo,{size:40,className:"animate-pulse"})}),i.jsx("h1",{className:"text-4xl font-black uppercase tracking-tighter mb-4 italic",children:"Core Failure"}),i.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-white text-black px-12 py-5 rounded-full font-black uppercase text-xs font-bold tracking-[0.4em] italic hover:scale-105 transition-transform",children:"Restart System"})]}):this.props.children}}const Fk=[{id:"Menu",label:"Main Menu",icon:gs,sub:"All Depts"},{id:"Overview",label:"Dashboard",icon:$f,sub:"Live Monitor"},{id:"Cutting",label:"Cutting",icon:Mi,sub:"Raw"},{id:"Swing",label:"Sewing",icon:wh,sub:"Factory"},{id:"Stone",label:"Stone",icon:By,sub:"Factory"},{id:"Pata",label:"Pata Hub",icon:po,sub:"Logistics"},{id:"Outside",label:"Outside Work",icon:$y,sub:"External"},{id:"Attendance",label:"Attendance",icon:Wf,sub:"Staff"},{id:"Stock",label:"Inventory",icon:Io,sub:"Vault"},{id:"Accounts",label:"Accounts",icon:Yr,sub:"Financial"},{id:"Reports",label:"Reports",icon:Hf,sub:"Analytics"},{id:"Settings",label:"System Settings",icon:zi,sub:"Config"}],mR=({setActivePanel:t,user:e})=>{const n=Fk.filter(r=>e.role==="manager"?r.id!=="Settings"&&r.id!=="Reports":r.id!=="Menu");return i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 animate-fade-up",children:n.map(r=>{const s=r.icon;return i.jsxs("button",{onClick:()=>t(r.id),className:"bg-white p-4 rounded-2xl border-4 border-slate-50 shadow-xl hover:border-black transition-all group italic flex flex-col items-center text-center gap-3 group",children:[i.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-xl flex items-center justify-center group-hover:bg-black group-hover:text-white group-hover:rotate-12 transition-all shadow-inner",children:i.jsx(s,{size:32,strokeWidth:2.5})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-black uppercase tracking-tighter text-black",children:r.label}),i.jsx("p",{className:"text-xs font-bold font-black uppercase text-slate-500 font-bold tracking-widest mt-1 opacity-60",children:r.sub})]})]},r.id)})})},xR=()=>i.jsx(pR,{children:i.jsx(bR,{})}),gR=({activePanel:t,setActivePanel:e,user:n,setUser:r,setEmergencyOpen:s})=>{const a=Fk.filter(o=>n.role==="manager"?o.id!=="Settings"&&o.id!=="Reports":!0);return i.jsxs("div",{className:"fixed left-0 top-0 h-full w-20 md:w-80 bg-white border-r border-slate-100 z-[100] flex flex-col pt-10 pb-10",children:[i.jsx("div",{className:"px-8 mb-16 hidden md:block",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-black text-white rounded-2xl flex items-center justify-center rotate-6 shadow-xl font-black italic",children:"N"}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-xl font-black italic tracking-tighter",children:["NRZONE ",i.jsx("span",{className:"text-slate-400 font-bold",children:"PRO"})]}),i.jsx("p",{className:"text-[8px] font-black uppercase text-slate-500 font-bold tracking-[0.4em]",children:"Intelligence Division"})]})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar px-4 space-y-2",children:a.map(o=>{const c=o.icon,u=t===o.id;return i.jsxs("button",{onClick:()=>e(o.id),className:`w-full flex items-center gap-3 p-4 rounded-lg transition-all group ${u?"bg-black text-white shadow-2xl":"text-slate-600 font-bold hover:bg-slate-50 hover:text-black"}`,children:[i.jsx("div",{className:`p-2 rounded-xl group-hover:rotate-6 transition-transform ${u?"bg-white/10":"bg-slate-50"}`,children:i.jsx(c,{size:20,className:u?"text-white":"text-slate-600 font-bold"})}),i.jsxs("div",{className:"hidden md:block text-left",children:[i.jsx("p",{className:"text-xs font-black uppercase italic tracking-widest leading-none",children:o.label}),i.jsx("p",{className:`text-[8px] font-black uppercase mt-1 tracking-widest ${u?"text-white/40":"text-slate-400 font-bold"}`,children:o.sub})]})]},o.id)})}),i.jsxs("div",{className:"px-4 pt-10 border-t border-slate-50",children:[i.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg mb-4 hidden md:block",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-500 shadow-xl border-2 border-white"}),i.jsx("p",{className:"text-xs font-bold font-black uppercase italic tracking-widest text-black truncate",children:n.name})]}),i.jsx("div",{className:"px-3 py-1 bg-white inline-block rounded-full border border-slate-100 shadow-sm",children:i.jsx("p",{className:"text-[8px] font-black uppercase text-slate-500 font-bold tracking-widest",children:n.role})})]}),i.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center justify-center md:justify-start gap-3 p-4 rounded-lg bg-rose-50 text-rose-500 hover:bg-rose-100 transition-all group mb-4",children:[i.jsx("div",{className:"p-2 rounded-xl bg-white shadow-sm transition-colors text-rose-600",children:i.jsx(fc,{size:20})}),i.jsx("span",{className:"hidden md:block text-xs font-black uppercase italic tracking-widest",children:"Emergency Note"})]}),i.jsxs("button",{onClick:()=>{localStorage.removeItem("nrzone_user"),r(null)},className:"w-full flex items-center justify-center md:justify-start gap-3 p-4 rounded-lg text-slate-600 font-bold hover:bg-slate-100 hover:text-black transition-all group",children:[i.jsx("div",{className:"p-2 rounded-xl bg-slate-50 group-hover:bg-slate-200 transition-colors",children:i.jsx(B_,{size:20})}),i.jsx("span",{className:"hidden md:block text-xs font-black uppercase italic tracking-widest",children:"Logout System"})]})]})]})},bR=()=>{const[t,e]=G.useState(()=>{try{const S=localStorage.getItem("nrzone_user");return!S||S==="undefined"?null:JSON.parse(S)}catch(S){return console.error("Auth Restore Error:",S),null}}),[n,r]=G.useState(()=>localStorage.getItem("nrzone_active_panel")||"Overview");Cn.useEffect(()=>{t&&localStorage.setItem("nrzone_user",JSON.stringify(t))},[t]),Cn.useEffect(()=>{localStorage.setItem("nrzone_active_panel",n)},[n]);const[s,a]=G.useState(null),{masterData:o,setMasterData:c,isLoading:u}=fR(),[d,f]=G.useState(""),[x,b]=G.useState(""),[E,I]=G.useState(!1),[A,O]=G.useState(!1),[N,v]=G.useState(""),j=(S,T="success")=>{a({message:S,type:T}),setTimeout(()=>a(null),3e3)};if(u)return null;const L=()=>{switch(n){case"Overview":return i.jsx(Dx,{masterData:o,setMasterData:c,setActivePanel:r,user:t});case"Menu":return i.jsx(mR,{setActivePanel:r,user:t});case"Cutting":return i.jsx(J_,{masterData:o,setMasterData:c,showNotify:j,setActivePanel:r});case"Swing":return i.jsx(Vx,{type:"sewing",masterData:o,setMasterData:c,showNotify:j,setActivePanel:r});case"Stone":return i.jsx(Vx,{type:"stone",masterData:o,setMasterData:c,showNotify:j,setActivePanel:r});case"Pata":return i.jsx(X_,{masterData:o,setMasterData:c,showNotify:j,setActivePanel:r});case"Attendance":return i.jsx(nj,{masterData:o,setMasterData:c,showNotify:j,setActivePanel:r});case"Reports":return i.jsx(tj,{masterData:o,user:t,setActivePanel:r});case"Settings":return i.jsx(rj,{masterData:o,setMasterData:c,showNotify:j,user:t,setActivePanel:r});case"Accounts":return i.jsx(sj,{masterData:o,setMasterData:c,showNotify:j,user:t,setActivePanel:r});case"Stock":return i.jsx(ij,{masterData:o,setMasterData:c,showNotify:j,setActivePanel:r});case"Outside":return i.jsx(aj,{masterData:o,setMasterData:c,showNotify:j,user:t,setActivePanel:r});default:return i.jsx(Dx,{masterData:o,setMasterData:c,setActivePanel:r,user:t})}};return t?i.jsxs("div",{className:"min-h-screen bg-slate-50 flex selection:bg-black selection:text-white font-outfit text-black italic",children:[i.jsx(Tb,{}),i.jsx(gR,{activePanel:n,setActivePanel:r,user:t,setUser:e,setEmergencyOpen:O}),A&&i.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-in fade-in duration-300",children:i.jsxs("div",{className:"w-full max-w-xl bg-white rounded-2xl border-4 border-rose-100 shadow-2xl p-12 relative animate-in zoom-in-95 duration-300 italic",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-5 bg-rose-500 text-white rounded-3xl shadow-xl rotate-6",children:i.jsx(fc,{size:32})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-3xl font-black uppercase tracking-tighter text-black",children:["Emergency ",i.jsx("span",{className:"text-rose-500",children:"Note"})]}),i.jsx("p",{className:"text-xs font-bold font-black uppercase text-slate-600 font-bold tracking-widest mt-1",children:"Direct alert to Super Admin"})]})]}),i.jsx("textarea",{className:"w-full h-48 bg-slate-50 text-xl font-black italic p-5 rounded-2xl border-none outline-none placeholder:text-slate-100 text-black uppercase resize-none shadow-inner mb-5",placeholder:"WHAT'S THE EMERGENCY?",value:N,onChange:S=>v(S.target.value)}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{O(!1),v("")},className:"flex-1 py-6 bg-slate-100 text-slate-600 font-bold rounded-full font-black uppercase text-xs tracking-widest hover:text-black transition-all",children:"Cancel"}),i.jsxs("button",{onClick:()=>{if(!N.trim())return;const S={id:Date.now(),from:t.name,role:t.role,text:`[EMERGENCY] ${N}`,date:new Date().toLocaleString()};c(T=>({...T,adminNotes:[...T.adminNotes||[],S]})),j("Emergency reported to Admin."),O(!1),v("")},className:"flex-[2] py-8 bg-black text-white rounded-full font-black uppercase text-lg shadow-2xl border-b-[8px] border-zinc-900 active:scale-95 transition-all flex items-center justify-center gap-3",children:[i.jsx(kh,{size:20})," SEND ALERT"]})]})]})}),i.jsx("main",{className:"flex-1 ml-20 md:ml-80 min-h-screen overflow-x-hidden pt-10 px-4 md:px-10 pb-20",children:i.jsxs("div",{className:"max-w-[1600px] mx-auto",children:[i.jsxs("header",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold font-black uppercase text-slate-600 font-bold tracking-[0.4em] italic mb-2",children:"Operational Terminal"}),i.jsx("h2",{className:"text-3xl font-black uppercase italic tracking-tighter leading-none",children:n==="Overview"?"Live Monitor":n})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs("div",{className:"hidden sm:flex items-center gap-3 bg-white px-6 py-3 rounded-2xl border border-slate-100 shadow-sm",children:[i.jsx("div",{className:"p-1.5 bg-emerald-500 rounded-full animate-pulse shadow-lg shadow-emerald-500/20"}),i.jsx("span",{className:"text-[11px] font-black uppercase italic tracking-widest leading-none text-slate-600 font-bold select-none",children:"SYSTEMS STABLE"})]})})]}),i.jsx("div",{className:"animate-fade-up",children:L()})]})}),s&&i.jsx(Eb,{message:s.message,type:s.type})]}):i.jsxs("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4 sm:p-4 relative overflow-hidden italic text-black font-outfit",children:[i.jsx(Tb,{}),i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-black blur-[160px] rounded-full opacity-5"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-black blur-[160px] rounded-full opacity-5"})]}),i.jsxs("div",{className:"w-full max-w-lg bg-white/70 backdrop-blur-3xl p-5 sm:p-20 rounded-2xl sm:rounded-3xl border-4 border-white shadow-3xl relative z-10 animate-fade-up",children:[i.jsxs("div",{className:"flex flex-col items-center mb-4 sm:mb-16 text-center",children:[i.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 bg-black text-white rounded-lg sm:rounded-[2.2rem] flex items-center justify-center rotate-6 shadow-2xl mb-4 sm:mb-4 transition-transform hover:rotate-0",children:i.jsx("span",{className:"font-black text-3xl sm:text-5xl tracking-tighter italic",children:"N"})}),i.jsxs("h1",{className:"text-3xl sm:text-5xl font-black italic uppercase tracking-tighter leading-none text-black",children:["NRZONE ",i.jsx("span",{className:"text-slate-400 font-bold",children:"PRO"})]}),i.jsx("p",{className:"text-xs font-bold sm:text-[12px] font-black uppercase tracking-[0.6em] text-slate-600 font-bold mt-3 sm:mt-5 italic text-center",children:" "})]}),i.jsxs("form",{onSubmit:S=>{S.preventDefault(),I(!0),setTimeout(()=>{const T=d.trim().toUpperCase(),g=x.trim(),p=o.users.find(y=>y.id===T&&y.password===g);p?(e(p),j(` ${p.name.toUpperCase()}`)):T==="NRZONE"&&g==="Irham@#"?(e({id:"NRZONE",name:"Super Admin",role:"admin"}),j(" ")):j("    ","error"),I(!1)},800)},className:"space-y-8 uppercase",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs font-bold font-black uppercase tracking-[0.4em] text-slate-600 font-bold ml-5 italic text-left block",children:""}),i.jsx("input",{value:d,onChange:S=>f(S.target.value),type:"text",className:"form-input text-lg sm:text-2xl uppercase tracking-widest py-5 sm:py-8 bg-slate-50 border-slate-100 focus:border-black text-black",placeholder:"NRZONE",required:!0})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-xs font-bold font-black uppercase tracking-[0.4em] text-slate-600 font-bold ml-5 italic text-left block",children:" "}),i.jsx("input",{value:x,onChange:S=>b(S.target.value),type:"password",className:"form-input text-lg sm:text-2xl tracking-[0.6em] py-5 sm:py-8 bg-slate-50 border-slate-100 focus:border-black text-black placeholder:text-slate-100",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",disabled:E,className:"w-full bg-black text-white py-5 sm:py-8 rounded-xl font-black uppercase text-xs font-bold sm:text-xs tracking-[0.6em] shadow-xl hover:translate-y-[-4px] active:translate-y-[0] transition-all italic border-b-4 sm:border-b-8 border-zinc-900 flex justify-center items-center group",children:E?i.jsx("div",{className:"w-6 h-6 border-4 border-white border-t-transparent rounded-full animate-spin"}):i.jsx("span",{className:"group-hover:scale-105 transition-transform",children:"  "})})]}),s&&i.jsx(Eb,{message:s.message,type:s.type})]})]})};Td.createRoot(document.getElementById("root")).render(i.jsx(Cn.StrictMode,{children:i.jsx(xR,{})}));
